function my(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in t)){const a=Object.getOwnPropertyDescriptor(n,l);a&&Object.defineProperty(t,l,a.get?a:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function py(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bp={exports:{}},fa={},Sp={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=Symbol.for("react.element"),hy=Symbol.for("react.portal"),fy=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),xy=Symbol.for("react.profiler"),gy=Symbol.for("react.provider"),vy=Symbol.for("react.context"),jy=Symbol.for("react.forward_ref"),Ny=Symbol.for("react.suspense"),by=Symbol.for("react.memo"),Sy=Symbol.for("react.lazy"),Fu=Symbol.iterator;function ky(t){return t===null||typeof t!="object"?null:(t=Fu&&t[Fu]||t["@@iterator"],typeof t=="function"?t:null)}var kp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cp=Object.assign,wp={};function rn(t,s,r){this.props=t,this.context=s,this.refs=wp,this.updater=r||kp}rn.prototype.isReactComponent={};rn.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};rn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tp(){}Tp.prototype=rn.prototype;function bo(t,s,r){this.props=t,this.context=s,this.refs=wp,this.updater=r||kp}var So=bo.prototype=new Tp;So.constructor=bo;Cp(So,rn.prototype);So.isPureReactComponent=!0;var Uu=Array.isArray,zp=Object.prototype.hasOwnProperty,ko={current:null},Dp={key:!0,ref:!0,__self:!0,__source:!0};function Ep(t,s,r){var n,l={},a=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(a=""+s.key),s)zp.call(s,n)&&!Dp.hasOwnProperty(n)&&(l[n]=s[n]);var c=arguments.length-2;if(c===1)l.children=r;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];l.children=u}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)l[n]===void 0&&(l[n]=c[n]);return{$$typeof:ll,type:t,key:a,ref:i,props:l,_owner:ko.current}}function Cy(t,s){return{$$typeof:ll,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Co(t){return typeof t=="object"&&t!==null&&t.$$typeof===ll}function wy(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Ku=/\/+/g;function Fa(t,s){return typeof t=="object"&&t!==null&&t.key!=null?wy(""+t.key):s.toString(36)}function Il(t,s,r,n,l){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ll:case hy:i=!0}}if(i)return i=t,l=l(i),t=n===""?"."+Fa(i,0):n,Uu(l)?(r="",t!=null&&(r=t.replace(Ku,"$&/")+"/"),Il(l,s,r,"",function(f){return f})):l!=null&&(Co(l)&&(l=Cy(l,r+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Ku,"$&/")+"/")+t)),s.push(l)),1;if(i=0,n=n===""?".":n+":",Uu(t))for(var c=0;c<t.length;c++){a=t[c];var u=n+Fa(a,c);i+=Il(a,s,r,u,l)}else if(u=ky(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=n+Fa(a,c++),i+=Il(a,s,r,u,l);else if(a==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function ul(t,s,r){if(t==null)return t;var n=[],l=0;return Il(t,n,"","",function(a){return s.call(r,a,l++)}),n}function Ty(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Al={transition:null},zy={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Al,ReactCurrentOwner:ko};function Ip(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:ul,forEach:function(t,s,r){ul(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return ul(t,function(){s++}),s},toArray:function(t){return ul(t,function(s){return s})||[]},only:function(t){if(!Co(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=rn;Ae.Fragment=fy;Ae.Profiler=xy;Ae.PureComponent=bo;Ae.StrictMode=yy;Ae.Suspense=Ny;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zy;Ae.act=Ip;Ae.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Cp({},t.props),l=t.key,a=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(a=s.ref,i=ko.current),s.key!==void 0&&(l=""+s.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in s)zp.call(s,u)&&!Dp.hasOwnProperty(u)&&(n[u]=s[u]===void 0&&c!==void 0?c[u]:s[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){c=Array(u);for(var f=0;f<u;f++)c[f]=arguments[f+2];n.children=c}return{$$typeof:ll,type:t.type,key:l,ref:a,props:n,_owner:i}};Ae.createContext=function(t){return t={$$typeof:vy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gy,_context:t},t.Consumer=t};Ae.createElement=Ep;Ae.createFactory=function(t){var s=Ep.bind(null,t);return s.type=t,s};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:jy,render:t}};Ae.isValidElement=Co;Ae.lazy=function(t){return{$$typeof:Sy,_payload:{_status:-1,_result:t},_init:Ty}};Ae.memo=function(t,s){return{$$typeof:by,type:t,compare:s===void 0?null:s}};Ae.startTransition=function(t){var s=Al.transition;Al.transition={};try{t()}finally{Al.transition=s}};Ae.unstable_act=Ip;Ae.useCallback=function(t,s){return Et.current.useCallback(t,s)};Ae.useContext=function(t){return Et.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};Ae.useEffect=function(t,s){return Et.current.useEffect(t,s)};Ae.useId=function(){return Et.current.useId()};Ae.useImperativeHandle=function(t,s,r){return Et.current.useImperativeHandle(t,s,r)};Ae.useInsertionEffect=function(t,s){return Et.current.useInsertionEffect(t,s)};Ae.useLayoutEffect=function(t,s){return Et.current.useLayoutEffect(t,s)};Ae.useMemo=function(t,s){return Et.current.useMemo(t,s)};Ae.useReducer=function(t,s,r){return Et.current.useReducer(t,s,r)};Ae.useRef=function(t){return Et.current.useRef(t)};Ae.useState=function(t){return Et.current.useState(t)};Ae.useSyncExternalStore=function(t,s,r){return Et.current.useSyncExternalStore(t,s,r)};Ae.useTransition=function(){return Et.current.useTransition()};Ae.version="18.3.1";Sp.exports=Ae;var d=Sp.exports;const Ap=py(d),Dy=my({__proto__:null,default:Ap},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey=d,Iy=Symbol.for("react.element"),Ay=Symbol.for("react.fragment"),Ry=Object.prototype.hasOwnProperty,Ly=Ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,By={key:!0,ref:!0,__self:!0,__source:!0};function Rp(t,s,r){var n,l={},a=null,i=null;r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)Ry.call(s,n)&&!By.hasOwnProperty(n)&&(l[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)l[n]===void 0&&(l[n]=s[n]);return{$$typeof:Iy,type:t,key:a,ref:i,props:l,_owner:Ly.current}}fa.Fragment=Ay;fa.jsx=Rp;fa.jsxs=Rp;bp.exports=fa;var e=bp.exports,Ni={},Lp={exports:{}},Wt={},Bp={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(J,ee){var re=J.length;J.push(ee);e:for(;0<re;){var N=re-1>>>1,x=J[N];if(0<l(x,ee))J[N]=ee,J[re]=x,re=N;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var ee=J[0],re=J.pop();if(re!==ee){J[0]=re;e:for(var N=0,x=J.length,_=x>>>1;N<_;){var q=2*(N+1)-1,O=J[q],Y=q+1,ye=J[Y];if(0>l(O,re))Y<x&&0>l(ye,O)?(J[N]=ye,J[Y]=re,N=Y):(J[N]=O,J[q]=re,N=q);else if(Y<x&&0>l(ye,re))J[N]=ye,J[Y]=re,N=Y;else break e}}return ee}function l(J,ee){var re=J.sortIndex-ee.sortIndex;return re!==0?re:J.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,c=i.now();t.unstable_now=function(){return i.now()-c}}var u=[],f=[],v=1,S=null,k=3,R=!1,w=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(J){for(var ee=r(f);ee!==null;){if(ee.callback===null)n(f);else if(ee.startTime<=J)n(f),ee.sortIndex=ee.expirationTime,s(u,ee);else break;ee=r(f)}}function z(J){if(A=!1,j(J),!w)if(r(u)!==null)w=!0,E(P);else{var ee=r(f);ee!==null&&ie(z,ee.startTime-J)}}function P(J,ee){w=!1,A&&(A=!1,y(Q),Q=-1),R=!0;var re=k;try{for(j(ee),S=r(u);S!==null&&(!(S.expirationTime>ee)||J&&!Z());){var N=S.callback;if(typeof N=="function"){S.callback=null,k=S.priorityLevel;var x=N(S.expirationTime<=ee);ee=t.unstable_now(),typeof x=="function"?S.callback=x:S===r(u)&&n(u),j(ee)}else n(u);S=r(u)}if(S!==null)var _=!0;else{var q=r(f);q!==null&&ie(z,q.startTime-ee),_=!1}return _}finally{S=null,k=re,R=!1}}var W=!1,G=null,Q=-1,F=5,b=-1;function Z(){return!(t.unstable_now()-b<F)}function Se(){if(G!==null){var J=t.unstable_now();b=J;var ee=!0;try{ee=G(!0,J)}finally{ee?fe():(W=!1,G=null)}}else W=!1}var fe;if(typeof m=="function")fe=function(){m(Se)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=Se,fe=function(){$.postMessage(null)}}else fe=function(){C(Se,0)};function E(J){G=J,W||(W=!0,fe())}function ie(J,ee){Q=C(function(){J(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){w||R||(w=!0,E(P))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(J){switch(k){case 1:case 2:case 3:var ee=3;break;default:ee=k}var re=k;k=ee;try{return J()}finally{k=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var re=k;k=J;try{return ee()}finally{k=re}},t.unstable_scheduleCallback=function(J,ee,re){var N=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?N+re:N):re=N,J){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=re+x,J={id:v++,callback:ee,priorityLevel:J,startTime:re,expirationTime:x,sortIndex:-1},re>N?(J.sortIndex=re,s(f,J),r(u)===null&&J===r(f)&&(A?(y(Q),Q=-1):A=!0,ie(z,re-N))):(J.sortIndex=x,s(u,J),w||R||(w=!0,E(P))),J},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(J){var ee=k;return function(){var re=k;k=ee;try{return J.apply(this,arguments)}finally{k=re}}}})(Pp);Bp.exports=Pp;var Py=Bp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy=d,Kt=Py;function se(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Op=new Set,Fn={};function jr(t,s){Qr(t,s),Qr(t+"Capture",s)}function Qr(t,s){for(Fn[t]=s,t=0;t<s.length;t++)Op.add(s[t])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bi=Object.prototype.hasOwnProperty,_y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wu={},$u={};function My(t){return bi.call($u,t)?!0:bi.call(Wu,t)?!1:_y.test(t)?$u[t]=!0:(Wu[t]=!0,!1)}function Fy(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uy(t,s,r,n){if(s===null||typeof s>"u"||Fy(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function It(t,s,r,n,l,a,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=a,this.removeEmptyString=i}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];vt[s]=new It(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var wo=/[\-:]([a-z])/g;function To(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(wo,To);vt[s]=new It(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(wo,To);vt[s]=new It(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(wo,To);vt[s]=new It(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function zo(t,s,r,n){var l=vt.hasOwnProperty(s)?vt[s]:null;(l!==null?l.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Uy(s,r,l,n)&&(r=null),n||l===null?My(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):l.mustUseProperty?t[l.propertyName]=r===null?l.type===3?!1:"":r:(s=l.attributeName,n=l.attributeNamespace,r===null?t.removeAttribute(s):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var zs=Oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ml=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),Do=Symbol.for("react.strict_mode"),Si=Symbol.for("react.profiler"),_p=Symbol.for("react.provider"),Mp=Symbol.for("react.context"),Eo=Symbol.for("react.forward_ref"),ki=Symbol.for("react.suspense"),Ci=Symbol.for("react.suspense_list"),Io=Symbol.for("react.memo"),Ls=Symbol.for("react.lazy"),Fp=Symbol.for("react.offscreen"),qu=Symbol.iterator;function pn(t){return t===null||typeof t!="object"?null:(t=qu&&t[qu]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,Ua;function Cn(t){if(Ua===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ua=s&&s[1]||""}return`
`+Ua+t}var Ka=!1;function Wa(t,s){if(!t||Ka)return"";Ka=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(f){var n=f}Reflect.construct(t,[],s)}else{try{s.call()}catch(f){n=f}t.call(s.prototype)}else{try{throw Error()}catch(f){n=f}t()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var l=f.stack.split(`
`),a=n.stack.split(`
`),i=l.length-1,c=a.length-1;1<=i&&0<=c&&l[i]!==a[c];)c--;for(;1<=i&&0<=c;i--,c--)if(l[i]!==a[c]){if(i!==1||c!==1)do if(i--,c--,0>c||l[i]!==a[c]){var u=`
`+l[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=c);break}}}finally{Ka=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Cn(t):""}function Ky(t){switch(t.tag){case 5:return Cn(t.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 2:case 15:return t=Wa(t.type,!1),t;case 11:return t=Wa(t.type.render,!1),t;case 1:return t=Wa(t.type,!0),t;default:return""}}function wi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rr:return"Fragment";case Ar:return"Portal";case Si:return"Profiler";case Do:return"StrictMode";case ki:return"Suspense";case Ci:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mp:return(t.displayName||"Context")+".Consumer";case _p:return(t._context.displayName||"Context")+".Provider";case Eo:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Io:return s=t.displayName||null,s!==null?s:wi(t.type)||"Memo";case Ls:s=t._payload,t=t._init;try{return wi(t(s))}catch{}}return null}function Wy(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wi(s);case 8:return s===Do?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Up(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $y(t){var s=Up(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,a=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return l.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function pl(t){t._valueTracker||(t._valueTracker=$y(t))}function Kp(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=Up(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function Wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ti(t,s){var r=s.checked;return lt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Hu(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=Qs(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Wp(t,s){s=s.checked,s!=null&&zo(t,"checked",s,!1)}function zi(t,s){Wp(t,s);var r=Qs(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Di(t,s.type,r):s.hasOwnProperty("defaultValue")&&Di(t,s.type,Qs(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Vu(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Di(t,s,r){(s!=="number"||Wl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wn=Array.isArray;function $r(t,s,r,n){if(t=t.options,s){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=!0;for(r=0;r<t.length;r++)l=s.hasOwnProperty("$"+t[r].value),t[r].selected!==l&&(t[r].selected=l),l&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Qs(r),s=null,l=0;l<t.length;l++){if(t[l].value===r){t[l].selected=!0,n&&(t[l].defaultSelected=!0);return}s!==null||t[l].disabled||(s=t[l])}s!==null&&(s.selected=!0)}}function Ei(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(se(91));return lt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yu(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(se(92));if(wn(r)){if(1<r.length)throw Error(se(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Qs(r)}}function $p(t,s){var r=Qs(s.value),n=Qs(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Gu(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function qp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ii(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?qp(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,Hp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,l){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,l)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Un(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qy=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(t){qy.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),In[s]=In[t]})});function Vp(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||In.hasOwnProperty(t)&&In[t]?(""+s).trim():s+"px"}function Yp(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,l=Vp(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,l):t[r]=l}}var Hy=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ai(t,s){if(s){if(Hy[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(se(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(se(61))}if(s.style!=null&&typeof s.style!="object")throw Error(se(62))}}function Ri(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Li=null;function Ao(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bi=null,qr=null,Hr=null;function Qu(t){if(t=ol(t)){if(typeof Bi!="function")throw Error(se(280));var s=t.stateNode;s&&(s=ja(s),Bi(t.stateNode,t.type,s))}}function Gp(t){qr?Hr?Hr.push(t):Hr=[t]:qr=t}function Qp(){if(qr){var t=qr,s=Hr;if(Hr=qr=null,Qu(t),s)for(t=0;t<s.length;t++)Qu(s[t])}}function Jp(t,s){return t(s)}function Xp(){}var $a=!1;function Zp(t,s,r){if($a)return t(s,r);$a=!0;try{return Jp(t,s,r)}finally{$a=!1,(qr!==null||Hr!==null)&&(Xp(),Qp())}}function Kn(t,s){var r=t.stateNode;if(r===null)return null;var n=ja(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(se(231,s,typeof r));return r}var Pi=!1;if(ks)try{var hn={};Object.defineProperty(hn,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",hn,hn),window.removeEventListener("test",hn,hn)}catch{Pi=!1}function Vy(t,s,r,n,l,a,i,c,u){var f=Array.prototype.slice.call(arguments,3);try{s.apply(r,f)}catch(v){this.onError(v)}}var An=!1,$l=null,ql=!1,Oi=null,Yy={onError:function(t){An=!0,$l=t}};function Gy(t,s,r,n,l,a,i,c,u){An=!1,$l=null,Vy.apply(Yy,arguments)}function Qy(t,s,r,n,l,a,i,c,u){if(Gy.apply(this,arguments),An){if(An){var f=$l;An=!1,$l=null}else throw Error(se(198));ql||(ql=!0,Oi=f)}}function Nr(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function eh(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ju(t){if(Nr(t)!==t)throw Error(se(188))}function Jy(t){var s=t.alternate;if(!s){if(s=Nr(t),s===null)throw Error(se(188));return s!==t?null:t}for(var r=t,n=s;;){var l=r.return;if(l===null)break;var a=l.alternate;if(a===null){if(n=l.return,n!==null){r=n;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===r)return Ju(l),t;if(a===n)return Ju(l),s;a=a.sibling}throw Error(se(188))}if(r.return!==n.return)r=l,n=a;else{for(var i=!1,c=l.child;c;){if(c===r){i=!0,r=l,n=a;break}if(c===n){i=!0,n=l,r=a;break}c=c.sibling}if(!i){for(c=a.child;c;){if(c===r){i=!0,r=a,n=l;break}if(c===n){i=!0,n=a,r=l;break}c=c.sibling}if(!i)throw Error(se(189))}}if(r.alternate!==n)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?t:s}function th(t){return t=Jy(t),t!==null?sh(t):null}function sh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=sh(t);if(s!==null)return s;t=t.sibling}return null}var rh=Kt.unstable_scheduleCallback,Xu=Kt.unstable_cancelCallback,Xy=Kt.unstable_shouldYield,Zy=Kt.unstable_requestPaint,ot=Kt.unstable_now,ex=Kt.unstable_getCurrentPriorityLevel,Ro=Kt.unstable_ImmediatePriority,nh=Kt.unstable_UserBlockingPriority,Hl=Kt.unstable_NormalPriority,tx=Kt.unstable_LowPriority,lh=Kt.unstable_IdlePriority,ya=null,fs=null;function sx(t){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(ya,t,void 0,(t.current.flags&128)===128)}catch{}}var ns=Math.clz32?Math.clz32:lx,rx=Math.log,nx=Math.LN2;function lx(t){return t>>>=0,t===0?32:31-(rx(t)/nx|0)|0}var fl=64,yl=4194304;function Tn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vl(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,l=t.suspendedLanes,a=t.pingedLanes,i=r&268435455;if(i!==0){var c=i&~l;c!==0?n=Tn(c):(a&=i,a!==0&&(n=Tn(a)))}else i=r&~l,i!==0?n=Tn(i):a!==0&&(n=Tn(a));if(n===0)return 0;if(s!==0&&s!==n&&!(s&l)&&(l=n&-n,a=s&-s,l>=a||l===16&&(a&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-ns(s),l=1<<r,n|=t[r],s&=~l;return n}function ax(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ix(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,l=t.expirationTimes,a=t.pendingLanes;0<a;){var i=31-ns(a),c=1<<i,u=l[i];u===-1?(!(c&r)||c&n)&&(l[i]=ax(c,s)):u<=s&&(t.expiredLanes|=c),a&=~c}}function _i(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ah(){var t=fl;return fl<<=1,!(fl&4194240)&&(fl=64),t}function qa(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function al(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ns(s),t[s]=r}function ox(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var l=31-ns(r),a=1<<l;s[l]=0,n[l]=-1,t[l]=-1,r&=~a}}function Lo(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-ns(r),l=1<<n;l&s|t[n]&s&&(t[n]|=s),r&=~l}}var We=0;function ih(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oh,Bo,ch,dh,uh,Mi=!1,xl=[],Us=null,Ks=null,Ws=null,Wn=new Map,$n=new Map,Ps=[],cx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(t,s){switch(t){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Wn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(s.pointerId)}}function fn(t,s,r,n,l,a){return t===null||t.nativeEvent!==a?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[l]},s!==null&&(s=ol(s),s!==null&&Bo(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),t)}function dx(t,s,r,n,l){switch(s){case"focusin":return Us=fn(Us,t,s,r,n,l),!0;case"dragenter":return Ks=fn(Ks,t,s,r,n,l),!0;case"mouseover":return Ws=fn(Ws,t,s,r,n,l),!0;case"pointerover":var a=l.pointerId;return Wn.set(a,fn(Wn.get(a)||null,t,s,r,n,l)),!0;case"gotpointercapture":return a=l.pointerId,$n.set(a,fn($n.get(a)||null,t,s,r,n,l)),!0}return!1}function mh(t){var s=cr(t.target);if(s!==null){var r=Nr(s);if(r!==null){if(s=r.tag,s===13){if(s=eh(r),s!==null){t.blockedOn=s,uh(t.priority,function(){ch(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Fi(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Li=n,r.target.dispatchEvent(n),Li=null}else return s=ol(r),s!==null&&Bo(s),t.blockedOn=r,!1;s.shift()}return!0}function em(t,s,r){Rl(t)&&r.delete(s)}function ux(){Mi=!1,Us!==null&&Rl(Us)&&(Us=null),Ks!==null&&Rl(Ks)&&(Ks=null),Ws!==null&&Rl(Ws)&&(Ws=null),Wn.forEach(em),$n.forEach(em)}function yn(t,s){t.blockedOn===s&&(t.blockedOn=null,Mi||(Mi=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,ux)))}function qn(t){function s(l){return yn(l,t)}if(0<xl.length){yn(xl[0],t);for(var r=1;r<xl.length;r++){var n=xl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Us!==null&&yn(Us,t),Ks!==null&&yn(Ks,t),Ws!==null&&yn(Ws,t),Wn.forEach(s),$n.forEach(s),r=0;r<Ps.length;r++)n=Ps[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ps.length&&(r=Ps[0],r.blockedOn===null);)mh(r),r.blockedOn===null&&Ps.shift()}var Vr=zs.ReactCurrentBatchConfig,Yl=!0;function mx(t,s,r,n){var l=We,a=Vr.transition;Vr.transition=null;try{We=1,Po(t,s,r,n)}finally{We=l,Vr.transition=a}}function px(t,s,r,n){var l=We,a=Vr.transition;Vr.transition=null;try{We=4,Po(t,s,r,n)}finally{We=l,Vr.transition=a}}function Po(t,s,r,n){if(Yl){var l=Fi(t,s,r,n);if(l===null)ti(t,s,n,Gl,r),Zu(t,n);else if(dx(l,t,s,r,n))n.stopPropagation();else if(Zu(t,n),s&4&&-1<cx.indexOf(t)){for(;l!==null;){var a=ol(l);if(a!==null&&oh(a),a=Fi(t,s,r,n),a===null&&ti(t,s,n,Gl,r),a===l)break;l=a}l!==null&&n.stopPropagation()}else ti(t,s,n,null,r)}}var Gl=null;function Fi(t,s,r,n){if(Gl=null,t=Ao(n),t=cr(t),t!==null)if(s=Nr(t),s===null)t=null;else if(r=s.tag,r===13){if(t=eh(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Gl=t,null}function ph(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ex()){case Ro:return 1;case nh:return 4;case Hl:case tx:return 16;case lh:return 536870912;default:return 16}default:return 16}}var _s=null,Oo=null,Ll=null;function hh(){if(Ll)return Ll;var t,s=Oo,r=s.length,n,l="value"in _s?_s.value:_s.textContent,a=l.length;for(t=0;t<r&&s[t]===l[t];t++);var i=r-t;for(n=1;n<=i&&s[r-n]===l[a-n];n++);return Ll=l.slice(t,1<n?1-n:void 0)}function Bl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function tm(){return!1}function $t(t){function s(r,n,l,a,i){this._reactName=r,this._targetInst=l,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?gl:tm,this.isPropagationStopped=tm,this}return lt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),s}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=$t(nn),il=lt({},nn,{view:0,detail:0}),hx=$t(il),Ha,Va,xn,xa=lt({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xn&&(xn&&t.type==="mousemove"?(Ha=t.screenX-xn.screenX,Va=t.screenY-xn.screenY):Va=Ha=0,xn=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:Va}}),sm=$t(xa),fx=lt({},xa,{dataTransfer:0}),yx=$t(fx),xx=lt({},il,{relatedTarget:0}),Ya=$t(xx),gx=lt({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),vx=$t(gx),jx=lt({},nn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nx=$t(jx),bx=lt({},nn,{data:0}),rm=$t(bx),Sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wx(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Cx[t])?!!s[t]:!1}function Mo(){return wx}var Tx=lt({},il,{key:function(t){if(t.key){var s=Sx[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(t){return t.type==="keypress"?Bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zx=$t(Tx),Dx=lt({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nm=$t(Dx),Ex=lt({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),Ix=$t(Ex),Ax=lt({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rx=$t(Ax),Lx=lt({},xa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bx=$t(Lx),Px=[9,13,27,32],Fo=ks&&"CompositionEvent"in window,Rn=null;ks&&"documentMode"in document&&(Rn=document.documentMode);var Ox=ks&&"TextEvent"in window&&!Rn,fh=ks&&(!Fo||Rn&&8<Rn&&11>=Rn),lm=" ",am=!1;function yh(t,s){switch(t){case"keyup":return Px.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function _x(t,s){switch(t){case"compositionend":return xh(s);case"keypress":return s.which!==32?null:(am=!0,lm);case"textInput":return t=s.data,t===lm&&am?null:t;default:return null}}function Mx(t,s){if(Lr)return t==="compositionend"||!Fo&&yh(t,s)?(t=hh(),Ll=Oo=_s=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fh&&s.locale!=="ko"?null:s.data;default:return null}}var Fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function im(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Fx[t.type]:s==="textarea"}function gh(t,s,r,n){Gp(n),s=Ql(s,"onChange"),0<s.length&&(r=new _o("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var Ln=null,Hn=null;function Ux(t){Dh(t,0)}function ga(t){var s=Or(t);if(Kp(s))return t}function Kx(t,s){if(t==="change")return s}var vh=!1;if(ks){var Ga;if(ks){var Qa="oninput"in document;if(!Qa){var om=document.createElement("div");om.setAttribute("oninput","return;"),Qa=typeof om.oninput=="function"}Ga=Qa}else Ga=!1;vh=Ga&&(!document.documentMode||9<document.documentMode)}function cm(){Ln&&(Ln.detachEvent("onpropertychange",jh),Hn=Ln=null)}function jh(t){if(t.propertyName==="value"&&ga(Hn)){var s=[];gh(s,Hn,t,Ao(t)),Zp(Ux,s)}}function Wx(t,s,r){t==="focusin"?(cm(),Ln=s,Hn=r,Ln.attachEvent("onpropertychange",jh)):t==="focusout"&&cm()}function $x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ga(Hn)}function qx(t,s){if(t==="click")return ga(s)}function Hx(t,s){if(t==="input"||t==="change")return ga(s)}function Vx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var as=typeof Object.is=="function"?Object.is:Vx;function Vn(t,s){if(as(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var l=r[n];if(!bi.call(s,l)||!as(t[l],s[l]))return!1}return!0}function dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function um(t,s){var r=dm(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dm(r)}}function Nh(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Nh(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function bh(){for(var t=window,s=Wl();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Wl(t.document)}return s}function Uo(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Yx(t){var s=bh(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Nh(r.ownerDocument.documentElement,r)){if(n!==null&&Uo(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var l=r.textContent.length,a=Math.min(n.start,l);n=n.end===void 0?a:Math.min(n.end,l),!t.extend&&a>n&&(l=n,n=a,a=l),l=um(r,a);var i=um(r,n);l&&i&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),t.removeAllRanges(),a>n?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gx=ks&&"documentMode"in document&&11>=document.documentMode,Br=null,Ui=null,Bn=null,Ki=!1;function mm(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ki||Br==null||Br!==Wl(n)||(n=Br,"selectionStart"in n&&Uo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bn&&Vn(Bn,n)||(Bn=n,n=Ql(Ui,"onSelect"),0<n.length&&(s=new _o("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=Br)))}function vl(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Pr={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},Ja={},Sh={};ks&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function va(t){if(Ja[t])return Ja[t];if(!Pr[t])return t;var s=Pr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Sh)return Ja[t]=s[r];return t}var kh=va("animationend"),Ch=va("animationiteration"),wh=va("animationstart"),Th=va("transitionend"),zh=new Map,pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,s){zh.set(t,s),jr(s,[t])}for(var Xa=0;Xa<pm.length;Xa++){var Za=pm[Xa],Qx=Za.toLowerCase(),Jx=Za[0].toUpperCase()+Za.slice(1);Xs(Qx,"on"+Jx)}Xs(kh,"onAnimationEnd");Xs(Ch,"onAnimationIteration");Xs(wh,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(Th,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xx=new Set("cancel close invalid load scroll toggle".split(" ").concat(zn));function hm(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,Qy(n,s,void 0,t),t.currentTarget=null}function Dh(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],l=n.event;n=n.listeners;e:{var a=void 0;if(s)for(var i=n.length-1;0<=i;i--){var c=n[i],u=c.instance,f=c.currentTarget;if(c=c.listener,u!==a&&l.isPropagationStopped())break e;hm(l,c,f),a=u}else for(i=0;i<n.length;i++){if(c=n[i],u=c.instance,f=c.currentTarget,c=c.listener,u!==a&&l.isPropagationStopped())break e;hm(l,c,f),a=u}}}if(ql)throw t=Oi,ql=!1,Oi=null,t}function Je(t,s){var r=s[Vi];r===void 0&&(r=s[Vi]=new Set);var n=t+"__bubble";r.has(n)||(Eh(s,t,2,!1),r.add(n))}function ei(t,s,r){var n=0;s&&(n|=4),Eh(r,t,n,s)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Yn(t){if(!t[jl]){t[jl]=!0,Op.forEach(function(r){r!=="selectionchange"&&(Xx.has(r)||ei(r,!1,t),ei(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[jl]||(s[jl]=!0,ei("selectionchange",!1,s))}}function Eh(t,s,r,n){switch(ph(s)){case 1:var l=mx;break;case 4:l=px;break;default:l=Po}r=l.bind(null,s,r,t),l=void 0,!Pi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),n?l!==void 0?t.addEventListener(s,r,{capture:!0,passive:l}):t.addEventListener(s,r,!0):l!==void 0?t.addEventListener(s,r,{passive:l}):t.addEventListener(s,r,!1)}function ti(t,s,r,n,l){var a=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var c=n.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(i===4)for(i=n.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;i=i.return}for(;c!==null;){if(i=cr(c),i===null)return;if(u=i.tag,u===5||u===6){n=a=i;continue e}c=c.parentNode}}n=n.return}Zp(function(){var f=a,v=Ao(r),S=[];e:{var k=zh.get(t);if(k!==void 0){var R=_o,w=t;switch(t){case"keypress":if(Bl(r)===0)break e;case"keydown":case"keyup":R=zx;break;case"focusin":w="focus",R=Ya;break;case"focusout":w="blur",R=Ya;break;case"beforeblur":case"afterblur":R=Ya;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Ix;break;case kh:case Ch:case wh:R=vx;break;case Th:R=Rx;break;case"scroll":R=hx;break;case"wheel":R=Bx;break;case"copy":case"cut":case"paste":R=Nx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=nm}var A=(s&4)!==0,C=!A&&t==="scroll",y=A?k!==null?k+"Capture":null:k;A=[];for(var m=f,j;m!==null;){j=m;var z=j.stateNode;if(j.tag===5&&z!==null&&(j=z,y!==null&&(z=Kn(m,y),z!=null&&A.push(Gn(m,z,j)))),C)break;m=m.return}0<A.length&&(k=new R(k,w,null,r,v),S.push({event:k,listeners:A}))}}if(!(s&7)){e:{if(k=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",k&&r!==Li&&(w=r.relatedTarget||r.fromElement)&&(cr(w)||w[Cs]))break e;if((R||k)&&(k=v.window===v?v:(k=v.ownerDocument)?k.defaultView||k.parentWindow:window,R?(w=r.relatedTarget||r.toElement,R=f,w=w?cr(w):null,w!==null&&(C=Nr(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(R=null,w=f),R!==w)){if(A=sm,z="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(A=nm,z="onPointerLeave",y="onPointerEnter",m="pointer"),C=R==null?k:Or(R),j=w==null?k:Or(w),k=new A(z,m+"leave",R,r,v),k.target=C,k.relatedTarget=j,z=null,cr(v)===f&&(A=new A(y,m+"enter",w,r,v),A.target=j,A.relatedTarget=C,z=A),C=z,R&&w)t:{for(A=R,y=w,m=0,j=A;j;j=Dr(j))m++;for(j=0,z=y;z;z=Dr(z))j++;for(;0<m-j;)A=Dr(A),m--;for(;0<j-m;)y=Dr(y),j--;for(;m--;){if(A===y||y!==null&&A===y.alternate)break t;A=Dr(A),y=Dr(y)}A=null}else A=null;R!==null&&fm(S,k,R,A,!1),w!==null&&C!==null&&fm(S,C,w,A,!0)}}e:{if(k=f?Or(f):window,R=k.nodeName&&k.nodeName.toLowerCase(),R==="select"||R==="input"&&k.type==="file")var P=Kx;else if(im(k))if(vh)P=Hx;else{P=$x;var W=Wx}else(R=k.nodeName)&&R.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(P=qx);if(P&&(P=P(t,f))){gh(S,P,r,v);break e}W&&W(t,k,f),t==="focusout"&&(W=k._wrapperState)&&W.controlled&&k.type==="number"&&Di(k,"number",k.value)}switch(W=f?Or(f):window,t){case"focusin":(im(W)||W.contentEditable==="true")&&(Br=W,Ui=f,Bn=null);break;case"focusout":Bn=Ui=Br=null;break;case"mousedown":Ki=!0;break;case"contextmenu":case"mouseup":case"dragend":Ki=!1,mm(S,r,v);break;case"selectionchange":if(Gx)break;case"keydown":case"keyup":mm(S,r,v)}var G;if(Fo)e:{switch(t){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Lr?yh(t,r)&&(Q="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Q="onCompositionStart");Q&&(fh&&r.locale!=="ko"&&(Lr||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Lr&&(G=hh()):(_s=v,Oo="value"in _s?_s.value:_s.textContent,Lr=!0)),W=Ql(f,Q),0<W.length&&(Q=new rm(Q,t,null,r,v),S.push({event:Q,listeners:W}),G?Q.data=G:(G=xh(r),G!==null&&(Q.data=G)))),(G=Ox?_x(t,r):Mx(t,r))&&(f=Ql(f,"onBeforeInput"),0<f.length&&(v=new rm("onBeforeInput","beforeinput",null,r,v),S.push({event:v,listeners:f}),v.data=G))}Dh(S,s)})}function Gn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Ql(t,s){for(var r=s+"Capture",n=[];t!==null;){var l=t,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Kn(t,r),a!=null&&n.unshift(Gn(t,a,l)),a=Kn(t,s),a!=null&&n.push(Gn(t,a,l))),t=t.return}return n}function Dr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fm(t,s,r,n,l){for(var a=s._reactName,i=[];r!==null&&r!==n;){var c=r,u=c.alternate,f=c.stateNode;if(u!==null&&u===n)break;c.tag===5&&f!==null&&(c=f,l?(u=Kn(r,a),u!=null&&i.unshift(Gn(r,u,c))):l||(u=Kn(r,a),u!=null&&i.push(Gn(r,u,c)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var Zx=/\r\n?/g,eg=/\u0000|\uFFFD/g;function ym(t){return(typeof t=="string"?t:""+t).replace(Zx,`
`).replace(eg,"")}function Nl(t,s,r){if(s=ym(s),ym(t)!==s&&r)throw Error(se(425))}function Jl(){}var Wi=null,$i=null;function qi(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hi=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,sg=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(t){return xm.resolve(null).then(t).catch(rg)}:Hi;function rg(t){setTimeout(function(){throw t})}function si(t,s){var r=s,n=0;do{var l=r.nextSibling;if(t.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(n===0){t.removeChild(l),qn(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=l}while(r);qn(s)}function $s(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function gm(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var ln=Math.random().toString(36).slice(2),hs="__reactFiber$"+ln,Qn="__reactProps$"+ln,Cs="__reactContainer$"+ln,Vi="__reactEvents$"+ln,ng="__reactListeners$"+ln,lg="__reactHandles$"+ln;function cr(t){var s=t[hs];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Cs]||r[hs]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=gm(t);t!==null;){if(r=t[hs])return r;t=gm(t)}return s}t=r,r=t.parentNode}return null}function ol(t){return t=t[hs]||t[Cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Or(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function ja(t){return t[Qn]||null}var Yi=[],_r=-1;function Zs(t){return{current:t}}function Xe(t){0>_r||(t.current=Yi[_r],Yi[_r]=null,_r--)}function Ye(t,s){_r++,Yi[_r]=t.current,t.current=s}var Js={},Ct=Zs(Js),Lt=Zs(!1),fr=Js;function Jr(t,s){var r=t.type.contextTypes;if(!r)return Js;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in r)l[a]=s[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),l}function Bt(t){return t=t.childContextTypes,t!=null}function Xl(){Xe(Lt),Xe(Ct)}function vm(t,s,r){if(Ct.current!==Js)throw Error(se(168));Ye(Ct,s),Ye(Lt,r)}function Ih(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var l in n)if(!(l in s))throw Error(se(108,Wy(t)||"Unknown",l));return lt({},r,n)}function Zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Js,fr=Ct.current,Ye(Ct,t),Ye(Lt,Lt.current),!0}function jm(t,s,r){var n=t.stateNode;if(!n)throw Error(se(169));r?(t=Ih(t,s,fr),n.__reactInternalMemoizedMergedChildContext=t,Xe(Lt),Xe(Ct),Ye(Ct,t)):Xe(Lt),Ye(Lt,r)}var js=null,Na=!1,ri=!1;function Ah(t){js===null?js=[t]:js.push(t)}function ag(t){Na=!0,Ah(t)}function er(){if(!ri&&js!==null){ri=!0;var t=0,s=We;try{var r=js;for(We=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}js=null,Na=!1}catch(l){throw js!==null&&(js=js.slice(t+1)),rh(Ro,er),l}finally{We=s,ri=!1}}return null}var Mr=[],Fr=0,ea=null,ta=0,Ht=[],Vt=0,yr=null,Ns=1,bs="";function ir(t,s){Mr[Fr++]=ta,Mr[Fr++]=ea,ea=t,ta=s}function Rh(t,s,r){Ht[Vt++]=Ns,Ht[Vt++]=bs,Ht[Vt++]=yr,yr=t;var n=Ns;t=bs;var l=32-ns(n)-1;n&=~(1<<l),r+=1;var a=32-ns(s)+l;if(30<a){var i=l-l%5;a=(n&(1<<i)-1).toString(32),n>>=i,l-=i,Ns=1<<32-ns(s)+l|r<<l|n,bs=a+t}else Ns=1<<a|r<<l|n,bs=t}function Ko(t){t.return!==null&&(ir(t,1),Rh(t,1,0))}function Wo(t){for(;t===ea;)ea=Mr[--Fr],Mr[Fr]=null,ta=Mr[--Fr],Mr[Fr]=null;for(;t===yr;)yr=Ht[--Vt],Ht[Vt]=null,bs=Ht[--Vt],Ht[Vt]=null,Ns=Ht[--Vt],Ht[Vt]=null}var Ut=null,Ft=null,st=!1,ss=null;function Lh(t,s){var r=Yt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Nm(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ut=t,Ft=$s(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ut=t,Ft=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=yr!==null?{id:Ns,overflow:bs}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Yt(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Ut=t,Ft=null,!0):!1;default:return!1}}function Gi(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qi(t){if(st){var s=Ft;if(s){var r=s;if(!Nm(t,s)){if(Gi(t))throw Error(se(418));s=$s(r.nextSibling);var n=Ut;s&&Nm(t,s)?Lh(n,r):(t.flags=t.flags&-4097|2,st=!1,Ut=t)}}else{if(Gi(t))throw Error(se(418));t.flags=t.flags&-4097|2,st=!1,Ut=t}}}function bm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function bl(t){if(t!==Ut)return!1;if(!st)return bm(t),st=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!qi(t.type,t.memoizedProps)),s&&(s=Ft)){if(Gi(t))throw Bh(),Error(se(418));for(;s;)Lh(t,s),s=$s(s.nextSibling)}if(bm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Ft=$s(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Ft=null}}else Ft=Ut?$s(t.stateNode.nextSibling):null;return!0}function Bh(){for(var t=Ft;t;)t=$s(t.nextSibling)}function Xr(){Ft=Ut=null,st=!1}function $o(t){ss===null?ss=[t]:ss.push(t)}var ig=zs.ReactCurrentBatchConfig;function gn(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var n=r.stateNode}if(!n)throw Error(se(147,t));var l=n,a=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===a?s.ref:(s=function(i){var c=l.refs;i===null?delete c[a]:c[a]=i},s._stringRef=a,s)}if(typeof t!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,t))}return t}function Sl(t,s){throw t=Object.prototype.toString.call(s),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Sm(t){var s=t._init;return s(t._payload)}function Ph(t){function s(y,m){if(t){var j=y.deletions;j===null?(y.deletions=[m],y.flags|=16):j.push(m)}}function r(y,m){if(!t)return null;for(;m!==null;)s(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function l(y,m){return y=Ys(y,m),y.index=0,y.sibling=null,y}function a(y,m,j){return y.index=j,t?(j=y.alternate,j!==null?(j=j.index,j<m?(y.flags|=2,m):j):(y.flags|=2,m)):(y.flags|=1048576,m)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,m,j,z){return m===null||m.tag!==6?(m=di(j,y.mode,z),m.return=y,m):(m=l(m,j),m.return=y,m)}function u(y,m,j,z){var P=j.type;return P===Rr?v(y,m,j.props.children,z,j.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ls&&Sm(P)===m.type)?(z=l(m,j.props),z.ref=gn(y,m,j),z.return=y,z):(z=Kl(j.type,j.key,j.props,null,y.mode,z),z.ref=gn(y,m,j),z.return=y,z)}function f(y,m,j,z){return m===null||m.tag!==4||m.stateNode.containerInfo!==j.containerInfo||m.stateNode.implementation!==j.implementation?(m=ui(j,y.mode,z),m.return=y,m):(m=l(m,j.children||[]),m.return=y,m)}function v(y,m,j,z,P){return m===null||m.tag!==7?(m=pr(j,y.mode,z,P),m.return=y,m):(m=l(m,j),m.return=y,m)}function S(y,m,j){if(typeof m=="string"&&m!==""||typeof m=="number")return m=di(""+m,y.mode,j),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ml:return j=Kl(m.type,m.key,m.props,null,y.mode,j),j.ref=gn(y,null,m),j.return=y,j;case Ar:return m=ui(m,y.mode,j),m.return=y,m;case Ls:var z=m._init;return S(y,z(m._payload),j)}if(wn(m)||pn(m))return m=pr(m,y.mode,j,null),m.return=y,m;Sl(y,m)}return null}function k(y,m,j,z){var P=m!==null?m.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return P!==null?null:c(y,m,""+j,z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ml:return j.key===P?u(y,m,j,z):null;case Ar:return j.key===P?f(y,m,j,z):null;case Ls:return P=j._init,k(y,m,P(j._payload),z)}if(wn(j)||pn(j))return P!==null?null:v(y,m,j,z,null);Sl(y,j)}return null}function R(y,m,j,z,P){if(typeof z=="string"&&z!==""||typeof z=="number")return y=y.get(j)||null,c(m,y,""+z,P);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ml:return y=y.get(z.key===null?j:z.key)||null,u(m,y,z,P);case Ar:return y=y.get(z.key===null?j:z.key)||null,f(m,y,z,P);case Ls:var W=z._init;return R(y,m,j,W(z._payload),P)}if(wn(z)||pn(z))return y=y.get(j)||null,v(m,y,z,P,null);Sl(m,z)}return null}function w(y,m,j,z){for(var P=null,W=null,G=m,Q=m=0,F=null;G!==null&&Q<j.length;Q++){G.index>Q?(F=G,G=null):F=G.sibling;var b=k(y,G,j[Q],z);if(b===null){G===null&&(G=F);break}t&&G&&b.alternate===null&&s(y,G),m=a(b,m,Q),W===null?P=b:W.sibling=b,W=b,G=F}if(Q===j.length)return r(y,G),st&&ir(y,Q),P;if(G===null){for(;Q<j.length;Q++)G=S(y,j[Q],z),G!==null&&(m=a(G,m,Q),W===null?P=G:W.sibling=G,W=G);return st&&ir(y,Q),P}for(G=n(y,G);Q<j.length;Q++)F=R(G,y,Q,j[Q],z),F!==null&&(t&&F.alternate!==null&&G.delete(F.key===null?Q:F.key),m=a(F,m,Q),W===null?P=F:W.sibling=F,W=F);return t&&G.forEach(function(Z){return s(y,Z)}),st&&ir(y,Q),P}function A(y,m,j,z){var P=pn(j);if(typeof P!="function")throw Error(se(150));if(j=P.call(j),j==null)throw Error(se(151));for(var W=P=null,G=m,Q=m=0,F=null,b=j.next();G!==null&&!b.done;Q++,b=j.next()){G.index>Q?(F=G,G=null):F=G.sibling;var Z=k(y,G,b.value,z);if(Z===null){G===null&&(G=F);break}t&&G&&Z.alternate===null&&s(y,G),m=a(Z,m,Q),W===null?P=Z:W.sibling=Z,W=Z,G=F}if(b.done)return r(y,G),st&&ir(y,Q),P;if(G===null){for(;!b.done;Q++,b=j.next())b=S(y,b.value,z),b!==null&&(m=a(b,m,Q),W===null?P=b:W.sibling=b,W=b);return st&&ir(y,Q),P}for(G=n(y,G);!b.done;Q++,b=j.next())b=R(G,y,Q,b.value,z),b!==null&&(t&&b.alternate!==null&&G.delete(b.key===null?Q:b.key),m=a(b,m,Q),W===null?P=b:W.sibling=b,W=b);return t&&G.forEach(function(Se){return s(y,Se)}),st&&ir(y,Q),P}function C(y,m,j,z){if(typeof j=="object"&&j!==null&&j.type===Rr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ml:e:{for(var P=j.key,W=m;W!==null;){if(W.key===P){if(P=j.type,P===Rr){if(W.tag===7){r(y,W.sibling),m=l(W,j.props.children),m.return=y,y=m;break e}}else if(W.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ls&&Sm(P)===W.type){r(y,W.sibling),m=l(W,j.props),m.ref=gn(y,W,j),m.return=y,y=m;break e}r(y,W);break}else s(y,W);W=W.sibling}j.type===Rr?(m=pr(j.props.children,y.mode,z,j.key),m.return=y,y=m):(z=Kl(j.type,j.key,j.props,null,y.mode,z),z.ref=gn(y,m,j),z.return=y,y=z)}return i(y);case Ar:e:{for(W=j.key;m!==null;){if(m.key===W)if(m.tag===4&&m.stateNode.containerInfo===j.containerInfo&&m.stateNode.implementation===j.implementation){r(y,m.sibling),m=l(m,j.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else s(y,m);m=m.sibling}m=ui(j,y.mode,z),m.return=y,y=m}return i(y);case Ls:return W=j._init,C(y,m,W(j._payload),z)}if(wn(j))return w(y,m,j,z);if(pn(j))return A(y,m,j,z);Sl(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,m!==null&&m.tag===6?(r(y,m.sibling),m=l(m,j),m.return=y,y=m):(r(y,m),m=di(j,y.mode,z),m.return=y,y=m),i(y)):r(y,m)}return C}var Zr=Ph(!0),Oh=Ph(!1),sa=Zs(null),ra=null,Ur=null,qo=null;function Ho(){qo=Ur=ra=null}function Vo(t){var s=sa.current;Xe(sa),t._currentValue=s}function Ji(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function Yr(t,s){ra=t,qo=Ur=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Rt=!0),t.firstContext=null)}function Jt(t){var s=t._currentValue;if(qo!==t)if(t={context:t,memoizedValue:s,next:null},Ur===null){if(ra===null)throw Error(se(308));Ur=t,ra.dependencies={lanes:0,firstContext:t}}else Ur=Ur.next=t;return s}var dr=null;function Yo(t){dr===null?dr=[t]:dr.push(t)}function _h(t,s,r,n){var l=s.interleaved;return l===null?(r.next=r,Yo(s)):(r.next=l.next,l.next=r),s.interleaved=r,ws(t,n)}function ws(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Bs=!1;function Go(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function qs(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Re&2){var l=n.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s,ws(t,r)}return l=n.interleaved,l===null?(s.next=s,Yo(n)):(s.next=l.next,l.next=s),n.interleaved=s,ws(t,r)}function Pl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,Lo(t,r)}}function km(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var l=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?l=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?l=a=s:a=a.next=s}else l=a=s;r={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function na(t,s,r,n){var l=t.updateQueue;Bs=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var u=c,f=u.next;u.next=null,i===null?a=f:i.next=f,i=u;var v=t.alternate;v!==null&&(v=v.updateQueue,c=v.lastBaseUpdate,c!==i&&(c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=u))}if(a!==null){var S=l.baseState;i=0,v=f=u=null,c=a;do{var k=c.lane,R=c.eventTime;if((n&k)===k){v!==null&&(v=v.next={eventTime:R,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,A=c;switch(k=s,R=r,A.tag){case 1:if(w=A.payload,typeof w=="function"){S=w.call(R,S,k);break e}S=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=A.payload,k=typeof w=="function"?w.call(R,S,k):w,k==null)break e;S=lt({},S,k);break e;case 2:Bs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,k=l.effects,k===null?l.effects=[c]:k.push(c))}else R={eventTime:R,lane:k,tag:c.tag,payload:c.payload,callback:c.callback,next:null},v===null?(f=v=R,u=S):v=v.next=R,i|=k;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;k=c,c=k.next,k.next=null,l.lastBaseUpdate=k,l.shared.pending=null}}while(!0);if(v===null&&(u=S),l.baseState=u,l.firstBaseUpdate=f,l.lastBaseUpdate=v,s=l.shared.interleaved,s!==null){l=s;do i|=l.lane,l=l.next;while(l!==s)}else a===null&&(l.shared.lanes=0);gr|=i,t.lanes=i,t.memoizedState=S}}function Cm(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],l=n.callback;if(l!==null){if(n.callback=null,n=r,typeof l!="function")throw Error(se(191,l));l.call(n)}}}var cl={},ys=Zs(cl),Jn=Zs(cl),Xn=Zs(cl);function ur(t){if(t===cl)throw Error(se(174));return t}function Qo(t,s){switch(Ye(Xn,s),Ye(Jn,t),Ye(ys,cl),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ii(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ii(s,t)}Xe(ys),Ye(ys,s)}function en(){Xe(ys),Xe(Jn),Xe(Xn)}function Fh(t){ur(Xn.current);var s=ur(ys.current),r=Ii(s,t.type);s!==r&&(Ye(Jn,t),Ye(ys,r))}function Jo(t){Jn.current===t&&(Xe(ys),Xe(Jn))}var rt=Zs(0);function la(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ni=[];function Xo(){for(var t=0;t<ni.length;t++)ni[t]._workInProgressVersionPrimary=null;ni.length=0}var Ol=zs.ReactCurrentDispatcher,li=zs.ReactCurrentBatchConfig,xr=0,nt=null,mt=null,ht=null,aa=!1,Pn=!1,Zn=0,og=0;function Nt(){throw Error(se(321))}function Zo(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!as(t[r],s[r]))return!1;return!0}function ec(t,s,r,n,l,a){if(xr=a,nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ol.current=t===null||t.memoizedState===null?mg:pg,t=r(n,l),Pn){a=0;do{if(Pn=!1,Zn=0,25<=a)throw Error(se(301));a+=1,ht=mt=null,s.updateQueue=null,Ol.current=hg,t=r(n,l)}while(Pn)}if(Ol.current=ia,s=mt!==null&&mt.next!==null,xr=0,ht=mt=nt=null,aa=!1,s)throw Error(se(300));return t}function tc(){var t=Zn!==0;return Zn=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?nt.memoizedState=ht=t:ht=ht.next=t,ht}function Xt(){if(mt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var s=ht===null?nt.memoizedState:ht.next;if(s!==null)ht=s,mt=t;else{if(t===null)throw Error(se(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},ht===null?nt.memoizedState=ht=t:ht=ht.next=t}return ht}function el(t,s){return typeof s=="function"?s(t):s}function ai(t){var s=Xt(),r=s.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=mt,l=n.baseQueue,a=r.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}n.baseQueue=l=a,r.pending=null}if(l!==null){a=l.next,n=n.baseState;var c=i=null,u=null,f=a;do{var v=f.lane;if((xr&v)===v)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:t(n,f.action);else{var S={lane:v,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(c=u=S,i=n):u=u.next=S,nt.lanes|=v,gr|=v}f=f.next}while(f!==null&&f!==a);u===null?i=n:u.next=c,as(n,s.memoizedState)||(Rt=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){l=t;do a=l.lane,nt.lanes|=a,gr|=a,l=l.next;while(l!==t)}else l===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function ii(t){var s=Xt(),r=s.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=r.dispatch,l=r.pending,a=s.memoizedState;if(l!==null){r.pending=null;var i=l=l.next;do a=t(a,i.action),i=i.next;while(i!==l);as(a,s.memoizedState)||(Rt=!0),s.memoizedState=a,s.baseQueue===null&&(s.baseState=a),r.lastRenderedState=a}return[a,n]}function Uh(){}function Kh(t,s){var r=nt,n=Xt(),l=s(),a=!as(n.memoizedState,l);if(a&&(n.memoizedState=l,Rt=!0),n=n.queue,sc(qh.bind(null,r,n,t),[t]),n.getSnapshot!==s||a||ht!==null&&ht.memoizedState.tag&1){if(r.flags|=2048,tl(9,$h.bind(null,r,n,l,s),void 0,null),ft===null)throw Error(se(349));xr&30||Wh(r,s,l)}return l}function Wh(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function $h(t,s,r,n){s.value=r,s.getSnapshot=n,Hh(s)&&Vh(t)}function qh(t,s,r){return r(function(){Hh(s)&&Vh(t)})}function Hh(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!as(t,r)}catch{return!0}}function Vh(t){var s=ws(t,1);s!==null&&ls(s,t,1,-1)}function wm(t){var s=ms();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},s.queue=t,t=t.dispatch=ug.bind(null,nt,t),[s.memoizedState,t]}function tl(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function Yh(){return Xt().memoizedState}function _l(t,s,r,n){var l=ms();nt.flags|=t,l.memoizedState=tl(1|s,r,void 0,n===void 0?null:n)}function ba(t,s,r,n){var l=Xt();n=n===void 0?null:n;var a=void 0;if(mt!==null){var i=mt.memoizedState;if(a=i.destroy,n!==null&&Zo(n,i.deps)){l.memoizedState=tl(s,r,a,n);return}}nt.flags|=t,l.memoizedState=tl(1|s,r,a,n)}function Tm(t,s){return _l(8390656,8,t,s)}function sc(t,s){return ba(2048,8,t,s)}function Gh(t,s){return ba(4,2,t,s)}function Qh(t,s){return ba(4,4,t,s)}function Jh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Xh(t,s,r){return r=r!=null?r.concat([t]):null,ba(4,4,Jh.bind(null,s,t),r)}function rc(){}function Zh(t,s){var r=Xt();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Zo(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function ef(t,s){var r=Xt();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Zo(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function tf(t,s,r){return xr&21?(as(r,s)||(r=ah(),nt.lanes|=r,gr|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=r)}function cg(t,s){var r=We;We=r!==0&&4>r?r:4,t(!0);var n=li.transition;li.transition={};try{t(!1),s()}finally{We=r,li.transition=n}}function sf(){return Xt().memoizedState}function dg(t,s,r){var n=Vs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rf(t))nf(s,r);else if(r=_h(t,s,r,n),r!==null){var l=zt();ls(r,t,n,l),lf(r,s,n)}}function ug(t,s,r){var n=Vs(t),l={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rf(t))nf(s,l);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=s.lastRenderedReducer,a!==null))try{var i=s.lastRenderedState,c=a(i,r);if(l.hasEagerState=!0,l.eagerState=c,as(c,i)){var u=s.interleaved;u===null?(l.next=l,Yo(s)):(l.next=u.next,u.next=l),s.interleaved=l;return}}catch{}finally{}r=_h(t,s,l,n),r!==null&&(l=zt(),ls(r,t,n,l),lf(r,s,n))}}function rf(t){var s=t.alternate;return t===nt||s!==null&&s===nt}function nf(t,s){Pn=aa=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function lf(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,Lo(t,r)}}var ia={readContext:Jt,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},mg={readContext:Jt,useCallback:function(t,s){return ms().memoizedState=[t,s===void 0?null:s],t},useContext:Jt,useEffect:Tm,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,_l(4194308,4,Jh.bind(null,s,t),r)},useLayoutEffect:function(t,s){return _l(4194308,4,t,s)},useInsertionEffect:function(t,s){return _l(4,2,t,s)},useMemo:function(t,s){var r=ms();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=ms();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=dg.bind(null,nt,t),[n.memoizedState,t]},useRef:function(t){var s=ms();return t={current:t},s.memoizedState=t},useState:wm,useDebugValue:rc,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=wm(!1),s=t[0];return t=cg.bind(null,t[1]),ms().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=nt,l=ms();if(st){if(r===void 0)throw Error(se(407));r=r()}else{if(r=s(),ft===null)throw Error(se(349));xr&30||Wh(n,s,r)}l.memoizedState=r;var a={value:r,getSnapshot:s};return l.queue=a,Tm(qh.bind(null,n,a,t),[t]),n.flags|=2048,tl(9,$h.bind(null,n,a,r,s),void 0,null),r},useId:function(){var t=ms(),s=ft.identifierPrefix;if(st){var r=bs,n=Ns;r=(n&~(1<<32-ns(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Zn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=og++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},pg={readContext:Jt,useCallback:Zh,useContext:Jt,useEffect:sc,useImperativeHandle:Xh,useInsertionEffect:Gh,useLayoutEffect:Qh,useMemo:ef,useReducer:ai,useRef:Yh,useState:function(){return ai(el)},useDebugValue:rc,useDeferredValue:function(t){var s=Xt();return tf(s,mt.memoizedState,t)},useTransition:function(){var t=ai(el)[0],s=Xt().memoizedState;return[t,s]},useMutableSource:Uh,useSyncExternalStore:Kh,useId:sf,unstable_isNewReconciler:!1},hg={readContext:Jt,useCallback:Zh,useContext:Jt,useEffect:sc,useImperativeHandle:Xh,useInsertionEffect:Gh,useLayoutEffect:Qh,useMemo:ef,useReducer:ii,useRef:Yh,useState:function(){return ii(el)},useDebugValue:rc,useDeferredValue:function(t){var s=Xt();return mt===null?s.memoizedState=t:tf(s,mt.memoizedState,t)},useTransition:function(){var t=ii(el)[0],s=Xt().memoizedState;return[t,s]},useMutableSource:Uh,useSyncExternalStore:Kh,useId:sf,unstable_isNewReconciler:!1};function es(t,s){if(t&&t.defaultProps){s=lt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Xi(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:lt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Sa={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=zt(),l=Vs(t),a=Ss(n,l);a.payload=s,r!=null&&(a.callback=r),s=qs(t,a,l),s!==null&&(ls(s,t,l,n),Pl(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=zt(),l=Vs(t),a=Ss(n,l);a.tag=1,a.payload=s,r!=null&&(a.callback=r),s=qs(t,a,l),s!==null&&(ls(s,t,l,n),Pl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=zt(),n=Vs(t),l=Ss(r,n);l.tag=2,s!=null&&(l.callback=s),s=qs(t,l,n),s!==null&&(ls(s,t,n,r),Pl(s,t,n))}};function zm(t,s,r,n,l,a,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,i):s.prototype&&s.prototype.isPureReactComponent?!Vn(r,n)||!Vn(l,a):!0}function af(t,s,r){var n=!1,l=Js,a=s.contextType;return typeof a=="object"&&a!==null?a=Jt(a):(l=Bt(s)?fr:Ct.current,n=s.contextTypes,a=(n=n!=null)?Jr(t,l):Js),s=new s(r,a),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Sa,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=a),s}function Dm(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&Sa.enqueueReplaceState(s,s.state,null)}function Zi(t,s,r,n){var l=t.stateNode;l.props=r,l.state=t.memoizedState,l.refs={},Go(t);var a=s.contextType;typeof a=="object"&&a!==null?l.context=Jt(a):(a=Bt(s)?fr:Ct.current,l.context=Jr(t,a)),l.state=t.memoizedState,a=s.getDerivedStateFromProps,typeof a=="function"&&(Xi(t,s,a,r),l.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&Sa.enqueueReplaceState(l,l.state,null),na(t,r,l,n),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function tn(t,s){try{var r="",n=s;do r+=Ky(n),n=n.return;while(n);var l=r}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:s,stack:l,digest:null}}function oi(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function eo(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function of(t,s,r){r=Ss(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){ca||(ca=!0,uo=n),eo(t,s)},r}function cf(t,s,r){r=Ss(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var l=s.value;r.payload=function(){return n(l)},r.callback=function(){eo(t,s)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){eo(t,s),typeof n!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Em(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new fg;var l=new Set;n.set(s,l)}else l=n.get(s),l===void 0&&(l=new Set,n.set(s,l));l.has(r)||(l.add(r),t=Dg.bind(null,t,s,r),s.then(t,t))}function Im(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Am(t,s,r,n,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Ss(-1,1),s.tag=2,qs(r,s,1))),r.lanes|=1),t)}var yg=zs.ReactCurrentOwner,Rt=!1;function Tt(t,s,r,n){s.child=t===null?Oh(s,null,r,n):Zr(s,t.child,r,n)}function Rm(t,s,r,n,l){r=r.render;var a=s.ref;return Yr(s,l),n=ec(t,s,r,n,a,l),r=tc(),t!==null&&!Rt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,Ts(t,s,l)):(st&&r&&Ko(s),s.flags|=1,Tt(t,s,n,l),s.child)}function Lm(t,s,r,n,l){if(t===null){var a=r.type;return typeof a=="function"&&!uc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=a,df(t,s,a,n,l)):(t=Kl(r.type,null,n,s,s.mode,l),t.ref=s.ref,t.return=s,s.child=t)}if(a=t.child,!(t.lanes&l)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Vn,r(i,n)&&t.ref===s.ref)return Ts(t,s,l)}return s.flags|=1,t=Ys(a,n),t.ref=s.ref,t.return=s,s.child=t}function df(t,s,r,n,l){if(t!==null){var a=t.memoizedProps;if(Vn(a,n)&&t.ref===s.ref)if(Rt=!1,s.pendingProps=n=a,(t.lanes&l)!==0)t.flags&131072&&(Rt=!0);else return s.lanes=t.lanes,Ts(t,s,l)}return to(t,s,r,n,l)}function uf(t,s,r){var n=s.pendingProps,l=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Wr,Mt),Mt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ye(Wr,Mt),Mt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ye(Wr,Mt),Mt|=n}else a!==null?(n=a.baseLanes|r,s.memoizedState=null):n=r,Ye(Wr,Mt),Mt|=n;return Tt(t,s,l,r),s.child}function mf(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function to(t,s,r,n,l){var a=Bt(r)?fr:Ct.current;return a=Jr(s,a),Yr(s,l),r=ec(t,s,r,n,a,l),n=tc(),t!==null&&!Rt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,Ts(t,s,l)):(st&&n&&Ko(s),s.flags|=1,Tt(t,s,r,l),s.child)}function Bm(t,s,r,n,l){if(Bt(r)){var a=!0;Zl(s)}else a=!1;if(Yr(s,l),s.stateNode===null)Ml(t,s),af(s,r,n),Zi(s,r,n,l),n=!0;else if(t===null){var i=s.stateNode,c=s.memoizedProps;i.props=c;var u=i.context,f=r.contextType;typeof f=="object"&&f!==null?f=Jt(f):(f=Bt(r)?fr:Ct.current,f=Jr(s,f));var v=r.getDerivedStateFromProps,S=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function";S||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==n||u!==f)&&Dm(s,i,n,f),Bs=!1;var k=s.memoizedState;i.state=k,na(s,n,i,l),u=s.memoizedState,c!==n||k!==u||Lt.current||Bs?(typeof v=="function"&&(Xi(s,r,v,n),u=s.memoizedState),(c=Bs||zm(s,r,c,n,k,u,f))?(S||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=u),i.props=n,i.state=u,i.context=f,n=c):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,Mh(t,s),c=s.memoizedProps,f=s.type===s.elementType?c:es(s.type,c),i.props=f,S=s.pendingProps,k=i.context,u=r.contextType,typeof u=="object"&&u!==null?u=Jt(u):(u=Bt(r)?fr:Ct.current,u=Jr(s,u));var R=r.getDerivedStateFromProps;(v=typeof R=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==S||k!==u)&&Dm(s,i,n,u),Bs=!1,k=s.memoizedState,i.state=k,na(s,n,i,l);var w=s.memoizedState;c!==S||k!==w||Lt.current||Bs?(typeof R=="function"&&(Xi(s,r,R,n),w=s.memoizedState),(f=Bs||zm(s,r,f,n,k,w,u)||!1)?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,w,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,w,u)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=w),i.props=n,i.state=w,i.context=u,n=f):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(s.flags|=1024),n=!1)}return so(t,s,r,n,a,l)}function so(t,s,r,n,l,a){mf(t,s);var i=(s.flags&128)!==0;if(!n&&!i)return l&&jm(s,r,!1),Ts(t,s,a);n=s.stateNode,yg.current=s;var c=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&i?(s.child=Zr(s,t.child,null,a),s.child=Zr(s,null,c,a)):Tt(t,s,c,a),s.memoizedState=n.state,l&&jm(s,r,!0),s.child}function pf(t){var s=t.stateNode;s.pendingContext?vm(t,s.pendingContext,s.pendingContext!==s.context):s.context&&vm(t,s.context,!1),Qo(t,s.containerInfo)}function Pm(t,s,r,n,l){return Xr(),$o(l),s.flags|=256,Tt(t,s,r,n),s.child}var ro={dehydrated:null,treeContext:null,retryLane:0};function no(t){return{baseLanes:t,cachePool:null,transitions:null}}function hf(t,s,r){var n=s.pendingProps,l=rt.current,a=!1,i=(s.flags&128)!==0,c;if((c=i)||(c=t!==null&&t.memoizedState===null?!1:(l&2)!==0),c?(a=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Ye(rt,l&1),t===null)return Qi(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,t=n.fallback,a?(n=s.mode,a=s.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=wa(i,n,0,null),t=pr(t,n,r,null),a.return=s,t.return=s,a.sibling=t,s.child=a,s.child.memoizedState=no(r),s.memoizedState=ro,t):nc(s,i));if(l=t.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return xg(t,s,i,n,c,l,r);if(a){a=n.fallback,i=s.mode,l=t.child,c=l.sibling;var u={mode:"hidden",children:n.children};return!(i&1)&&s.child!==l?(n=s.child,n.childLanes=0,n.pendingProps=u,s.deletions=null):(n=Ys(l,u),n.subtreeFlags=l.subtreeFlags&14680064),c!==null?a=Ys(c,a):(a=pr(a,i,r,null),a.flags|=2),a.return=s,n.return=s,n.sibling=a,s.child=n,n=a,a=s.child,i=t.child.memoizedState,i=i===null?no(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=t.childLanes&~r,s.memoizedState=ro,n}return a=t.child,t=a.sibling,n=Ys(a,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function nc(t,s){return s=wa({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function kl(t,s,r,n){return n!==null&&$o(n),Zr(s,t.child,null,r),t=nc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function xg(t,s,r,n,l,a,i){if(r)return s.flags&256?(s.flags&=-257,n=oi(Error(se(422))),kl(t,s,i,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(a=n.fallback,l=s.mode,n=wa({mode:"visible",children:n.children},l,0,null),a=pr(a,l,i,null),a.flags|=2,n.return=s,a.return=s,n.sibling=a,s.child=n,s.mode&1&&Zr(s,t.child,null,i),s.child.memoizedState=no(i),s.memoizedState=ro,a);if(!(s.mode&1))return kl(t,s,i,null);if(l.data==="$!"){if(n=l.nextSibling&&l.nextSibling.dataset,n)var c=n.dgst;return n=c,a=Error(se(419)),n=oi(a,n,void 0),kl(t,s,i,n)}if(c=(i&t.childLanes)!==0,Rt||c){if(n=ft,n!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(n.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,ws(t,l),ls(n,t,l,-1))}return dc(),n=oi(Error(se(421))),kl(t,s,i,n)}return l.data==="$?"?(s.flags|=128,s.child=t.child,s=Eg.bind(null,t),l._reactRetry=s,null):(t=a.treeContext,Ft=$s(l.nextSibling),Ut=s,st=!0,ss=null,t!==null&&(Ht[Vt++]=Ns,Ht[Vt++]=bs,Ht[Vt++]=yr,Ns=t.id,bs=t.overflow,yr=s),s=nc(s,n.children),s.flags|=4096,s)}function Om(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),Ji(t.return,s,r)}function ci(t,s,r,n,l){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:l}:(a.isBackwards=s,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=l)}function ff(t,s,r){var n=s.pendingProps,l=n.revealOrder,a=n.tail;if(Tt(t,s,n.children,r),n=rt.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Om(t,r,s);else if(t.tag===19)Om(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ye(rt,n),!(s.mode&1))s.memoizedState=null;else switch(l){case"forwards":for(r=s.child,l=null;r!==null;)t=r.alternate,t!==null&&la(t)===null&&(l=r),r=r.sibling;r=l,r===null?(l=s.child,s.child=null):(l=r.sibling,r.sibling=null),ci(s,!1,l,r,a);break;case"backwards":for(r=null,l=s.child,s.child=null;l!==null;){if(t=l.alternate,t!==null&&la(t)===null){s.child=l;break}t=l.sibling,l.sibling=r,r=l,l=t}ci(s,!0,r,null,a);break;case"together":ci(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ml(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Ts(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),gr|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(se(153));if(s.child!==null){for(t=s.child,r=Ys(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Ys(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function gg(t,s,r){switch(s.tag){case 3:pf(s),Xr();break;case 5:Fh(s);break;case 1:Bt(s.type)&&Zl(s);break;case 4:Qo(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,l=s.memoizedProps.value;Ye(sa,n._currentValue),n._currentValue=l;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Ye(rt,rt.current&1),s.flags|=128,null):r&s.child.childLanes?hf(t,s,r):(Ye(rt,rt.current&1),t=Ts(t,s,r),t!==null?t.sibling:null);Ye(rt,rt.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return ff(t,s,r);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ye(rt,rt.current),n)break;return null;case 22:case 23:return s.lanes=0,uf(t,s,r)}return Ts(t,s,r)}var yf,lo,xf,gf;yf=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lo=function(){};xf=function(t,s,r,n){var l=t.memoizedProps;if(l!==n){t=s.stateNode,ur(ys.current);var a=null;switch(r){case"input":l=Ti(t,l),n=Ti(t,n),a=[];break;case"select":l=lt({},l,{value:void 0}),n=lt({},n,{value:void 0}),a=[];break;case"textarea":l=Ei(t,l),n=Ei(t,n),a=[];break;default:typeof l.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Jl)}Ai(r,n);var i;r=null;for(f in l)if(!n.hasOwnProperty(f)&&l.hasOwnProperty(f)&&l[f]!=null)if(f==="style"){var c=l[f];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Fn.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in n){var u=n[f];if(c=l!=null?l[f]:void 0,n.hasOwnProperty(f)&&u!==c&&(u!=null||c!=null))if(f==="style")if(c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(r||(r={}),r[i]=u[i])}else r||(a||(a=[]),a.push(f,r)),r=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Fn.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Je("scroll",t),a||c===u||(a=[])):(a=a||[]).push(f,u))}r&&(a=a||[]).push("style",r);var f=a;(s.updateQueue=f)&&(s.flags|=4)}};gf=function(t,s,r,n){r!==n&&(s.flags|=4)};function vn(t,s){if(!st)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function bt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var l=t.child;l!==null;)r|=l.lanes|l.childLanes,n|=l.subtreeFlags&14680064,n|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)r|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function vg(t,s,r){var n=s.pendingProps;switch(Wo(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return Bt(s.type)&&Xl(),bt(s),null;case 3:return n=s.stateNode,en(),Xe(Lt),Xe(Ct),Xo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ss!==null&&(ho(ss),ss=null))),lo(t,s),bt(s),null;case 5:Jo(s);var l=ur(Xn.current);if(r=s.type,t!==null&&s.stateNode!=null)xf(t,s,r,n,l),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(se(166));return bt(s),null}if(t=ur(ys.current),bl(s)){n=s.stateNode,r=s.type;var a=s.memoizedProps;switch(n[hs]=s,n[Qn]=a,t=(s.mode&1)!==0,r){case"dialog":Je("cancel",n),Je("close",n);break;case"iframe":case"object":case"embed":Je("load",n);break;case"video":case"audio":for(l=0;l<zn.length;l++)Je(zn[l],n);break;case"source":Je("error",n);break;case"img":case"image":case"link":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"input":Hu(n,a),Je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Je("invalid",n);break;case"textarea":Yu(n,a),Je("invalid",n)}Ai(r,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="children"?typeof c=="string"?n.textContent!==c&&(a.suppressHydrationWarning!==!0&&Nl(n.textContent,c,t),l=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Nl(n.textContent,c,t),l=["children",""+c]):Fn.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Je("scroll",n)}switch(r){case"input":pl(n),Vu(n,a,!0);break;case"textarea":pl(n),Gu(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Jl)}n=l,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qp(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[hs]=s,t[Qn]=n,yf(t,s,!1,!1),s.stateNode=t;e:{switch(i=Ri(r,n),r){case"dialog":Je("cancel",t),Je("close",t),l=n;break;case"iframe":case"object":case"embed":Je("load",t),l=n;break;case"video":case"audio":for(l=0;l<zn.length;l++)Je(zn[l],t);l=n;break;case"source":Je("error",t),l=n;break;case"img":case"image":case"link":Je("error",t),Je("load",t),l=n;break;case"details":Je("toggle",t),l=n;break;case"input":Hu(t,n),l=Ti(t,n),Je("invalid",t);break;case"option":l=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},l=lt({},n,{value:void 0}),Je("invalid",t);break;case"textarea":Yu(t,n),l=Ei(t,n),Je("invalid",t);break;default:l=n}Ai(r,l),c=l;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?Yp(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Hp(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Un(t,u):typeof u=="number"&&Un(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Fn.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Je("scroll",t):u!=null&&zo(t,a,u,i))}switch(r){case"input":pl(t),Vu(t,n,!1);break;case"textarea":pl(t),Gu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Qs(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?$r(t,!!n.multiple,a,!1):n.defaultValue!=null&&$r(t,!!n.multiple,n.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=Jl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bt(s),null;case 6:if(t&&s.stateNode!=null)gf(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(se(166));if(r=ur(Xn.current),ur(ys.current),bl(s)){if(n=s.stateNode,r=s.memoizedProps,n[hs]=s,(a=n.nodeValue!==r)&&(t=Ut,t!==null))switch(t.tag){case 3:Nl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(n.nodeValue,r,(t.mode&1)!==0)}a&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[hs]=s,s.stateNode=n}return bt(s),null;case 13:if(Xe(rt),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Ft!==null&&s.mode&1&&!(s.flags&128))Bh(),Xr(),s.flags|=98560,a=!1;else if(a=bl(s),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(se(318));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(se(317));a[hs]=s}else Xr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;bt(s),a=!1}else ss!==null&&(ho(ss),ss=null),a=!0;if(!a)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||rt.current&1?pt===0&&(pt=3):dc())),s.updateQueue!==null&&(s.flags|=4),bt(s),null);case 4:return en(),lo(t,s),t===null&&Yn(s.stateNode.containerInfo),bt(s),null;case 10:return Vo(s.type._context),bt(s),null;case 17:return Bt(s.type)&&Xl(),bt(s),null;case 19:if(Xe(rt),a=s.memoizedState,a===null)return bt(s),null;if(n=(s.flags&128)!==0,i=a.rendering,i===null)if(n)vn(a,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=la(t),i!==null){for(s.flags|=128,vn(a,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)a=r,t=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,t=i.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ye(rt,rt.current&1|2),s.child}t=t.sibling}a.tail!==null&&ot()>sn&&(s.flags|=128,n=!0,vn(a,!1),s.lanes=4194304)}else{if(!n)if(t=la(i),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),vn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!st)return bt(s),null}else 2*ot()-a.renderingStartTime>sn&&r!==1073741824&&(s.flags|=128,n=!0,vn(a,!1),s.lanes=4194304);a.isBackwards?(i.sibling=s.child,s.child=i):(r=a.last,r!==null?r.sibling=i:s.child=i,a.last=i)}return a.tail!==null?(s=a.tail,a.rendering=s,a.tail=s.sibling,a.renderingStartTime=ot(),s.sibling=null,r=rt.current,Ye(rt,n?r&1|2:r&1),s):(bt(s),null);case 22:case 23:return cc(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Mt&1073741824&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),null;case 24:return null;case 25:return null}throw Error(se(156,s.tag))}function jg(t,s){switch(Wo(s),s.tag){case 1:return Bt(s.type)&&Xl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return en(),Xe(Lt),Xe(Ct),Xo(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Jo(s),null;case 13:if(Xe(rt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(se(340));Xr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Xe(rt),null;case 4:return en(),null;case 10:return Vo(s.type._context),null;case 22:case 23:return cc(),null;case 24:return null;default:return null}}var Cl=!1,kt=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,he=null;function Kr(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){it(t,s,n)}else r.current=null}function ao(t,s,r){try{r()}catch(n){it(t,s,n)}}var _m=!1;function bg(t,s){if(Wi=Yl,t=bh(),Uo(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var l=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,c=-1,u=-1,f=0,v=0,S=t,k=null;t:for(;;){for(var R;S!==r||l!==0&&S.nodeType!==3||(c=i+l),S!==a||n!==0&&S.nodeType!==3||(u=i+n),S.nodeType===3&&(i+=S.nodeValue.length),(R=S.firstChild)!==null;)k=S,S=R;for(;;){if(S===t)break t;if(k===r&&++f===l&&(c=i),k===a&&++v===n&&(u=i),(R=S.nextSibling)!==null)break;S=k,k=S.parentNode}S=R}r=c===-1||u===-1?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for($i={focusedElem:t,selectionRange:r},Yl=!1,he=s;he!==null;)if(s=he,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,he=t;else for(;he!==null;){s=he;try{var w=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var A=w.memoizedProps,C=w.memoizedState,y=s.stateNode,m=y.getSnapshotBeforeUpdate(s.elementType===s.type?A:es(s.type,A),C);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(z){it(s,s.return,z)}if(t=s.sibling,t!==null){t.return=s.return,he=t;break}he=s.return}return w=_m,_m=!1,w}function On(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&t)===t){var a=l.destroy;l.destroy=void 0,a!==void 0&&ao(s,r,a)}l=l.next}while(l!==n)}}function ka(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function io(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function vf(t){var s=t.alternate;s!==null&&(t.alternate=null,vf(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[hs],delete s[Qn],delete s[Vi],delete s[ng],delete s[lg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jf(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oo(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Jl));else if(n!==4&&(t=t.child,t!==null))for(oo(t,s,r),t=t.sibling;t!==null;)oo(t,s,r),t=t.sibling}function co(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(co(t,s,r),t=t.sibling;t!==null;)co(t,s,r),t=t.sibling}var xt=null,ts=!1;function Is(t,s,r){for(r=r.child;r!==null;)Nf(t,s,r),r=r.sibling}function Nf(t,s,r){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(ya,r)}catch{}switch(r.tag){case 5:kt||Kr(r,s);case 6:var n=xt,l=ts;xt=null,Is(t,s,r),xt=n,ts=l,xt!==null&&(ts?(t=xt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):xt.removeChild(r.stateNode));break;case 18:xt!==null&&(ts?(t=xt,r=r.stateNode,t.nodeType===8?si(t.parentNode,r):t.nodeType===1&&si(t,r),qn(t)):si(xt,r.stateNode));break;case 4:n=xt,l=ts,xt=r.stateNode.containerInfo,ts=!0,Is(t,s,r),xt=n,ts=l;break;case 0:case 11:case 14:case 15:if(!kt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){l=n=n.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ao(r,s,i),l=l.next}while(l!==n)}Is(t,s,r);break;case 1:if(!kt&&(Kr(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){it(r,s,c)}Is(t,s,r);break;case 21:Is(t,s,r);break;case 22:r.mode&1?(kt=(n=kt)||r.memoizedState!==null,Is(t,s,r),kt=n):Is(t,s,r);break;default:Is(t,s,r)}}function Fm(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Ng),s.forEach(function(n){var l=Ig.bind(null,t,n);r.has(n)||(r.add(n),n.then(l,l))})}}function Zt(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var l=r[n];try{var a=t,i=s,c=i;e:for(;c!==null;){switch(c.tag){case 5:xt=c.stateNode,ts=!1;break e;case 3:xt=c.stateNode.containerInfo,ts=!0;break e;case 4:xt=c.stateNode.containerInfo,ts=!0;break e}c=c.return}if(xt===null)throw Error(se(160));Nf(a,i,l),xt=null,ts=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(f){it(l,s,f)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)bf(s,t),s=s.sibling}function bf(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(s,t),cs(t),n&4){try{On(3,t,t.return),ka(3,t)}catch(A){it(t,t.return,A)}try{On(5,t,t.return)}catch(A){it(t,t.return,A)}}break;case 1:Zt(s,t),cs(t),n&512&&r!==null&&Kr(r,r.return);break;case 5:if(Zt(s,t),cs(t),n&512&&r!==null&&Kr(r,r.return),t.flags&32){var l=t.stateNode;try{Un(l,"")}catch(A){it(t,t.return,A)}}if(n&4&&(l=t.stateNode,l!=null)){var a=t.memoizedProps,i=r!==null?r.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Wp(l,a),Ri(c,i);var f=Ri(c,a);for(i=0;i<u.length;i+=2){var v=u[i],S=u[i+1];v==="style"?Yp(l,S):v==="dangerouslySetInnerHTML"?Hp(l,S):v==="children"?Un(l,S):zo(l,v,S,f)}switch(c){case"input":zi(l,a);break;case"textarea":$p(l,a);break;case"select":var k=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var R=a.value;R!=null?$r(l,!!a.multiple,R,!1):k!==!!a.multiple&&(a.defaultValue!=null?$r(l,!!a.multiple,a.defaultValue,!0):$r(l,!!a.multiple,a.multiple?[]:"",!1))}l[Qn]=a}catch(A){it(t,t.return,A)}}break;case 6:if(Zt(s,t),cs(t),n&4){if(t.stateNode===null)throw Error(se(162));l=t.stateNode,a=t.memoizedProps;try{l.nodeValue=a}catch(A){it(t,t.return,A)}}break;case 3:if(Zt(s,t),cs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(A){it(t,t.return,A)}break;case 4:Zt(s,t),cs(t);break;case 13:Zt(s,t),cs(t),l=t.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(ic=ot())),n&4&&Fm(t);break;case 22:if(v=r!==null&&r.memoizedState!==null,t.mode&1?(kt=(f=kt)||v,Zt(s,t),kt=f):Zt(s,t),cs(t),n&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!v&&t.mode&1)for(he=t,v=t.child;v!==null;){for(S=he=v;he!==null;){switch(k=he,R=k.child,k.tag){case 0:case 11:case 14:case 15:On(4,k,k.return);break;case 1:Kr(k,k.return);var w=k.stateNode;if(typeof w.componentWillUnmount=="function"){n=k,r=k.return;try{s=n,w.props=s.memoizedProps,w.state=s.memoizedState,w.componentWillUnmount()}catch(A){it(n,r,A)}}break;case 5:Kr(k,k.return);break;case 22:if(k.memoizedState!==null){Km(S);continue}}R!==null?(R.return=k,he=R):Km(S)}v=v.sibling}e:for(v=null,S=t;;){if(S.tag===5){if(v===null){v=S;try{l=S.stateNode,f?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=S.stateNode,u=S.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Vp("display",i))}catch(A){it(t,t.return,A)}}}else if(S.tag===6){if(v===null)try{S.stateNode.nodeValue=f?"":S.memoizedProps}catch(A){it(t,t.return,A)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===t)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break e;for(;S.sibling===null;){if(S.return===null||S.return===t)break e;v===S&&(v=null),S=S.return}v===S&&(v=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Zt(s,t),cs(t),n&4&&Fm(t);break;case 21:break;default:Zt(s,t),cs(t)}}function cs(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(jf(r)){var n=r;break e}r=r.return}throw Error(se(160))}switch(n.tag){case 5:var l=n.stateNode;n.flags&32&&(Un(l,""),n.flags&=-33);var a=Mm(t);co(t,a,l);break;case 3:case 4:var i=n.stateNode.containerInfo,c=Mm(t);oo(t,c,i);break;default:throw Error(se(161))}}catch(u){it(t,t.return,u)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Sg(t,s,r){he=t,Sf(t)}function Sf(t,s,r){for(var n=(t.mode&1)!==0;he!==null;){var l=he,a=l.child;if(l.tag===22&&n){var i=l.memoizedState!==null||Cl;if(!i){var c=l.alternate,u=c!==null&&c.memoizedState!==null||kt;c=Cl;var f=kt;if(Cl=i,(kt=u)&&!f)for(he=l;he!==null;)i=he,u=i.child,i.tag===22&&i.memoizedState!==null?Wm(l):u!==null?(u.return=i,he=u):Wm(l);for(;a!==null;)he=a,Sf(a),a=a.sibling;he=l,Cl=c,kt=f}Um(t)}else l.subtreeFlags&8772&&a!==null?(a.return=l,he=a):Um(t)}}function Um(t){for(;he!==null;){var s=he;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:kt||ka(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!kt)if(r===null)n.componentDidMount();else{var l=s.elementType===s.type?r.memoizedProps:es(s.type,r.memoizedProps);n.componentDidUpdate(l,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=s.updateQueue;a!==null&&Cm(s,a,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Cm(s,i,r)}break;case 5:var c=s.stateNode;if(r===null&&s.flags&4){r=c;var u=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var f=s.alternate;if(f!==null){var v=f.memoizedState;if(v!==null){var S=v.dehydrated;S!==null&&qn(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}kt||s.flags&512&&io(s)}catch(k){it(s,s.return,k)}}if(s===t){he=null;break}if(r=s.sibling,r!==null){r.return=s.return,he=r;break}he=s.return}}function Km(t){for(;he!==null;){var s=he;if(s===t){he=null;break}var r=s.sibling;if(r!==null){r.return=s.return,he=r;break}he=s.return}}function Wm(t){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{ka(4,s)}catch(u){it(s,r,u)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var l=s.return;try{n.componentDidMount()}catch(u){it(s,l,u)}}var a=s.return;try{io(s)}catch(u){it(s,a,u)}break;case 5:var i=s.return;try{io(s)}catch(u){it(s,i,u)}}}catch(u){it(s,s.return,u)}if(s===t){he=null;break}var c=s.sibling;if(c!==null){c.return=s.return,he=c;break}he=s.return}}var kg=Math.ceil,oa=zs.ReactCurrentDispatcher,lc=zs.ReactCurrentOwner,Qt=zs.ReactCurrentBatchConfig,Re=0,ft=null,ut=null,gt=0,Mt=0,Wr=Zs(0),pt=0,sl=null,gr=0,Ca=0,ac=0,_n=null,At=null,ic=0,sn=1/0,vs=null,ca=!1,uo=null,Hs=null,wl=!1,Ms=null,da=0,Mn=0,mo=null,Fl=-1,Ul=0;function zt(){return Re&6?ot():Fl!==-1?Fl:Fl=ot()}function Vs(t){return t.mode&1?Re&2&&gt!==0?gt&-gt:ig.transition!==null?(Ul===0&&(Ul=ah()),Ul):(t=We,t!==0||(t=window.event,t=t===void 0?16:ph(t.type)),t):1}function ls(t,s,r,n){if(50<Mn)throw Mn=0,mo=null,Error(se(185));al(t,r,n),(!(Re&2)||t!==ft)&&(t===ft&&(!(Re&2)&&(Ca|=r),pt===4&&Os(t,gt)),Pt(t,n),r===1&&Re===0&&!(s.mode&1)&&(sn=ot()+500,Na&&er()))}function Pt(t,s){var r=t.callbackNode;ix(t,s);var n=Vl(t,t===ft?gt:0);if(n===0)r!==null&&Xu(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&Xu(r),s===1)t.tag===0?ag($m.bind(null,t)):Ah($m.bind(null,t)),sg(function(){!(Re&6)&&er()}),r=null;else{switch(ih(n)){case 1:r=Ro;break;case 4:r=nh;break;case 16:r=Hl;break;case 536870912:r=lh;break;default:r=Hl}r=If(r,kf.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function kf(t,s){if(Fl=-1,Ul=0,Re&6)throw Error(se(327));var r=t.callbackNode;if(Gr()&&t.callbackNode!==r)return null;var n=Vl(t,t===ft?gt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=ua(t,n);else{s=n;var l=Re;Re|=2;var a=wf();(ft!==t||gt!==s)&&(vs=null,sn=ot()+500,mr(t,s));do try{Tg();break}catch(c){Cf(t,c)}while(!0);Ho(),oa.current=a,Re=l,ut!==null?s=0:(ft=null,gt=0,s=pt)}if(s!==0){if(s===2&&(l=_i(t),l!==0&&(n=l,s=po(t,l))),s===1)throw r=sl,mr(t,0),Os(t,n),Pt(t,ot()),r;if(s===6)Os(t,n);else{if(l=t.current.alternate,!(n&30)&&!Cg(l)&&(s=ua(t,n),s===2&&(a=_i(t),a!==0&&(n=a,s=po(t,a))),s===1))throw r=sl,mr(t,0),Os(t,n),Pt(t,ot()),r;switch(t.finishedWork=l,t.finishedLanes=n,s){case 0:case 1:throw Error(se(345));case 2:or(t,At,vs);break;case 3:if(Os(t,n),(n&130023424)===n&&(s=ic+500-ot(),10<s)){if(Vl(t,0)!==0)break;if(l=t.suspendedLanes,(l&n)!==n){zt(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=Hi(or.bind(null,t,At,vs),s);break}or(t,At,vs);break;case 4:if(Os(t,n),(n&4194240)===n)break;for(s=t.eventTimes,l=-1;0<n;){var i=31-ns(n);a=1<<i,i=s[i],i>l&&(l=i),n&=~a}if(n=l,n=ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kg(n/1960))-n,10<n){t.timeoutHandle=Hi(or.bind(null,t,At,vs),n);break}or(t,At,vs);break;case 5:or(t,At,vs);break;default:throw Error(se(329))}}}return Pt(t,ot()),t.callbackNode===r?kf.bind(null,t):null}function po(t,s){var r=_n;return t.current.memoizedState.isDehydrated&&(mr(t,s).flags|=256),t=ua(t,s),t!==2&&(s=At,At=r,s!==null&&ho(s)),t}function ho(t){At===null?At=t:At.push.apply(At,t)}function Cg(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var l=r[n],a=l.getSnapshot;l=l.value;try{if(!as(a(),l))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Os(t,s){for(s&=~ac,s&=~Ca,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ns(s),n=1<<r;t[r]=-1,s&=~n}}function $m(t){if(Re&6)throw Error(se(327));Gr();var s=Vl(t,0);if(!(s&1))return Pt(t,ot()),null;var r=ua(t,s);if(t.tag!==0&&r===2){var n=_i(t);n!==0&&(s=n,r=po(t,n))}if(r===1)throw r=sl,mr(t,0),Os(t,s),Pt(t,ot()),r;if(r===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,or(t,At,vs),Pt(t,ot()),null}function oc(t,s){var r=Re;Re|=1;try{return t(s)}finally{Re=r,Re===0&&(sn=ot()+500,Na&&er())}}function vr(t){Ms!==null&&Ms.tag===0&&!(Re&6)&&Gr();var s=Re;Re|=1;var r=Qt.transition,n=We;try{if(Qt.transition=null,We=1,t)return t()}finally{We=n,Qt.transition=r,Re=s,!(Re&6)&&er()}}function cc(){Mt=Wr.current,Xe(Wr)}function mr(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,tg(r)),ut!==null)for(r=ut.return;r!==null;){var n=r;switch(Wo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xl();break;case 3:en(),Xe(Lt),Xe(Ct),Xo();break;case 5:Jo(n);break;case 4:en();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:Vo(n.type._context);break;case 22:case 23:cc()}r=r.return}if(ft=t,ut=t=Ys(t.current,null),gt=Mt=s,pt=0,sl=null,ac=Ca=gr=0,At=_n=null,dr!==null){for(s=0;s<dr.length;s++)if(r=dr[s],n=r.interleaved,n!==null){r.interleaved=null;var l=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=l,n.next=i}r.pending=n}dr=null}return t}function Cf(t,s){do{var r=ut;try{if(Ho(),Ol.current=ia,aa){for(var n=nt.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}aa=!1}if(xr=0,ht=mt=nt=null,Pn=!1,Zn=0,lc.current=null,r===null||r.return===null){pt=1,sl=s,ut=null;break}e:{var a=t,i=r.return,c=r,u=s;if(s=gt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,v=c,S=v.tag;if(!(v.mode&1)&&(S===0||S===11||S===15)){var k=v.alternate;k?(v.updateQueue=k.updateQueue,v.memoizedState=k.memoizedState,v.lanes=k.lanes):(v.updateQueue=null,v.memoizedState=null)}var R=Im(i);if(R!==null){R.flags&=-257,Am(R,i,c,a,s),R.mode&1&&Em(a,f,s),s=R,u=f;var w=s.updateQueue;if(w===null){var A=new Set;A.add(u),s.updateQueue=A}else w.add(u);break e}else{if(!(s&1)){Em(a,f,s),dc();break e}u=Error(se(426))}}else if(st&&c.mode&1){var C=Im(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Am(C,i,c,a,s),$o(tn(u,c));break e}}a=u=tn(u,c),pt!==4&&(pt=2),_n===null?_n=[a]:_n.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,s&=-s,a.lanes|=s;var y=of(a,u,s);km(a,y);break e;case 1:c=u;var m=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Hs===null||!Hs.has(j)))){a.flags|=65536,s&=-s,a.lanes|=s;var z=cf(a,c,s);km(a,z);break e}}a=a.return}while(a!==null)}zf(r)}catch(P){s=P,ut===r&&r!==null&&(ut=r=r.return);continue}break}while(!0)}function wf(){var t=oa.current;return oa.current=ia,t===null?ia:t}function dc(){(pt===0||pt===3||pt===2)&&(pt=4),ft===null||!(gr&268435455)&&!(Ca&268435455)||Os(ft,gt)}function ua(t,s){var r=Re;Re|=2;var n=wf();(ft!==t||gt!==s)&&(vs=null,mr(t,s));do try{wg();break}catch(l){Cf(t,l)}while(!0);if(Ho(),Re=r,oa.current=n,ut!==null)throw Error(se(261));return ft=null,gt=0,pt}function wg(){for(;ut!==null;)Tf(ut)}function Tg(){for(;ut!==null&&!Xy();)Tf(ut)}function Tf(t){var s=Ef(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,s===null?zf(t):ut=s,lc.current=null}function zf(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=jg(r,s),r!==null){r.flags&=32767,ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(r=vg(r,s,Mt),r!==null){ut=r;return}if(s=s.sibling,s!==null){ut=s;return}ut=s=t}while(s!==null);pt===0&&(pt=5)}function or(t,s,r){var n=We,l=Qt.transition;try{Qt.transition=null,We=1,zg(t,s,r,n)}finally{Qt.transition=l,We=n}return null}function zg(t,s,r,n){do Gr();while(Ms!==null);if(Re&6)throw Error(se(327));r=t.finishedWork;var l=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(ox(t,a),t===ft&&(ut=ft=null,gt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wl||(wl=!0,If(Hl,function(){return Gr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Qt.transition,Qt.transition=null;var i=We;We=1;var c=Re;Re|=4,lc.current=null,bg(t,r),bf(r,t),Yx($i),Yl=!!Wi,$i=Wi=null,t.current=r,Sg(r),Zy(),Re=c,We=i,Qt.transition=a}else t.current=r;if(wl&&(wl=!1,Ms=t,da=l),a=t.pendingLanes,a===0&&(Hs=null),sx(r.stateNode),Pt(t,ot()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)l=s[r],n(l.value,{componentStack:l.stack,digest:l.digest});if(ca)throw ca=!1,t=uo,uo=null,t;return da&1&&t.tag!==0&&Gr(),a=t.pendingLanes,a&1?t===mo?Mn++:(Mn=0,mo=t):Mn=0,er(),null}function Gr(){if(Ms!==null){var t=ih(da),s=Qt.transition,r=We;try{if(Qt.transition=null,We=16>t?16:t,Ms===null)var n=!1;else{if(t=Ms,Ms=null,da=0,Re&6)throw Error(se(331));var l=Re;for(Re|=4,he=t.current;he!==null;){var a=he,i=a.child;if(he.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var f=c[u];for(he=f;he!==null;){var v=he;switch(v.tag){case 0:case 11:case 15:On(8,v,a)}var S=v.child;if(S!==null)S.return=v,he=S;else for(;he!==null;){v=he;var k=v.sibling,R=v.return;if(vf(v),v===f){he=null;break}if(k!==null){k.return=R,he=k;break}he=R}}}var w=a.alternate;if(w!==null){var A=w.child;if(A!==null){w.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}he=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,he=i;else e:for(;he!==null;){if(a=he,a.flags&2048)switch(a.tag){case 0:case 11:case 15:On(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,he=y;break e}he=a.return}}var m=t.current;for(he=m;he!==null;){i=he;var j=i.child;if(i.subtreeFlags&2064&&j!==null)j.return=i,he=j;else e:for(i=m;he!==null;){if(c=he,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ka(9,c)}}catch(P){it(c,c.return,P)}if(c===i){he=null;break e}var z=c.sibling;if(z!==null){z.return=c.return,he=z;break e}he=c.return}}if(Re=l,er(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(ya,t)}catch{}n=!0}return n}finally{We=r,Qt.transition=s}}return!1}function qm(t,s,r){s=tn(r,s),s=of(t,s,1),t=qs(t,s,1),s=zt(),t!==null&&(al(t,1,s),Pt(t,s))}function it(t,s,r){if(t.tag===3)qm(t,t,r);else for(;s!==null;){if(s.tag===3){qm(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hs===null||!Hs.has(n))){t=tn(r,t),t=cf(s,t,1),s=qs(s,t,1),t=zt(),s!==null&&(al(s,1,t),Pt(s,t));break}}s=s.return}}function Dg(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=zt(),t.pingedLanes|=t.suspendedLanes&r,ft===t&&(gt&r)===r&&(pt===4||pt===3&&(gt&130023424)===gt&&500>ot()-ic?mr(t,0):ac|=r),Pt(t,s)}function Df(t,s){s===0&&(t.mode&1?(s=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):s=1);var r=zt();t=ws(t,s),t!==null&&(al(t,s,r),Pt(t,r))}function Eg(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Df(t,r)}function Ig(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,l=t.memoizedState;l!==null&&(r=l.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(s),Df(t,r)}var Ef;Ef=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Lt.current)Rt=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Rt=!1,gg(t,s,r);Rt=!!(t.flags&131072)}else Rt=!1,st&&s.flags&1048576&&Rh(s,ta,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Ml(t,s),t=s.pendingProps;var l=Jr(s,Ct.current);Yr(s,r),l=ec(null,s,n,t,l,r);var a=tc();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Bt(n)?(a=!0,Zl(s)):a=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Go(s),l.updater=Sa,s.stateNode=l,l._reactInternals=s,Zi(s,n,t,r),s=so(null,s,n,!0,a,r)):(s.tag=0,st&&a&&Ko(s),Tt(null,s,l,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Ml(t,s),t=s.pendingProps,l=n._init,n=l(n._payload),s.type=n,l=s.tag=Rg(n),t=es(n,t),l){case 0:s=to(null,s,n,t,r);break e;case 1:s=Bm(null,s,n,t,r);break e;case 11:s=Rm(null,s,n,t,r);break e;case 14:s=Lm(null,s,n,es(n.type,t),r);break e}throw Error(se(306,n,""))}return s;case 0:return n=s.type,l=s.pendingProps,l=s.elementType===n?l:es(n,l),to(t,s,n,l,r);case 1:return n=s.type,l=s.pendingProps,l=s.elementType===n?l:es(n,l),Bm(t,s,n,l,r);case 3:e:{if(pf(s),t===null)throw Error(se(387));n=s.pendingProps,a=s.memoizedState,l=a.element,Mh(t,s),na(s,n,null,r);var i=s.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=a,s.memoizedState=a,s.flags&256){l=tn(Error(se(423)),s),s=Pm(t,s,n,r,l);break e}else if(n!==l){l=tn(Error(se(424)),s),s=Pm(t,s,n,r,l);break e}else for(Ft=$s(s.stateNode.containerInfo.firstChild),Ut=s,st=!0,ss=null,r=Oh(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xr(),n===l){s=Ts(t,s,r);break e}Tt(t,s,n,r)}s=s.child}return s;case 5:return Fh(s),t===null&&Qi(s),n=s.type,l=s.pendingProps,a=t!==null?t.memoizedProps:null,i=l.children,qi(n,l)?i=null:a!==null&&qi(n,a)&&(s.flags|=32),mf(t,s),Tt(t,s,i,r),s.child;case 6:return t===null&&Qi(s),null;case 13:return hf(t,s,r);case 4:return Qo(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=Zr(s,null,n,r):Tt(t,s,n,r),s.child;case 11:return n=s.type,l=s.pendingProps,l=s.elementType===n?l:es(n,l),Rm(t,s,n,l,r);case 7:return Tt(t,s,s.pendingProps,r),s.child;case 8:return Tt(t,s,s.pendingProps.children,r),s.child;case 12:return Tt(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,l=s.pendingProps,a=s.memoizedProps,i=l.value,Ye(sa,n._currentValue),n._currentValue=i,a!==null)if(as(a.value,i)){if(a.children===l.children&&!Lt.current){s=Ts(t,s,r);break e}}else for(a=s.child,a!==null&&(a.return=s);a!==null;){var c=a.dependencies;if(c!==null){i=a.child;for(var u=c.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=Ss(-1,r&-r),u.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var v=f.pending;v===null?u.next=u:(u.next=v.next,v.next=u),f.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),Ji(a.return,r,s),c.lanes|=r;break}u=u.next}}else if(a.tag===10)i=a.type===s.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(se(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ji(i,r,s),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===s){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Tt(t,s,l.children,r),s=s.child}return s;case 9:return l=s.type,n=s.pendingProps.children,Yr(s,r),l=Jt(l),n=n(l),s.flags|=1,Tt(t,s,n,r),s.child;case 14:return n=s.type,l=es(n,s.pendingProps),l=es(n.type,l),Lm(t,s,n,l,r);case 15:return df(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,l=s.pendingProps,l=s.elementType===n?l:es(n,l),Ml(t,s),s.tag=1,Bt(n)?(t=!0,Zl(s)):t=!1,Yr(s,r),af(s,n,l),Zi(s,n,l,r),so(null,s,n,!0,t,r);case 19:return ff(t,s,r);case 22:return uf(t,s,r)}throw Error(se(156,s.tag))};function If(t,s){return rh(t,s)}function Ag(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,s,r,n){return new Ag(t,s,r,n)}function uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rg(t){if(typeof t=="function")return uc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eo)return 11;if(t===Io)return 14}return 2}function Ys(t,s){var r=t.alternate;return r===null?(r=Yt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Kl(t,s,r,n,l,a){var i=2;if(n=t,typeof t=="function")uc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Rr:return pr(r.children,l,a,s);case Do:i=8,l|=8;break;case Si:return t=Yt(12,r,s,l|2),t.elementType=Si,t.lanes=a,t;case ki:return t=Yt(13,r,s,l),t.elementType=ki,t.lanes=a,t;case Ci:return t=Yt(19,r,s,l),t.elementType=Ci,t.lanes=a,t;case Fp:return wa(r,l,a,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _p:i=10;break e;case Mp:i=9;break e;case Eo:i=11;break e;case Io:i=14;break e;case Ls:i=16,n=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return s=Yt(i,r,s,l),s.elementType=t,s.type=n,s.lanes=a,s}function pr(t,s,r,n){return t=Yt(7,t,n,s),t.lanes=r,t}function wa(t,s,r,n){return t=Yt(22,t,n,s),t.elementType=Fp,t.lanes=r,t.stateNode={isHidden:!1},t}function di(t,s,r){return t=Yt(6,t,null,s),t.lanes=r,t}function ui(t,s,r){return s=Yt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Lg(t,s,r,n,l){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=n,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function mc(t,s,r,n,l,a,i,c,u){return t=new Lg(t,s,r,c,u),s===1?(s=1,a===!0&&(s|=8)):s=0,a=Yt(3,null,null,s),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Go(a),t}function Bg(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function Af(t){if(!t)return Js;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(se(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Bt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(se(171))}if(t.tag===1){var r=t.type;if(Bt(r))return Ih(t,r,s)}return s}function Rf(t,s,r,n,l,a,i,c,u){return t=mc(r,n,!0,t,l,a,i,c,u),t.context=Af(null),r=t.current,n=zt(),l=Vs(r),a=Ss(n,l),a.callback=s??null,qs(r,a,l),t.current.lanes=l,al(t,l,n),Pt(t,n),t}function Ta(t,s,r,n){var l=s.current,a=zt(),i=Vs(l);return r=Af(r),s.context===null?s.context=r:s.pendingContext=r,s=Ss(a,i),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=qs(l,s,i),t!==null&&(ls(t,l,i,a),Pl(t,l,i)),i}function ma(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hm(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function pc(t,s){Hm(t,s),(t=t.alternate)&&Hm(t,s)}function Pg(){return null}var Lf=typeof reportError=="function"?reportError:function(t){console.error(t)};function hc(t){this._internalRoot=t}za.prototype.render=hc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(se(409));Ta(t,s,null,null)};za.prototype.unmount=hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;vr(function(){Ta(null,t,null,null)}),s[Cs]=null}};function za(t){this._internalRoot=t}za.prototype.unstable_scheduleHydration=function(t){if(t){var s=dh();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Ps.length&&s!==0&&s<Ps[r].priority;r++);Ps.splice(r,0,t),r===0&&mh(t)}};function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vm(){}function Og(t,s,r,n,l){if(l){if(typeof n=="function"){var a=n;n=function(){var f=ma(i);a.call(f)}}var i=Rf(s,n,t,0,null,!1,!1,"",Vm);return t._reactRootContainer=i,t[Cs]=i.current,Yn(t.nodeType===8?t.parentNode:t),vr(),i}for(;l=t.lastChild;)t.removeChild(l);if(typeof n=="function"){var c=n;n=function(){var f=ma(u);c.call(f)}}var u=mc(t,0,!1,null,null,!1,!1,"",Vm);return t._reactRootContainer=u,t[Cs]=u.current,Yn(t.nodeType===8?t.parentNode:t),vr(function(){Ta(s,u,r,n)}),u}function Ea(t,s,r,n,l){var a=r._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var c=l;l=function(){var u=ma(i);c.call(u)}}Ta(s,i,t,l)}else i=Og(r,s,t,l,n);return ma(i)}oh=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Tn(s.pendingLanes);r!==0&&(Lo(s,r|1),Pt(s,ot()),!(Re&6)&&(sn=ot()+500,er()))}break;case 13:vr(function(){var n=ws(t,1);if(n!==null){var l=zt();ls(n,t,1,l)}}),pc(t,1)}};Bo=function(t){if(t.tag===13){var s=ws(t,134217728);if(s!==null){var r=zt();ls(s,t,134217728,r)}pc(t,134217728)}};ch=function(t){if(t.tag===13){var s=Vs(t),r=ws(t,s);if(r!==null){var n=zt();ls(r,t,s,n)}pc(t,s)}};dh=function(){return We};uh=function(t,s){var r=We;try{return We=t,s()}finally{We=r}};Bi=function(t,s,r){switch(s){case"input":if(zi(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var l=ja(n);if(!l)throw Error(se(90));Kp(n),zi(n,l)}}}break;case"textarea":$p(t,r);break;case"select":s=r.value,s!=null&&$r(t,!!r.multiple,s,!1)}};Jp=oc;Xp=vr;var _g={usingClientEntryPoint:!1,Events:[ol,Or,ja,Gp,Qp,oc]},jn={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mg={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=th(t),t===null?null:t.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||Pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{ya=Tl.inject(Mg),fs=Tl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g;Wt.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fc(s))throw Error(se(200));return Bg(t,s,null,r)};Wt.createRoot=function(t,s){if(!fc(t))throw Error(se(299));var r=!1,n="",l=Lf;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=mc(t,1,!1,null,null,r,!1,n,l),t[Cs]=s.current,Yn(t.nodeType===8?t.parentNode:t),new hc(s)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=th(s),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return vr(t)};Wt.hydrate=function(t,s,r){if(!Da(s))throw Error(se(200));return Ea(null,t,s,!0,r)};Wt.hydrateRoot=function(t,s,r){if(!fc(t))throw Error(se(405));var n=r!=null&&r.hydratedSources||null,l=!1,a="",i=Lf;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=Rf(s,null,t,1,r??null,l,!1,a,i),t[Cs]=s.current,Yn(t),n)for(t=0;t<n.length;t++)r=n[t],l=r._getVersion,l=l(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,l]:s.mutableSourceEagerHydrationData.push(r,l);return new za(s)};Wt.render=function(t,s,r){if(!Da(s))throw Error(se(200));return Ea(null,t,s,!1,r)};Wt.unmountComponentAtNode=function(t){if(!Da(t))throw Error(se(40));return t._reactRootContainer?(vr(function(){Ea(null,null,t,!1,function(){t._reactRootContainer=null,t[Cs]=null})}),!0):!1};Wt.unstable_batchedUpdates=oc;Wt.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!Da(r))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Ea(t,s,r,!1,n)};Wt.version="18.3.1-next-f1338f8080-20240426";function Bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bf)}catch(t){console.error(t)}}Bf(),Lp.exports=Wt;var Fg=Lp.exports,Ym=Fg;Ni.createRoot=Ym.createRoot,Ni.hydrateRoot=Ym.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rl.apply(this,arguments)}var Fs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fs||(Fs={}));const Gm="popstate";function Ug(t){t===void 0&&(t={});function s(n,l){let{pathname:a,search:i,hash:c}=n.location;return fo("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:pa(l)}return Wg(s,r,null,t)}function ct(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function yc(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Kg(){return Math.random().toString(36).substr(2,8)}function Qm(t,s){return{usr:t.state,key:t.key,idx:s}}function fo(t,s,r,n){return r===void 0&&(r=null),rl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?an(s):s,{state:r,key:s&&s.key||n||Kg()})}function pa(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function an(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function Wg(t,s,r,n){n===void 0&&(n={});let{window:l=document.defaultView,v5Compat:a=!1}=n,i=l.history,c=Fs.Pop,u=null,f=v();f==null&&(f=0,i.replaceState(rl({},i.state,{idx:f}),""));function v(){return(i.state||{idx:null}).idx}function S(){c=Fs.Pop;let C=v(),y=C==null?null:C-f;f=C,u&&u({action:c,location:A.location,delta:y})}function k(C,y){c=Fs.Push;let m=fo(A.location,C,y);f=v()+1;let j=Qm(m,f),z=A.createHref(m);try{i.pushState(j,"",z)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;l.location.assign(z)}a&&u&&u({action:c,location:A.location,delta:1})}function R(C,y){c=Fs.Replace;let m=fo(A.location,C,y);f=v();let j=Qm(m,f),z=A.createHref(m);i.replaceState(j,"",z),a&&u&&u({action:c,location:A.location,delta:0})}function w(C){let y=l.location.origin!=="null"?l.location.origin:l.location.href,m=typeof C=="string"?C:pa(C);return m=m.replace(/ $/,"%20"),ct(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let A={get action(){return c},get location(){return t(l,i)},listen(C){if(u)throw new Error("A history only accepts one active listener");return l.addEventListener(Gm,S),u=C,()=>{l.removeEventListener(Gm,S),u=null}},createHref(C){return s(l,C)},createURL:w,encodeLocation(C){let y=w(C);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:k,replace:R,go(C){return i.go(C)}};return A}var Jm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jm||(Jm={}));function $g(t,s,r){return r===void 0&&(r="/"),qg(t,s,r)}function qg(t,s,r,n){let l=typeof s=="string"?an(s):s,a=xc(l.pathname||"/",r);if(a==null)return null;let i=Pf(t);Hg(i);let c=null;for(let u=0;c==null&&u<i.length;++u){let f=nv(a);c=tv(i[u],f)}return c}function Pf(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let l=(a,i,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};u.relativePath.startsWith("/")&&(ct(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let f=Gs([n,u.relativePath]),v=r.concat(u);a.children&&a.children.length>0&&(ct(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Pf(a.children,s,v,f)),!(a.path==null&&!a.index)&&s.push({path:f,score:Zg(f,a.index),routesMeta:v})};return t.forEach((a,i)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))l(a,i);else for(let u of Of(a.path))l(a,i,u)}),s}function Of(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,l=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return l?[a,""]:[a];let i=Of(n.join("/")),c=[];return c.push(...i.map(u=>u===""?a:[a,u].join("/"))),l&&c.push(...i),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Hg(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:ev(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Vg=/^:[\w-]+$/,Yg=3,Gg=2,Qg=1,Jg=10,Xg=-2,Xm=t=>t==="*";function Zg(t,s){let r=t.split("/"),n=r.length;return r.some(Xm)&&(n+=Xg),s&&(n+=Gg),r.filter(l=>!Xm(l)).reduce((l,a)=>l+(Vg.test(a)?Yg:a===""?Qg:Jg),n)}function ev(t,s){return t.length===s.length&&t.slice(0,-1).every((n,l)=>n===s[l])?t[t.length-1]-s[s.length-1]:0}function tv(t,s,r){let{routesMeta:n}=t,l={},a="/",i=[];for(let c=0;c<n.length;++c){let u=n[c],f=c===n.length-1,v=a==="/"?s:s.slice(a.length)||"/",S=sv({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},v),k=u.route;if(!S)return null;Object.assign(l,S.params),i.push({params:l,pathname:Gs([a,S.pathname]),pathnameBase:cv(Gs([a,S.pathnameBase])),route:k}),S.pathnameBase!=="/"&&(a=Gs([a,S.pathnameBase]))}return i}function sv(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=rv(t.path,t.caseSensitive,t.end),l=s.match(r);if(!l)return null;let a=l[0],i=a.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:n.reduce((f,v,S)=>{let{paramName:k,isOptional:R}=v;if(k==="*"){let A=c[S]||"";i=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const w=c[S];return R&&!w?f[k]=void 0:f[k]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:i,pattern:t}}function rv(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),yc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,s?void 0:"i"),n]}function nv(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return yc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function xc(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const lv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,av=t=>lv.test(t);function iv(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:l=""}=typeof t=="string"?an(t):t,a;if(r)if(av(r))a=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),yc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?a=Zm(r.substring(1),"/"):a=Zm(r,s)}else a=s;return{pathname:a,search:dv(n),hash:uv(l)}}function Zm(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function mi(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ov(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function gc(t,s){let r=ov(t);return s?r.map((n,l)=>l===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function vc(t,s,r,n){n===void 0&&(n=!1);let l;typeof t=="string"?l=an(t):(l=rl({},t),ct(!l.pathname||!l.pathname.includes("?"),mi("?","pathname","search",l)),ct(!l.pathname||!l.pathname.includes("#"),mi("#","pathname","hash",l)),ct(!l.search||!l.search.includes("#"),mi("#","search","hash",l)));let a=t===""||l.pathname==="",i=a?"/":l.pathname,c;if(i==null)c=r;else{let S=s.length-1;if(!n&&i.startsWith("..")){let k=i.split("/");for(;k[0]==="..";)k.shift(),S-=1;l.pathname=k.join("/")}c=S>=0?s[S]:"/"}let u=iv(l,c),f=i&&i!=="/"&&i.endsWith("/"),v=(a||i===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(f||v)&&(u.pathname+="/"),u}const Gs=t=>t.join("/").replace(/\/\/+/g,"/"),cv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _f=["post","put","patch","delete"];new Set(_f);const pv=["get",..._f];new Set(pv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nl.apply(this,arguments)}const jc=d.createContext(null),hv=d.createContext(null),tr=d.createContext(null),Ia=d.createContext(null),Ds=d.createContext({outlet:null,matches:[],isDataRoute:!1}),Mf=d.createContext(null);function fv(t,s){let{relative:r}=s===void 0?{}:s;on()||ct(!1);let{basename:n,navigator:l}=d.useContext(tr),{hash:a,pathname:i,search:c}=Uf(t,{relative:r}),u=i;return n!=="/"&&(u=i==="/"?n:Gs([n,i])),l.createHref({pathname:u,search:c,hash:a})}function on(){return d.useContext(Ia)!=null}function br(){return on()||ct(!1),d.useContext(Ia).location}function Ff(t){d.useContext(tr).static||d.useLayoutEffect(t)}function Nc(){let{isDataRoute:t}=d.useContext(Ds);return t?Ev():yv()}function yv(){on()||ct(!1);let t=d.useContext(jc),{basename:s,future:r,navigator:n}=d.useContext(tr),{matches:l}=d.useContext(Ds),{pathname:a}=br(),i=JSON.stringify(gc(l,r.v7_relativeSplatPath)),c=d.useRef(!1);return Ff(()=>{c.current=!0}),d.useCallback(function(f,v){if(v===void 0&&(v={}),!c.current)return;if(typeof f=="number"){n.go(f);return}let S=vc(f,JSON.parse(i),a,v.relative==="path");t==null&&s!=="/"&&(S.pathname=S.pathname==="/"?s:Gs([s,S.pathname])),(v.replace?n.replace:n.push)(S,v.state,v)},[s,n,i,a,t])}const xv=d.createContext(null);function gv(t){let s=d.useContext(Ds).outlet;return s&&d.createElement(xv.Provider,{value:t},s)}function Uf(t,s){let{relative:r}=s===void 0?{}:s,{future:n}=d.useContext(tr),{matches:l}=d.useContext(Ds),{pathname:a}=br(),i=JSON.stringify(gc(l,n.v7_relativeSplatPath));return d.useMemo(()=>vc(t,JSON.parse(i),a,r==="path"),[t,i,a,r])}function vv(t,s){return jv(t,s)}function jv(t,s,r,n){on()||ct(!1);let{navigator:l}=d.useContext(tr),{matches:a}=d.useContext(Ds),i=a[a.length-1],c=i?i.params:{};i&&i.pathname;let u=i?i.pathnameBase:"/";i&&i.route;let f=br(),v;if(s){var S;let C=typeof s=="string"?an(s):s;u==="/"||(S=C.pathname)!=null&&S.startsWith(u)||ct(!1),v=C}else v=f;let k=v.pathname||"/",R=k;if(u!=="/"){let C=u.replace(/^\//,"").split("/");R="/"+k.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=$g(t,{pathname:R}),A=Cv(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Gs([u,l.encodeLocation?l.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:Gs([u,l.encodeLocation?l.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,r,n);return s&&A?d.createElement(Ia.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Fs.Pop}},A):A}function Nv(){let t=Dv(),s=mv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},s),r?d.createElement("pre",{style:l},r):null,null)}const bv=d.createElement(Nv,null);class Sv extends d.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?d.createElement(Ds.Provider,{value:this.props.routeContext},d.createElement(Mf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kv(t){let{routeContext:s,match:r,children:n}=t,l=d.useContext(jc);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(Ds.Provider,{value:s},n)}function Cv(t,s,r,n){var l;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,c=(l=r)==null?void 0:l.errors;if(c!=null){let v=i.findIndex(S=>S.route.id&&(c==null?void 0:c[S.route.id])!==void 0);v>=0||ct(!1),i=i.slice(0,Math.min(i.length,v+1))}let u=!1,f=-1;if(r&&n&&n.v7_partialHydration)for(let v=0;v<i.length;v++){let S=i[v];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(f=v),S.route.id){let{loaderData:k,errors:R}=r,w=S.route.loader&&k[S.route.id]===void 0&&(!R||R[S.route.id]===void 0);if(S.route.lazy||w){u=!0,f>=0?i=i.slice(0,f+1):i=[i[0]];break}}}return i.reduceRight((v,S,k)=>{let R,w=!1,A=null,C=null;r&&(R=c&&S.route.id?c[S.route.id]:void 0,A=S.route.errorElement||bv,u&&(f<0&&k===0?(Iv("route-fallback"),w=!0,C=null):f===k&&(w=!0,C=S.route.hydrateFallbackElement||null)));let y=s.concat(i.slice(0,k+1)),m=()=>{let j;return R?j=A:w?j=C:S.route.Component?j=d.createElement(S.route.Component,null):S.route.element?j=S.route.element:j=v,d.createElement(kv,{match:S,routeContext:{outlet:v,matches:y,isDataRoute:r!=null},children:j})};return r&&(S.route.ErrorBoundary||S.route.errorElement||k===0)?d.createElement(Sv,{location:r.location,revalidation:r.revalidation,component:A,error:R,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var Kf=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Kf||{}),Wf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wf||{});function wv(t){let s=d.useContext(jc);return s||ct(!1),s}function Tv(t){let s=d.useContext(hv);return s||ct(!1),s}function zv(t){let s=d.useContext(Ds);return s||ct(!1),s}function $f(t){let s=zv(),r=s.matches[s.matches.length-1];return r.route.id||ct(!1),r.route.id}function Dv(){var t;let s=d.useContext(Mf),r=Tv(),n=$f();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function Ev(){let{router:t}=wv(Kf.UseNavigateStable),s=$f(Wf.UseNavigateStable),r=d.useRef(!1);return Ff(()=>{r.current=!0}),d.useCallback(function(l,a){a===void 0&&(a={}),r.current&&(typeof l=="number"?t.navigate(l):t.navigate(l,nl({fromRouteId:s},a)))},[t,s])}const ep={};function Iv(t,s,r){ep[t]||(ep[t]=!0)}function Av(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zl(t){let{to:s,replace:r,state:n,relative:l}=t;on()||ct(!1);let{future:a,static:i}=d.useContext(tr),{matches:c}=d.useContext(Ds),{pathname:u}=br(),f=Nc(),v=vc(s,gc(c,a.v7_relativeSplatPath),u,l==="path"),S=JSON.stringify(v);return d.useEffect(()=>f(JSON.parse(S),{replace:r,state:n,relative:l}),[f,S,l,r,n]),null}function Rv(t){return gv(t.context)}function ke(t){ct(!1)}function Lv(t){let{basename:s="/",children:r=null,location:n,navigationType:l=Fs.Pop,navigator:a,static:i=!1,future:c}=t;on()&&ct(!1);let u=s.replace(/^\/*/,"/"),f=d.useMemo(()=>({basename:u,navigator:a,static:i,future:nl({v7_relativeSplatPath:!1},c)}),[u,c,a,i]);typeof n=="string"&&(n=an(n));let{pathname:v="/",search:S="",hash:k="",state:R=null,key:w="default"}=n,A=d.useMemo(()=>{let C=xc(v,u);return C==null?null:{location:{pathname:C,search:S,hash:k,state:R,key:w},navigationType:l}},[u,v,S,k,R,w,l]);return A==null?null:d.createElement(tr.Provider,{value:f},d.createElement(Ia.Provider,{children:r,value:A}))}function Bv(t){let{children:s,location:r}=t;return vv(yo(s),r)}new Promise(()=>{});function yo(t,s){s===void 0&&(s=[]);let r=[];return d.Children.forEach(t,(n,l)=>{if(!d.isValidElement(n))return;let a=[...s,l];if(n.type===d.Fragment){r.push.apply(r,yo(n.props.children,a));return}n.type!==ke&&ct(!1),!n.props.index||!n.props.children||ct(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=yo(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xo(){return xo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xo.apply(this,arguments)}function Pv(t,s){if(t==null)return{};var r={},n=Object.keys(t),l,a;for(a=0;a<n.length;a++)l=n[a],!(s.indexOf(l)>=0)&&(r[l]=t[l]);return r}function Ov(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _v(t,s){return t.button===0&&(!s||s==="_self")&&!Ov(t)}const Mv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fv="6";try{window.__reactRouterVersion=Fv}catch{}const Uv="startTransition",tp=Dy[Uv];function Kv(t){let{basename:s,children:r,future:n,window:l}=t,a=d.useRef();a.current==null&&(a.current=Ug({window:l,v5Compat:!0}));let i=a.current,[c,u]=d.useState({action:i.action,location:i.location}),{v7_startTransition:f}=n||{},v=d.useCallback(S=>{f&&tp?tp(()=>u(S)):u(S)},[u,f]);return d.useLayoutEffect(()=>i.listen(v),[i,v]),d.useEffect(()=>Av(n),[n]),d.createElement(Lv,{basename:s,children:r,location:c.location,navigationType:c.action,navigator:i,future:n})}const Wv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ps=d.forwardRef(function(s,r){let{onClick:n,relative:l,reloadDocument:a,replace:i,state:c,target:u,to:f,preventScrollReset:v,viewTransition:S}=s,k=Pv(s,Mv),{basename:R}=d.useContext(tr),w,A=!1;if(typeof f=="string"&&$v.test(f)&&(w=f,Wv))try{let j=new URL(window.location.href),z=f.startsWith("//")?new URL(j.protocol+f):new URL(f),P=xc(z.pathname,R);z.origin===j.origin&&P!=null?f=P+z.search+z.hash:A=!0}catch{}let C=fv(f,{relative:l}),y=qv(f,{replace:i,state:c,target:u,preventScrollReset:v,relative:l,viewTransition:S});function m(j){n&&n(j),j.defaultPrevented||y(j)}return d.createElement("a",xo({},k,{href:w||C,onClick:A||a?n:m,ref:r,target:u}))});var sp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sp||(sp={}));var rp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rp||(rp={}));function qv(t,s){let{target:r,replace:n,state:l,preventScrollReset:a,relative:i,viewTransition:c}=s===void 0?{}:s,u=Nc(),f=br(),v=Uf(t,{relative:i});return d.useCallback(S=>{if(_v(S,r)){S.preventDefault();let k=n!==void 0?n:pa(f)===pa(v);u(t,{replace:k,state:l,preventScrollReset:a,relative:i,viewTransition:c})}},[f,u,v,n,l,r,t,a,i,c])}const bc=[{section:"Kontrol",items:[{icon:"",label:"Kontrol Paneli",path:"/dashboard"}]},{section:"Operasyon",items:[{icon:"",label:"ler",path:"/isler",collapsible:!0,children:[{label:" Listesi",path:"/isler/list"},{label:"Keif/l Takvimi",path:"/isler/takvim"},{label:"retim Plan",path:"/isler/uretim-plani"},{label:"Montaj/Sevkiyat",path:"/isler/montaj-sevkiyat"},{label:"retim Takip",path:"/isler/uretim-takip",icon:"",children:[{label:"Tm Sipariler",path:"/isler/uretim-takip/siparisler"},{label:" retim",path:"/isler/uretim-takip/ic-uretim"},{label:"D Sipariler",path:"/isler/uretim-takip/dis-siparis"},{label:"Cam Siparileri",path:"/isler/uretim-takip/cam"},{label:"Sorun Takip",path:"/isler/uretim-takip/sorunlar"}]}]},{icon:"",label:"Grevler",path:"/gorevler"},{icon:"",label:"Mteriler",path:"/musteriler"},{icon:"",label:"Planlama/Takvim",path:"/planlama"}]},{section:"Stok & Satnalma",items:[{icon:"",label:"Stok",path:"/stok",collapsible:!0,children:[{label:"Stok Listesi",path:"/stok/liste"},{label:"Stok Hareketleri",path:"/stok/hareketler"},{label:"Kritik Stok",path:"/stok/kritik"},{label:"Rezervasyonlar",path:"/stok/rezervasyonlar"},{label:"Renkler",path:"/stok/renkler"}]},{icon:"",label:"Satnalma",path:"/satinalma",collapsible:!0,children:[{label:"Sipariler (PO)",path:"/satinalma/siparisler"},{label:"Eksik rnler",path:"/satinalma/eksik"},{label:"Bekleyen Teslimatlar",path:"/satinalma/bekleyen"},{label:"Tedarikiler",path:"/satinalma/tedarikciler"}]}]},{section:"Finans & Evrak",items:[{icon:"",label:"rsaliye & Fatura",path:"/evrak/irsaliye-fatura"},{icon:"",label:"demeler/Kasa",path:"/finans/odemeler-kasa"}]},{section:"Dijital Ariv & Rapor",items:[{icon:"",label:"Dijital Ariv",path:"/arsiv"},{icon:"",label:"Raporlar",path:"/raporlar"}]},{section:"Sistem",items:[{icon:"",label:"Ayarlar",path:"/ayarlar"}]}],Gt=t=>{if(!t)return"/";const s=t.replace(/\/+$/,"");return s===""?"/":s},Hv=t=>{const s=Gt(t);let r=" Takip Paneli";return bc.forEach(n=>{n.items.forEach(l=>{Gt(l.path)===s&&(r=l.label),l.children&&l.children.forEach(a=>{Gt(a.path)===s&&(r=a.label),a.children&&a.children.forEach(i=>{Gt(i.path)===s&&(r=i.label)})})})}),r},Vv=()=>{const t=br(),s=d.useMemo(()=>Gt(t.pathname),[t.pathname]),[r,n]=d.useState(()=>localStorage.getItem("sidebarCollapsed")==="true"),[l,a]=d.useState(()=>{const c=localStorage.getItem("navOpenGroups");return c?JSON.parse(c):{}});d.useEffect(()=>{localStorage.setItem("sidebarCollapsed",r)},[r]),d.useEffect(()=>{localStorage.setItem("navOpenGroups",JSON.stringify(l))},[l]),d.useEffect(()=>{const c=Gv(s);c.length>0&&a(u=>{const f={...u};return c.forEach(v=>{f[v]=!0}),f})},[s]);const i=c=>{a(u=>({...u,[c]:!u[c]}))};return e.jsxs("aside",{className:`sidebar ${r?"collapsed":""}`,id:"sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("div",{className:"sidebar-logo-icon",children:"T"}),e.jsx("div",{className:"sidebar-logo-text",children:" Takip Paneli"})]}),e.jsx("button",{className:"sidebar-toggle",id:"sidebarToggle",type:"button",onClick:()=>n(c=>!c),"aria-label":"Kenar ubuunu klt",children:""})]}),e.jsx("nav",{className:"sidebar-nav",children:bc.map(c=>e.jsxs("div",{className:"nav-section",children:[e.jsx("div",{className:"nav-section-title",children:c.section}),c.items.map(u=>u.collapsible?e.jsx(qf,{item:u,openGroups:l,activePath:s,onToggle:i,level:1},u.path):e.jsx(Yv,{item:u,isActive:s===Gt(u.path)},u.path))]},c.section))})]})},Yv=({item:t,isActive:s})=>e.jsx("div",{className:"nav-item",children:e.jsxs(ps,{to:t.path,className:`nav-link ${s?"active":""}`,"aria-current":s?"page":void 0,children:[e.jsx("span",{className:"nav-link-icon",children:t.icon}),e.jsx("span",{className:"nav-link-text",children:t.label})]})}),qf=({item:t,openGroups:s,activePath:r,onToggle:n,level:l=1})=>{var f;const a=Gt(t.path)===r,i=Hf(t,r),u=s[t.path]||i||a;return e.jsxs("div",{className:`nav-collapsible ${u?"open":""}`,style:{marginLeft:l>1?8:0},children:[e.jsxs("button",{type:"button",className:`nav-collapsible-trigger ${a?"active":""}`,onClick:()=>n(t.path),"aria-expanded":u,style:{paddingLeft:l>1?24:void 0},children:[e.jsx("span",{className:"nav-collapsible-icon",children:t.icon||(l>1?"":"")}),e.jsx("span",{className:"nav-collapsible-text",children:t.label}),e.jsx("span",{className:"nav-collapsible-arrow",children:""})]}),u&&e.jsx("div",{className:"nav-collapsible-content",children:(f=t.children)==null?void 0:f.map(v=>{if(v.children&&v.children.length>0)return e.jsx(qf,{item:v,openGroups:s,activePath:r,onToggle:n,level:l+1},v.path);const S=Gt(v.path)===r;return e.jsx("div",{className:"nav-item",children:e.jsxs(ps,{to:v.path,className:`nav-link ${S?"active":""}`,"aria-current":S?"page":void 0,style:{paddingLeft:l>1?32:void 0},children:[e.jsx("span",{className:"nav-link-icon",children:l>1?"":""}),e.jsx("span",{className:"nav-link-text",children:v.label})]})},v.path)})})]})},Hf=(t,s)=>{if(!t.children)return!1;for(const r of t.children)if(Gt(r.path)===s||r.children&&Hf(r,s))return!0;return!1},Gv=t=>{const s=Gt(t),r=[];return bc.forEach(n=>{n.items.forEach(l=>{l.children&&l.children.forEach(a=>{Gt(a.path)===s&&r.push(l.path),a.children&&a.children.forEach(i=>{Gt(i.path)===s&&(r.push(l.path),r.push(a.path))})})})}),r},Qv=({title:t})=>{const[s,r]=d.useState("");return e.jsxs("header",{className:"topbar",children:[e.jsx("div",{className:"topbar-left",children:e.jsx("h1",{className:"topbar-title",children:t})}),e.jsxs("div",{className:"topbar-right",children:[e.jsxs("div",{className:"topbar-search",children:[e.jsx("span",{className:"topbar-search-icon",children:""}),e.jsx("input",{type:"search",placeholder:"Ara...",value:s,onChange:n=>r(n.target.value),"aria-label":"Uygulama ii arama"})]}),e.jsxs("button",{className:"topbar-user",type:"button",children:[e.jsx("div",{className:"topbar-user-avatar",children:"BA"}),e.jsxs("div",{className:"topbar-user-info",children:[e.jsx("div",{className:"topbar-user-name",children:"Batuhan"}),e.jsx("div",{className:"topbar-user-role",children:"Ynetici"})]})]})]})]})},Jv=()=>{const t=br(),s=Hv(t.pathname);return e.jsxs("div",{id:"app",children:[e.jsx(Vv,{}),e.jsxs("div",{className:"main-content",children:[e.jsx(Qv,{title:s}),e.jsx("main",{className:"page-content",children:e.jsx(Rv,{})})]})]})},Dt=({size:t="medium",text:s,fullscreen:r=!1,overlay:n=!1})=>{const l={small:"loader-small",medium:"loader-medium",large:"loader-large"},a=e.jsxs("div",{className:`loader-spinner ${l[t]||l.medium}`,children:[e.jsxs("div",{className:"loader-ring",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]}),s&&e.jsx("div",{className:"loader-text",children:s})]});return r?e.jsx("div",{className:"loader-fullscreen",children:a}):n?e.jsx("div",{className:"loader-overlay",children:a}):e.jsx("div",{className:"loader-container",children:a})},Ie=({open:t,isOpen:s,title:r,children:n,actions:l,onClose:a,size:i="medium"})=>t||s?e.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-label":r||"Dialog",children:e.jsxs("div",{className:`modal modal-${i}`,onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:r}),e.jsx("button",{className:"modal-close",type:"button",onClick:a,"aria-label":"Kapat",children:""})]}),e.jsx("div",{className:"modal-body",children:n}),l?e.jsx("div",{className:"modal-footer",children:l}):null]})}):null,Fe=({title:t,subtitle:s,actions:r})=>e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-header-top",children:[e.jsx("h2",{className:"page-title",children:t}),r?e.jsx("div",{className:"page-actions",children:r}):null]}),s?e.jsx("p",{className:"page-subtitle",children:s}):null]}),Sc="http://localhost:8000",Xv="/data/mockData.json";let xs=null,Nn=null;const Ot=async()=>xs||Nn||(Nn=fetch(Xv).then(async t=>{if(!t.ok)throw new Error("rnek veri alnamad");const s=await t.json();return xs=s,s}),Nn.finally(()=>{Nn=null})),Zv=t=>t?typeof t=="string"?t:Array.isArray(t)?t.map(r=>{var u;const n=((u=r.loc)==null?void 0:u.slice(-1)[0])||"alan",a={productCode:"rn Kodu",colorCode:"Renk Kodu",name:"rn Ad",unit:"Birim",supplierId:"Tedariki",supplierName:"Tedariki Ad",qty:"Miktar",quantity:"Miktar",itemId:"rn",critical:"Kritik Seviye"}[n]||n,c={"value_error.missing":"gerekli","type_error.none.not_allowed":"bo olamaz","type_error.integer":"say olmal","type_error.float":"say olmal","type_error.string":"metin olmal"}[r.type]||r.msg||"hatal";return`${a} ${c}`}).join(", "):String(t):"Bilinmeyen hata",ge=async(t,s={})=>{const r=await fetch(`${Sc}${t}`,{headers:{"Content-Type":"application/json"},...s});if(!r.ok){const n=await r.json().catch(()=>({})),l=Zv(n.detail)||r.statusText;throw new Error(l)}return r.json()},ej=async()=>{const t=await Ot();return{stats:t.stats,activities:t.activities,priorityJobs:t.priorityJobs,weekOverview:t.weekOverview,paymentStatus:t.paymentStatus,teamStatus:t.teamStatus}},Sr=async()=>ge("/jobs"),tj=async t=>ge(`/jobs/${t}`),Vf=async t=>ge("/jobs",{method:"POST",body:JSON.stringify(t)}),sj=async(t,s)=>ge(`/jobs/${t}/measure`,{method:"PUT",body:JSON.stringify(s)}),rj=async(t,s)=>ge(`/jobs/${t}/approval/start`,{method:"POST",body:JSON.stringify(s)}),np=async(t,s)=>ge(`/jobs/${t}/approval/payment`,{method:"PUT",body:JSON.stringify({paymentPlan:s})}),pi=async(t,s)=>ge(`/jobs/${t}/stock`,{method:"PUT",body:JSON.stringify(s)}),nj=async(t,s)=>ge(`/jobs/${t}/production`,{method:"PUT",body:JSON.stringify(s)}),lj=async(t,s)=>ge(`/jobs/${t}/assembly/schedule`,{method:"PUT",body:JSON.stringify(s)}),aj=async(t,s)=>ge(`/jobs/${t}/assembly/complete`,{method:"PUT",body:JSON.stringify(s)}),ij=async(t,s)=>ge(`/jobs/${t}/finance/close`,{method:"PUT",body:JSON.stringify(s)}),oj=async()=>(await Ot()).tasks||[],Aa=async()=>ge("/customers"),kc=async t=>ge("/customers",{method:"POST",body:JSON.stringify(t)}),cj=async(t,s)=>ge(`/customers/${t}`,{method:"PUT",body:JSON.stringify(s)}),dj=async t=>ge(`/customers/${t}`,{method:"DELETE"}),Yf=async()=>(await Ot()).planningEvents||[],dl=async()=>{try{return await ge("/stock/items")}catch(t){return console.warn("API stock items failed, falling back to mock",t),(await Ot()).stockItems||[]}},uj=async t=>ge("/stock/items",{method:"POST",body:JSON.stringify(t)}),mj=async(t,s)=>ge(`/stock/items/${t}`,{method:"PUT",body:JSON.stringify(s)}),pj=async t=>ge(`/stock/items/${t}`,{method:"DELETE"}),lp=async t=>ge("/stock/movements",{method:"POST",body:JSON.stringify(t)}),Gf=async()=>{try{return await ge("/stock/movements")}catch{return(await Ot()).stockMovements||[]}},Qf=async()=>(await Ot()).reservations||[],ap=async t=>((await Ot()).jobLogs||[]).filter(r=>r.jobId===t),hj=async t=>{const s=await Ot(),r={id:t.id||`LOG-${Date.now()}`,jobId:t.jobId,action:t.action||"log",detail:t.detail||"",createdAt:t.createdAt||new Date().toISOString(),meta:t.meta||{}};return s.jobLogs=[r,...s.jobLogs||[]],xs=s,r},St=async(t,s)=>ge(`/jobs/${t}/status`,{method:"PUT",body:JSON.stringify(s)}),bn=(t,s)=>{if(!xs)return;const r=xs.jobs||[];xs.jobs=r.map(n=>n.id===t?{...n,...s}:n)},fj=(t,s=[])=>{if(!xs)return;const r={id:`PO-${Date.now()}`,supplier:"Sipari Bekleniyor",total:"0",status:"Beklemede",expectedDate:new Date(Date.now()+3*24*60*60*1e3).toISOString().slice(0,10),jobId:t,lines:s.map(n=>({name:n.name,qty:n.qty,sku:n.sku,color:n.color}))};return xs.purchaseOrders=[r,...xs.purchaseOrders||[]],r},yj=async()=>(await Ot()).jobRoles||[],Jf=async()=>ge("/colors/"),xj=async t=>ge("/colors/",{method:"POST",body:JSON.stringify(t)}),gj=async t=>ge(`/colors/${t}`,{method:"DELETE"}),vj=async()=>(await Ot()).purchaseOrders||[],jj=async()=>(await Ot()).suppliers||[],Nj=async()=>(await Ot()).invoices||[],bj=async()=>(await Ot()).reports||[],Xf=async(t=null,s=null)=>{let r="/documents";const n=new URLSearchParams;return t&&n.append("job_id",t),s&&n.append("doc_type",s),n.toString()&&(r+=`?${n.toString()}`),ge(r)},Sj=async t=>ge(`/documents/job/${t}`),kj=async(t,s,r,n="")=>{const l=new FormData;l.append("file",t),l.append("jobId",s),l.append("docType",r),n&&l.append("description",n);const a=await fetch(`${Sc}/documents/upload`,{method:"POST",body:l});if(!a.ok){const i=await a.json().catch(()=>({}));throw new Error(i.detail||"Dosya yklenemedi")}return a.json()},Zf=async t=>ge(`/documents/${t}`,{method:"DELETE"}),rs=t=>`${Sc}/documents/${t}/download`,ey=async(t="",s="")=>{const r=new URLSearchParams;return t&&r.append("productCode",t),s&&r.append("colorCode",s),ge(`/stock/items/search?${r.toString()}`)},Cj=async()=>ge("/stock/critical"),hi=async t=>ge("/stock/bulk-reserve",{method:"POST",body:JSON.stringify(t)}),Cc=async(t=null,s=null)=>{const r=new URLSearchParams;return t&&r.append("status",t),s&&r.append("supplierId",s),ge(`/purchase/orders?${r.toString()}`)},go=async t=>ge("/purchase/orders",{method:"POST",body:JSON.stringify(t)}),wj=async t=>ge(`/purchase/orders/${t}/send`,{method:"POST"}),Tj=async(t,s)=>ge(`/purchase/orders/${t}/receive`,{method:"POST",body:JSON.stringify(s)}),zj=async t=>ge(`/purchase/orders/${t}`,{method:"DELETE"}),wc=async()=>ge("/purchase/missing-items"),sr=async(t=null)=>{try{const s=t?`?type=${t}`:"";return await ge(`/suppliers/${s}`)}catch{return(await Ot()).suppliers||[]}},Dj=async t=>ge("/suppliers/",{method:"POST",body:JSON.stringify(t)}),Ej=async(t,s)=>ge(`/suppliers/${t}`,{method:"PUT",body:JSON.stringify(s)}),Ij=async t=>ge(`/suppliers/${t}`,{method:"DELETE"}),Aj=async(t,s=null)=>{const r=s?`?type=${s}`:"";return ge(`/suppliers/${t}/transactions${r}`)},Rj=async(t,s)=>ge(`/suppliers/${t}/transactions`,{method:"POST",body:JSON.stringify(s)}),ip=async t=>ge(`/suppliers/${t}/balance`),Lj=async(t={})=>{const s=new URLSearchParams;return t.jobId&&s.append("jobId",t.jobId),t.roleId&&s.append("roleId",t.roleId),t.orderType&&s.append("orderType",t.orderType),t.status&&s.append("status",t.status),t.supplierId&&s.append("supplierId",t.supplierId),t.overdue&&s.append("overdue","true"),ge(`/production?${s.toString()}`)},fi=async t=>ge(`/production/by-job/${t}`),vo=async t=>ge("/production",{method:"POST",body:JSON.stringify(t)}),Bj=async t=>ge(`/production/${t}`,{method:"DELETE"}),ty=async(t,s)=>ge(`/production/${t}/delivery`,{method:"POST",body:JSON.stringify(s)}),Pj=async(t,s,r)=>ge(`/production/${t}/issues/${s}/resolve`,{method:"POST",body:JSON.stringify(r)}),Oj=async()=>ge("/production/summary"),sy=async()=>ge("/production/alerts"),ry=async()=>ge("/production/combinations"),_j=async()=>ge("/settings"),Ra=async(t=!1)=>ge(`/settings/job-roles${t?"?active_only=true":""}`),Mj=async t=>ge("/settings/job-roles",{method:"POST",body:JSON.stringify(t)}),Fj=async(t,s)=>ge(`/settings/job-roles/${t}`,{method:"PUT",body:JSON.stringify(s)}),Uj=async t=>ge(`/settings/job-roles/${t}`,{method:"DELETE"}),Tc=async()=>ge("/settings/glass-types"),Kj=async t=>ge("/settings/glass-types",{method:"POST",body:JSON.stringify(t)}),Wj=async t=>ge(`/settings/glass-types/${t}`,{method:"DELETE"}),nr={olcu:{label:"l Tasla",icon:"",color:"#3b82f6"},teknik:{label:"Teknik izim",icon:"",color:"#8b5cf6"},sozlesme:{label:"Szleme",icon:"",color:"#10b981"},teklif:{label:"Teklif",icon:"",color:"#f59e0b"},diger:{label:"Dier",icon:"",color:"#6b7280"}},op=t=>{if(!t)return"-";try{return new Date(t).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return t}},$j=t=>{if(!t)return"-";const s=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,r)).toFixed(1)} ${s[r]}`},qj=()=>{var fe,H;const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState(""),[v,S]=d.useState("all"),[k,R]=d.useState("all"),[w,A]=d.useState(""),[C,y]=d.useState(""),[m,j]=d.useState(null),[z,P]=d.useState(!1);d.useEffect(()=>{(async()=>{try{a(!0),c("");const[E,ie]=await Promise.all([Xf(),Sr()]);s(E),n(ie)}catch(E){c(E.message||"Ariv alnamad")}finally{a(!1)}})()},[]);const W=$=>{const E=r.find(ie=>ie.id===$);return E?{title:E.title,customer:E.customerName}:{title:"-",customer:"-"}},G=d.useMemo(()=>t.filter($=>{var E,ie,J,ee,re;if(u){const N=u.toLowerCase(),x=W($.jobId);if(!(((E=$.originalName)==null?void 0:E.toLowerCase().includes(N))||((ie=$.filename)==null?void 0:ie.toLowerCase().includes(N))||((J=$.description)==null?void 0:J.toLowerCase().includes(N))||((ee=x.title)==null?void 0:ee.toLowerCase().includes(N))||((re=x.customer)==null?void 0:re.toLowerCase().includes(N))))return!1}if(v!=="all"&&$.type!==v||k!=="all"&&$.jobId!==k)return!1;if(w){const N=new Date($.uploadedAt),x=new Date(w);if(N<x)return!1}if(C){const N=new Date($.uploadedAt),x=new Date(C);if(x.setHours(23,59,59),N>x)return!1}return!0}),[t,u,v,k,w,C,r]),Q=d.useMemo(()=>{const $={};return Object.keys(nr).forEach(E=>$[E]=0),t.forEach(E=>{$[E.type]!==void 0?$[E.type]++:$.diger++}),{total:t.length,byType:$}},[t]),F=async $=>{if(window.confirm("Bu dkman silmek istediinize emin misiniz?"))try{P(!0),await Zf($),s(E=>E.filter(ie=>ie.id!==$)),j(null)}catch(E){alert(E.message||"Silinemedi")}finally{P(!1)}},b=()=>{f(""),S("all"),R("all"),A(""),y("")},Z=$=>$==null?void 0:$.startsWith("image/"),Se=$=>$==="application/pdf";return e.jsxs("div",{className:"container",children:[e.jsx(Fe,{title:"Dijital Ariv",subtitle:"Tm i dkmanlarn grntleyin ve ynetin"}),e.jsx("div",{className:"card",style:{marginBottom:16},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"grid grid-4",style:{gap:12,alignItems:"flex-end"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Ara"}),e.jsx("input",{className:"form-input",type:"text",placeholder:"Dosya ad, i, mteri...",value:u,onChange:$=>f($.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Kategori"}),e.jsxs("select",{className:"form-select",value:v,onChange:$=>S($.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),Object.entries(nr).map(([$,E])=>e.jsxs("option",{value:$,children:[E.icon," ",E.label]},$))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsxs("select",{className:"form-select",value:k,onChange:$=>R($.target.value),children:[e.jsx("option",{value:"all",children:"Tm ler"}),r.map($=>e.jsxs("option",{value:$.id,children:[$.title," - ",$.customerName]},$.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Tarih Aral"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{className:"form-input",type:"date",value:w,onChange:$=>A($.target.value),style:{flex:1}}),e.jsx("input",{className:"form-input",type:"date",value:C,onChange:$=>y($.target.value),style:{flex:1}})]})]})]}),(u||v!=="all"||k!=="all"||w||C)&&e.jsxs("div",{style:{marginTop:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{className:"text-muted",children:[G.length," / ",t.length," dkman gsteriliyor"]}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:b,children:" Filtreleri Temizle"})]})]})}),l?e.jsx(Dt,{text:"Dkmanlar ykleniyor..."}):i?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:i})]}):G.length===0?e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",style:{textAlign:"center",padding:48},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0"},children:"Dkman Bulunamad"}),e.jsx("p",{className:"text-muted",children:"Arama kriterlerinize uygun dkman yok."})]})}):e.jsx("div",{className:"card",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40}}),e.jsx("th",{children:"Dosya Ad"}),e.jsx("th",{children:"Kategori"}),e.jsx("th",{children:""}),e.jsx("th",{children:"Mteri"}),e.jsx("th",{children:"Boyut"}),e.jsx("th",{children:"Yklenme Tarihi"}),e.jsx("th",{style:{width:120},children:"lemler"})]})}),e.jsx("tbody",{children:G.map($=>{const E=nr[$.type]||nr.diger,ie=W($.jobId);return e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>j($),children:[e.jsx("td",{children:e.jsx("span",{style:{fontSize:20},children:E.icon})}),e.jsxs("td",{children:[e.jsx("strong",{children:$.originalName}),$.description&&e.jsx("div",{className:"text-muted",style:{fontSize:12},children:$.description})]}),e.jsx("td",{children:e.jsx("span",{className:"badge",style:{background:`${E.color}20`,color:E.color},children:E.label})}),e.jsx("td",{children:ie.title}),e.jsx("td",{children:ie.customer}),e.jsx("td",{className:"text-muted",children:$j($.size)}),e.jsx("td",{children:op($.uploadedAt)}),e.jsx("td",{onClick:J=>J.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("a",{href:rs($.id),target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-small",title:"ndir",children:""}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>j($),title:"nizle",children:""}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>F($.id),title:"Sil",children:""})]})})]},$.id)})})]})})}),!l&&t.length>0&&e.jsxs("div",{style:{marginTop:16,padding:"12px 16px",background:"var(--bg-secondary)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{className:"text-muted",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:Q.total})," toplam dkman"]}),e.jsx("span",{style:{color:"var(--border-color)"},children:"|"}),Object.entries(nr).map(([$,E])=>Q.byType[$]>0&&e.jsxs("span",{style:{color:E.color},children:[E.icon," ",Q.byType[$]," ",E.label]},$))]}),e.jsx("div",{className:"text-muted",style:{fontSize:12},children:G.length!==t.length&&e.jsxs("span",{children:[G.length," / ",t.length," gsteriliyor"]})})]}),e.jsx(Ie,{open:!!m,title:(m==null?void 0:m.originalName)||"Dkman nizleme",onClose:()=>j(null),size:"xlarge",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>j(null),children:"Kapat"}),m&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:rs(m.id),target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",children:" ndir"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>F(m.id),disabled:z,children:" Sil"})]})]}),children:m&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-4",style:{gap:16,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"Kategori"}),e.jsxs("div",{style:{fontWeight:600},children:[(fe=nr[m.type])==null?void 0:fe.icon," ",((H=nr[m.type])==null?void 0:H.label)||"Dier"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:""}),e.jsx("div",{style:{fontWeight:600},children:W(m.jobId).title})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"Mteri"}),e.jsx("div",{style:{fontWeight:600},children:W(m.jobId).customer})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"Yklenme Tarihi"}),e.jsx("div",{style:{fontWeight:600},children:op(m.uploadedAt)})]})]}),m.description&&e.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--bg-tertiary)",borderRadius:8},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12,marginBottom:4},children:"Aklama"}),e.jsx("div",{children:m.description})]}),e.jsx("div",{style:{border:"1px solid var(--border-color)",borderRadius:8,overflow:"hidden",minHeight:400},children:Z(m.mimeType)?e.jsx("img",{src:rs(m.id),alt:m.originalName,style:{width:"100%",height:"auto",display:"block"}}):Se(m.mimeType)?e.jsx("iframe",{src:rs(m.id),title:m.originalName,style:{width:"100%",height:600,border:"none"}}):e.jsxs("div",{style:{padding:48,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:64,marginBottom:16},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0"},children:"nizleme Mevcut Deil"}),e.jsx("p",{className:"text-muted",children:"Bu dosya tr iin nizleme desteklenmiyor."}),e.jsx("a",{href:rs(m.id),target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",style:{marginTop:16},children:" Dosyay ndir"})]})})]})})]})},hr=({value:t="",onChange:s,onSelect:r,options:n=[],onSearch:l,placeholder:a="Ara...",displayKey:i="name",valueKey:c="id",renderOption:u,allowCreate:f=!1,createLabel:v="Yeni ekle",onCreate:S,disabled:k=!1,required:R=!1,error:w="",label:A="",className:C="",inputClassName:y="",debounceMs:m=200,minChars:j=1,maxResults:z=10,autoFocus:P=!1,tabIndex:W=0})=>{const[G,Q]=d.useState(t),[F,b]=d.useState(!1),[Z,Se]=d.useState(-1),[fe,H]=d.useState([]),[$,E]=d.useState(!1),ie=d.useRef(null),J=d.useRef(null),ee=d.useRef(null);d.useEffect(()=>{Q(t)},[t]);const re=d.useCallback(async Y=>{if(!Y||Y.length<j){H([]),b(!1);return}E(!0);try{let ye;if(l)ye=await l(Y);else{const Pe=Y.toLowerCase();ye=n.filter(Te=>{const $e=typeof Te=="string"?Te:Te[i]||"",Ve=typeof Te=="string"?Te:String(Te[c]||"");return $e.toLowerCase().includes(Pe)||Ve.toLowerCase().includes(Pe)})}H(ye.slice(0,z)),b(ye.length>0||f&&Y.length>0),Se(-1)}catch(ye){console.error("Autocomplete search error:",ye),H([])}finally{E(!1)}},[n,l,i,c,j,z,f]),N=Y=>{const ye=Y.target.value;Q(ye),s==null||s(ye),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{re(ye)},m)},x=(Y,ye=!1)=>{const Pe=typeof Y=="string"?Y:Y[i]||"",Te=typeof Y=="string"?Y:Y[c]||"";if(Q(Te||Pe),b(!1),Se(-1),s==null||s(Te||Pe),r==null||r(Y,Te),ye&&ie.current){const $e=ie.current.closest("form");if($e){const Ve=Array.from($e.querySelectorAll("input, select, textarea, button")),Ue=Ve.indexOf(ie.current);Ue>=0&&Ue<Ve.length-1&&setTimeout(()=>{var _e;return(_e=Ve[Ue+1])==null?void 0:_e.focus()},10)}}},_=()=>{S&&G&&(S(G),b(!1))},q=Y=>{if(!(!F&&Y.key!=="ArrowDown"&&Y.key!=="Enter"))switch(Y.key){case"ArrowDown":if(Y.preventDefault(),!F&&G.length>=j)re(G);else{const ye=f?fe.length:fe.length-1;Se(Pe=>Math.min(Pe+1,ye))}break;case"ArrowUp":Y.preventDefault(),Se(ye=>Math.max(ye-1,-1));break;case"Enter":Y.preventDefault(),Z>=0&&Z<fe.length?x(fe[Z]):Z===fe.length&&f?_():fe.length===1&&x(fe[0]);break;case"Tab":F&&fe.length>0?Z>=0&&Z<fe.length?x(fe[Z],!0):fe.length===1?x(fe[0],!0):Z===fe.length&&f&&_():b(!1);break;case"Escape":b(!1),Se(-1);break}};d.useEffect(()=>{const Y=ye=>{ie.current&&!ie.current.contains(ye.target)&&J.current&&!J.current.contains(ye.target)&&b(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),d.useEffect(()=>{if(J.current&&Z>=0){const Y=J.current.querySelectorAll(".autocomplete-item");Y[Z]&&Y[Z].scrollIntoView({block:"nearest"})}},[Z]),d.useEffect(()=>()=>{ee.current&&clearTimeout(ee.current)},[]);const O=(Y,ye)=>{if(u)return u(Y,ye);const Pe=typeof Y=="string"?Y:Y[i]||"",Te=typeof Y=="string"?"":Y[c]||"";return e.jsxs("div",{className:"autocomplete-option-content",children:[e.jsx("span",{className:"autocomplete-option-value",children:Te}),e.jsx("span",{className:"autocomplete-option-label",children:Pe})]})};return e.jsxs("div",{className:`autocomplete-container ${C}`,children:[A&&e.jsxs("label",{className:"form-label",children:[A,R&&e.jsx("span",{style:{color:"var(--color-danger)"},children:" *"})]}),e.jsxs("div",{className:"autocomplete-input-wrapper",ref:ie,children:[e.jsx("input",{type:"text",className:`form-input ${y} ${w?"input-error":""}`,value:G,onChange:N,onKeyDown:q,onFocus:()=>{G.length>=j&&re(G)},placeholder:a,disabled:k,required:R,autoFocus:P,tabIndex:W,autoComplete:"off"}),$&&e.jsx("div",{className:"autocomplete-loading",children:e.jsx("span",{className:"spinner-small"})})]}),F&&e.jsxs("div",{className:"autocomplete-dropdown",ref:J,children:[fe.length>0?e.jsx(e.Fragment,{children:fe.map((Y,ye)=>e.jsx("div",{className:`autocomplete-item ${ye===Z?"highlighted":""}`,onClick:()=>x(Y),onMouseEnter:()=>Se(ye),children:O(Y,ye)},typeof Y=="string"?Y:Y[c]||ye))}):null,f&&G&&e.jsxs("div",{className:`autocomplete-item autocomplete-create ${Z===fe.length?"highlighted":""}`,onClick:_,onMouseEnter:()=>Se(fe.length),children:[e.jsx("span",{className:"autocomplete-create-icon",children:""}),e.jsxs("span",{children:[v,': "',G,'"']})]})]}),w&&e.jsx("div",{className:"form-error",children:w})]})},Hj=[{id:"general",label:"Genel Ayarlar",icon:""},{id:"jobRoles",label:" Kollar",icon:""},{id:"glassTypes",label:"Cam Tipleri",icon:""}],cp=[{value:"internal",label:" retim",color:"var(--success)"},{value:"external",label:"D Sipari",color:"var(--warning)"}],Vj=()=>{const[t,s]=d.useState("general"),[r,n]=d.useState(!0),[l,a]=d.useState(""),[i,c]=d.useState({}),[u,f]=d.useState([]),[v,S]=d.useState([]),[k,R]=d.useState([]),[w,A]=d.useState(!1),[C,y]=d.useState(null),[m,j]=d.useState({name:"",description:"",productionType:"internal",requiresGlass:!1,defaultGlassSupplier:null,defaultSupplier:null,estimatedDays:5,active:!0}),[z,P]=d.useState(!1),[W,G]=d.useState({name:"",code:""}),[Q,F]=d.useState(!1);d.useEffect(()=>{b()},[]);const b=async()=>{try{n(!0),a("");const[E,ie,J,ee]=await Promise.all([_j(),Ra(),Tc(),sr()]);c(E),f(ie||[]),S(J||[]),R(ee||[])}catch(E){a(E.message||"Ayarlar alnamad")}finally{n(!1)}},Z=(E=null)=>{E?(y(E),j({name:E.name||"",description:E.description||"",productionType:E.productionType||"internal",requiresGlass:E.requiresGlass||!1,defaultGlassSupplier:E.defaultGlassSupplier||null,defaultSupplier:E.defaultSupplier||null,estimatedDays:E.estimatedDays||5,active:E.active!==!1})):(y(null),j({name:"",description:"",productionType:"internal",requiresGlass:!1,defaultGlassSupplier:null,defaultSupplier:null,estimatedDays:5,active:!0})),A(!0)},Se=async()=>{if(!m.name.trim()){alert(" kolu ad gerekli");return}try{F(!0),C?await Fj(C.id,m):await Mj(m),await b(),A(!1)}catch(E){alert(E.message)}finally{F(!1)}},fe=async E=>{if(confirm("Bu i kolunu pasif yapmak istediinize emin misiniz?"))try{F(!0),await Uj(E),await b()}catch(ie){alert(ie.message)}finally{F(!1)}},H=async()=>{if(!W.name.trim()||!W.code.trim()){alert("Cam ad ve kodu gerekli");return}try{F(!0),await Kj(W),await b(),P(!1),G({name:"",code:""})}catch(E){alert(E.message)}finally{F(!1)}},$=async E=>{if(confirm("Bu cam tipini silmek istediinize emin misiniz?"))try{F(!0),await Wj(E),await b()}catch(ie){alert(ie.message)}finally{F(!1)}};return r?e.jsxs("div",{children:[e.jsx(Fe,{title:"Ayarlar",subtitle:"Sistem ve i kolu yaplandrmas"}),e.jsx("div",{className:"card subtle-card",children:"Ayarlar ykleniyor..."})]}):l?e.jsxs("div",{children:[e.jsx(Fe,{title:"Ayarlar",subtitle:"Sistem ve i kolu yaplandrmas"}),e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Ayarlar alnamad"}),e.jsx("div",{className:"error-message",children:l})]})]}):e.jsxs("div",{children:[e.jsx(Fe,{title:"Ayarlar",subtitle:"Sistem ve i kolu yaplandrmas"}),e.jsx("div",{className:"card",style:{marginBottom:"1.5rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem"},children:Hj.map(E=>e.jsxs("button",{className:`btn ${t===E.id?"btn-primary":"btn-ghost"}`,onClick:()=>s(E.id),style:{flex:1},children:[e.jsx("span",{style:{marginRight:"0.5rem"},children:E.icon}),E.label]},E.id))})}),t==="general"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Genel Ayarlar"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"metric-list",children:(i.general||[]).map(E=>e.jsxs("div",{className:"metric-row",children:[e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:E.label}),e.jsx("div",{className:"page-subtitle",children:E.description})]}),e.jsx("span",{className:`badge badge-${E.value?"success":"secondary"}`,children:E.value?"Ak":"Kapal"})]},E.id))})})]}),t==="jobRoles"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"card-title",children:" Kollar Yaplandrmas"}),e.jsx("p",{className:"page-subtitle",children:"Her i kolunun retim tipini ve bamllklarn belirleyin"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>Z(),children:"+ Yeni  Kolu"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" Kolu"}),e.jsx("th",{children:"retim Tipi"}),e.jsx("th",{children:"Cam Gerekli"}),e.jsx("th",{children:"Varsaylan Tedariki"}),e.jsx("th",{children:"Tahmini Sre"}),e.jsx("th",{children:"Durum"}),e.jsx("th",{style:{width:"100px"},children:"lem"})]})}),e.jsxs("tbody",{children:[u.map(E=>{const ie=cp.find(ee=>ee.value===E.productionType),J=k.find(ee=>ee.id===(E.defaultSupplier||E.defaultGlassSupplier));return e.jsxs("tr",{style:{opacity:E.active===!1?.5:1},children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600},children:E.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:E.description})]}),e.jsx("td",{children:e.jsx("span",{className:"badge",style:{background:(ie==null?void 0:ie.color)||"var(--bg-tertiary)",color:"#fff"},children:(ie==null?void 0:ie.label)||E.productionType})}),e.jsx("td",{children:E.requiresGlass?e.jsx("span",{className:"badge badge-info",children:" Evet"}):e.jsx("span",{className:"badge badge-secondary",children:"Hayr"})}),e.jsx("td",{children:J?J.name:e.jsx("span",{style:{color:"var(--text-muted)"},children:""})}),e.jsxs("td",{children:[E.estimatedDays," gn"]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${E.active!==!1?"success":"secondary"}`,children:E.active!==!1?"Aktif":"Pasif"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>Z(E),title:"Dzenle",children:""}),E.active!==!1&&e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>fe(E.id),title:"Pasif Yap",style:{color:"var(--danger)"},children:""})]})})]},E.id)}),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:"Henz i kolu tanmlanmam"})})]})]})})]}),t==="glassTypes"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"card-title",children:"Cam Tipleri"}),e.jsx("p",{className:"page-subtitle",children:"Cam siparilerinde kullanlacak cam tiplerini tanmlayn"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>P(!0),children:"+ Yeni Cam Tipi"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:[v.map(E=>e.jsx("div",{className:"card",style:{margin:0,background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:e.jsx("div",{className:"card-body",style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:[" ",E.name]}),e.jsx("div",{className:"badge badge-secondary",children:E.code})]}),e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>$(E.id),style:{color:"var(--danger)"},children:""})]})})},E.id)),v.length===0&&e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:"Henz cam tipi tanmlanmam"})]})})]}),e.jsxs(Ie,{isOpen:w,onClose:()=>A(!1),title:C?" Kolu Dzenle":"Yeni  Kolu",size:"medium",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:" Kolu Ad *"}),e.jsx("input",{type:"text",className:"form-input",value:m.name,onChange:E=>j({...m,name:E.target.value}),placeholder:"rn: PVC Dorama"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Aklama"}),e.jsx("input",{type:"text",className:"form-input",value:m.description,onChange:E=>j({...m,description:E.target.value}),placeholder:"Ksa aklama"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"retim Tipi *"}),e.jsx("select",{className:"form-select",value:m.productionType,onChange:E=>j({...m,productionType:E.target.value}),children:cp.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tahmini retim Sresi (gn)"}),e.jsx("input",{type:"number",className:"form-input",value:m.estimatedDays,onChange:E=>j({...m,estimatedDays:parseInt(E.target.value)||5}),min:1})]}),m.productionType==="internal"&&e.jsx("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:m.requiresGlass,onChange:E=>j({...m,requiresGlass:E.target.checked})}),"Cam bamll var (Dardan cam siparii gerekir)"]})}),m.productionType==="internal"&&m.requiresGlass&&e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Varsaylan Cam Tedarikisi"}),e.jsx(hr,{value:m.defaultGlassSupplier||"",onChange:E=>j({...m,defaultGlassSupplier:E}),options:k,displayKey:"name",valueKey:"id",placeholder:"Tedariki ara...",onSelect:E=>j({...m,defaultGlassSupplier:(E==null?void 0:E.id)||null})})]}),m.productionType==="external"&&e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Varsaylan Tedariki"}),e.jsx(hr,{value:m.defaultSupplier||"",onChange:E=>j({...m,defaultSupplier:E}),options:k,displayKey:"name",valueKey:"id",placeholder:"Tedariki ara...",onSelect:E=>j({...m,defaultSupplier:(E==null?void 0:E.id)||null})})]}),e.jsx("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:m.active,onChange:E=>j({...m,active:E.target.checked})}),"Aktif ( olutururken seilebilir)"]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>A(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",onClick:Se,disabled:Q,children:Q?"Kaydediliyor...":"Kaydet"})]})]}),e.jsxs(Ie,{isOpen:z,onClose:()=>P(!1),title:"Yeni Cam Tipi",size:"small",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cam Ad *"}),e.jsx("input",{type:"text",className:"form-input",value:W.name,onChange:E=>G({...W,name:E.target.value}),placeholder:"rn: 4+16+4 Iscam"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cam Kodu *"}),e.jsx("input",{type:"text",className:"form-input",value:W.code,onChange:E=>G({...W,code:E.target.value}),placeholder:"rn: 4-16-4"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>P(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",onClick:H,disabled:Q,children:Q?"Kaydediliyor...":"Kaydet"})]})]})]})},dt=({columns:t,rows:s,data:r,getKey:n=i=>i.id||i.key||i.name,onRowClick:l,emptyMessage:a="Kayt bulunamad"})=>{const i=r||s||[];return e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsx("tr",{children:t.map(c=>e.jsx("th",{children:c.label},c.accessor))})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:t.length,children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("div",{className:"empty-state-title",children:a}),e.jsx("div",{className:"empty-state-description",children:"Filtreleri deitirerek tekrar deneyin."})]})})}):i.map(c=>e.jsx("tr",{onClick:l?()=>l(c):void 0,style:l?{cursor:"pointer"}:void 0,children:t.map(u=>e.jsx("td",{children:u.render?u.render(c[u.accessor],c):c[u.accessor]},u.accessor))},n(c)))})]})})},Yj={KAPALI:{label:"Kapand",tone:"success",icon:""},URETIME_HAZIR:{label:"retime Hazr",tone:"success",icon:""},URETIMDE:{label:"retimde",tone:"primary",icon:""},SONRA_URETILECEK:{label:"Sonra retilecek",tone:"info",icon:""},MONTAJA_HAZIR:{label:"Montaja Hazr",tone:"success",icon:""},MONTAJ_TERMIN:{label:"Montaj Terminli",tone:"primary",icon:""},ANLASMA_TAMAMLANDI:{label:"Anlama Tamam",tone:"success",icon:""},ANLASMA_YAPILIYOR:{label:"Anlama Yaplyor",tone:"primary",icon:""},FIYAT_VERILDI:{label:"Fiyat Verildi",tone:"warning",icon:""},OLCU_ALINDI:{label:"l Alnd",tone:"success",icon:""}},dp=t=>{const s=Yj[t];return s?e.jsxs("span",{className:`badge badge-${s.tone}`,children:[s.icon," ",s.label]}):e.jsx("span",{className:"badge badge-secondary",children:t||"Bilinmiyor"})},Gj=()=>{var re;const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState([]),[i,c]=d.useState(!0),[u,f]=d.useState(""),[v,S]=d.useState(""),[k,R]=d.useState(!1),[w,A]=d.useState(null),[C,y]=d.useState(null),[m,j]=d.useState(null),[z,P]=d.useState(!1),[W,G]=d.useState(null),[Q,F]=d.useState({name:"",segment:"B2C",location:"",contact:"",phone:"",phone2:"",address:""});d.useEffect(()=>{(async()=>{try{c(!0),f("");const[x,_,q]=await Promise.all([Aa(),Sr(),Xf()]);s(x),n(_),a(q)}catch(x){f(x.message||"Veriler alnamad")}finally{c(!1)}})()},[]);const b=N=>r.filter(x=>x.customerId===N&&!x.deleted),Z=N=>l.filter(x=>x.jobId===N),Se=N=>{var x,_,q;return((x=N==null?void 0:N.offer)==null?void 0:x.total)||((q=(_=N==null?void 0:N.approval)==null?void 0:_.paymentPlan)==null?void 0:q.total)||0},fe=N=>{const x=b(N),_=x.filter(Y=>Y.status==="KAPALI").length,q=x.length-_,O=x.reduce((Y,ye)=>Y+Se(ye),0);return{total:x.length,closed:_,active:q,totalAmount:O}},H=async N=>{N.preventDefault();try{if(P(!0),f(""),W){const x=await cj(W.id,Q);s(_=>_.map(q=>q.id===x.id?x:q)),G(null)}else{const x=await kc(Q);s(_=>[x,..._])}F({name:"",segment:"B2C",location:"",contact:"",phone:"",phone2:"",address:""}),R(!1)}catch(x){f(x.message||"Mteri kayd baarsz")}finally{P(!1)}},$=N=>{G(N),F({name:N.name||"",segment:N.segment||"B2C",location:N.location||"",contact:N.contact||"",phone:N.phone||"",phone2:N.phone2||"",address:N.address||""}),R(!0)},E=async N=>{try{await dj(N.id),s(x=>x.map(_=>_.id===N.id?{..._,deleted:!0}:_)),j(null),R(!1),G(null)}catch(x){f(x.message||"Silme ilemi baarsz")}},ie=d.useMemo(()=>t.filter(N=>!N.deleted),[t]),J=d.useMemo(()=>{const N=v.toLowerCase().trim();return N?ie.filter(x=>(x.name||"").toLowerCase().includes(N)||(x.phone||"").includes(N)||(x.location||"").toLowerCase().includes(N)||(x.accountCode||"").toLowerCase().includes(N)):ie},[ie,v]),ee=[{label:"Mteri",accessor:"name",render:(N,x)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:x.name}),x.accountCode&&e.jsxs("div",{className:"text-muted",style:{fontSize:11},children:[" ",x.accountCode]})]})},{label:"Segment",accessor:"segment",render:N=>e.jsx("span",{className:`badge badge-${N==="B2B"?"primary":"secondary"}`,children:N})},{label:"Lokasyon",accessor:"location"},{label:"letiim",accessor:"phone",render:(N,x)=>e.jsxs("div",{style:{fontSize:12},children:[x.phone&&e.jsxs("div",{children:[" ",x.phone]}),x.contact&&e.jsxs("div",{children:[" ",x.contact]})]})},{label:"ler",accessor:"jobs",render:(N,x)=>{const _=fe(x.id);return e.jsxs("div",{style:{fontSize:12},children:[e.jsx("span",{style:{fontWeight:600},children:_.total})," i",_.active>0&&e.jsxs("span",{className:"text-muted",children:[" (",_.active," aktif)"]})]})}}];return e.jsxs("div",{children:[e.jsx(Fe,{title:"Mteriler",subtitle:"Mteri listesi ve i gemii",actions:e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{G(null),F({name:"",segment:"B2C",location:"",contact:"",phone:"",phone2:"",address:""}),R(!0)},children:"+ Yeni Mteri"})}),e.jsx("div",{className:"card subtle-card",style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("input",{className:"form-input",placeholder:"Mteri ad, telefon, lokasyon veya cari kod ara...",value:v,onChange:N=>S(N.target.value),style:{flex:1,maxWidth:400}}),v&&e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>S(""),children:"Temizle"}),e.jsxs("span",{className:"text-muted",style:{fontSize:12},children:[J.length," mteri"]})]})}),e.jsx(Ie,{open:k,title:W?"Mteri Gncelle":"Yeni Mteri Ekle",size:"medium",onClose:()=>{R(!1),G(null),F({name:"",segment:"B2C",location:"",contact:"",phone:"",phone2:"",address:""})},actions:e.jsxs(e.Fragment,{children:[W&&e.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>j(W),disabled:z,children:"Sil"}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>R(!1),disabled:z,children:"Vazge"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"customer-form",disabled:z,children:z?"Kaydediliyor...":W?"Gncelle":"Kaydet"})]}),children:e.jsxs("form",{id:"customer-form",onSubmit:H,children:[e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14,color:"var(--color-primary)"},children:" Temel Bilgiler"}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"Ad Soyad / Firma Ad *"}),e.jsx("input",{className:"form-input",value:Q.name,onChange:N=>F(x=>({...x,name:N.target.value})),required:!0,placeholder:"rn: Ahmet Kaya veya ABC Yap Ltd."})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"Segment"}),e.jsxs("select",{className:"form-select",value:Q.segment,onChange:N=>F(x=>({...x,segment:N.target.value})),children:[e.jsx("option",{value:"B2C",children:"B2C (Bireysel)"}),e.jsx("option",{value:"B2B",children:"B2B (Kurumsal)"})]})]})]})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14,color:"var(--color-primary)"},children:" Adres Bilgileri"}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"l / le"}),e.jsx("input",{className:"form-input",value:Q.location,onChange:N=>F(x=>({...x,location:N.target.value})),placeholder:"rn: Nevehir / Merkez"})]}),e.jsxs("div",{className:"form-group",style:{margin:0,gridColumn:"span 2"},children:[e.jsx("label",{className:"form-label",children:"Ak Adres"}),e.jsx("textarea",{className:"form-input",value:Q.address,onChange:N=>F(x=>({...x,address:N.target.value})),placeholder:"Mahalle, sokak, bina no...",rows:2,style:{resize:"vertical"}})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14,color:"var(--color-primary)"},children:" letiim"}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"Telefon 1 (Birincil)"}),e.jsx("input",{className:"form-input",value:Q.phone,onChange:N=>F(x=>({...x,phone:N.target.value})),placeholder:"+90 5XX XXX XX XX"})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"Telefon 2 (Yedek)"}),e.jsx("input",{className:"form-input",value:Q.phone2,onChange:N=>F(x=>({...x,phone2:N.target.value})),placeholder:"+90 5XX XXX XX XX"})]}),e.jsxs("div",{className:"form-group",style:{margin:0,gridColumn:"span 2"},children:[e.jsx("label",{className:"form-label",children:"E-posta"}),e.jsx("input",{className:"form-input",type:"email",value:Q.contact,onChange:N=>F(x=>({...x,contact:N.target.value})),placeholder:"ornek@email.com"})]})]})]})]})}),e.jsx(Ie,{open:!!m,title:"Silme Onay",size:"small",onClose:()=>j(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>j(null),children:"Vazge"}),e.jsx("button",{className:"btn btn-danger",type:"button",onClick:()=>m&&E(m),children:"Sil"})]}),children:e.jsxs("p",{children:[e.jsx("strong",{children:m==null?void 0:m.name})," mterisini silmek zeresiniz. Bu ilem geri alnabilir."]})}),e.jsx(Ie,{open:!!w,title:w?` ${w.name}`:"",size:"large",onClose:()=>A(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>$(w),children:" Dzenle"}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>A(null),children:"Kapat"})]}),children:w&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",padding:16,borderRadius:12,border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:4},children:"Segment"}),e.jsx("span",{className:`badge badge-${w.segment==="B2B"?"primary":"secondary"}`,children:w.segment})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:4},children:"Cari Kod"}),e.jsxs("div",{style:{fontWeight:600},children:[" ",w.accountCode||"-"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:4},children:"Lokasyon"}),e.jsxs("div",{style:{fontWeight:600},children:[" ",w.location||"-"]})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:16,marginTop:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:4},children:"Telefon"}),e.jsxs("div",{children:[w.phone&&e.jsxs("div",{children:[" ",w.phone]}),w.phone2&&e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-secondary)"},children:[" ",w.phone2]}),!w.phone&&!w.phone2&&e.jsx("span",{className:"text-muted",children:"-"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:4},children:"E-posta"}),e.jsx("div",{children:w.contact?` ${w.contact}`:e.jsx("span",{className:"text-muted",children:"-"})})]})]}),w.address&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:4},children:"Adres"}),e.jsxs("div",{style:{fontSize:13},children:[" ",w.address]})]})]}),(()=>{const N=fe(w.id);return e.jsxs("div",{className:"grid grid-4",style:{gap:12},children:[e.jsxs("div",{className:"card subtle-card",style:{padding:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-primary)"},children:N.total}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Toplam "})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-warning)"},children:N.active}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Aktif"})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-success)"},children:N.closed}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Tamamlanan"})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:12,textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:18,fontWeight:700},children:["",N.totalAmount.toLocaleString("tr-TR")]}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Toplam Tutar"})]})]})})(),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:14,display:"flex",alignItems:"center",gap:8},children:[" ler",e.jsx("span",{className:"badge badge-secondary",children:b(w.id).length})]}),b(w.id).length===0?e.jsxs("div",{className:"card subtle-card",style:{padding:30,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:8},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Henz i kayd yok"}),e.jsx("div",{className:"text-muted",style:{fontSize:13},children:"Bu mteriye ait i bulunmuyor"})]}):e.jsx("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,overflow:"hidden"},children:e.jsx("div",{style:{maxHeight:300,overflow:"auto"},children:e.jsxs("table",{className:"table",style:{fontSize:13,marginBottom:0},children:[e.jsx("thead",{style:{position:"sticky",top:0,background:"var(--color-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{children:" Kodu"}),e.jsx("th",{children:"Balk"}),e.jsx("th",{children:"Tarih"}),e.jsx("th",{children:"Tutar"}),e.jsx("th",{children:"Durum"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:b(w.id).map(N=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>y(N),children:[e.jsx("td",{children:e.jsx("code",{style:{fontSize:11},children:N.id})}),e.jsx("td",{style:{fontWeight:600},children:N.title||"-"}),e.jsx("td",{className:"text-muted",style:{fontSize:12},children:N.createdAt?new Date(N.createdAt).toLocaleDateString("tr-TR"):"-"}),e.jsx("td",{children:Se(N)>0?`${Se(N).toLocaleString("tr-TR")}`:e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{children:dp(N.status)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-secondary btn-small",onClick:x=>{x.stopPropagation(),y(N)},children:"Detay"})})]},N.id))})]})})})]})]})}),e.jsx(Ie,{open:!!C,title:C?` ${C.title||C.id}`:"",size:"medium",onClose:()=>y(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>window.open(`/isler?job=${C==null?void 0:C.id}`,"_blank"),children:" e Git (Tam Detay)"}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>y(null),children:"Kapat"})]}),children:C&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("div",{style:{background:"var(--color-bg-secondary)",padding:16,borderRadius:12},children:e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:" Kodu"}),e.jsx("code",{style:{fontSize:12},children:C.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Durum"}),dp(C.status)]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Oluturma"}),e.jsx("div",{children:C.createdAt?new Date(C.createdAt).toLocaleDateString("tr-TR"):"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Balang Tipi"}),e.jsx("div",{children:C.startType||"-"})]})]})}),C.roles&&C.roles.length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:13},children:"  Kollar"}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:C.roles.map((N,x)=>e.jsx("span",{className:"badge badge-primary",children:N.name||N.label||N.id},x))})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:13},children:" Finansal"}),e.jsxs("div",{className:"grid grid-2",style:{gap:8},children:[e.jsxs("div",{className:"card subtle-card",style:{padding:12},children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Toplam Tutar"}),e.jsxs("div",{style:{fontSize:18,fontWeight:700},children:["",Se(C).toLocaleString("tr-TR")]})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:12},children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Anlama Tarihi"}),e.jsx("div",{style:{fontSize:14,fontWeight:600},children:(re=C.offer)!=null&&re.agreedDate?new Date(C.offer.agreedDate).toLocaleDateString("tr-TR"):"-"})]})]})]}),(()=>{const N=Z(C.id);return N.length===0?null:e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:13},children:[" Dkmanlar (",N.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:N.map(x=>e.jsxs("div",{className:"card subtle-card",style:{padding:"10px 14px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:13},children:[x.type==="olcu"&&" ",x.type==="teknik"&&" ",x.type==="sozlesme"&&" ",x.description||x.originalName]}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:new Date(x.uploadedAt).toLocaleDateString("tr-TR")})]}),e.jsx("a",{href:`http://localhost:8000/documents/file/${x.filename}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary btn-small",children:"Grntle"})]},x.id))})]})})(),C.notes&&e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:13},children:" Not"}),e.jsx("div",{className:"card subtle-card",style:{padding:12,fontSize:13},children:C.notes})]})]})}),i?e.jsx(Dt,{text:"Mteriler ykleniyor..."}):u?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Liste yklenemedi"}),e.jsx("div",{className:"error-message",children:u})]}):J.length===0?e.jsxs("div",{className:"card subtle-card",style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:v?"Sonu bulunamad":"Henz mteri yok"}),e.jsx("div",{className:"text-muted",children:v?"Farkl bir arama kriteri deneyin":"Yeni mteri eklemek iin butona tklayn"})]}):e.jsx(dt,{columns:ee,rows:J,getKey:N=>N.id,onRowClick:N=>A(N)})]})},zc=({icon:t,label:s,value:r,change:n,tone:l="primary",trend:a="neutral"})=>{const i=a==="negative"?"stat-change negative":"stat-change positive";return e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:`stat-icon ${l}`,children:t}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-label",children:s}),e.jsx("div",{className:"stat-value",children:r}),n?e.jsx("div",{className:i,children:n}):null]})]})},Qj=["OLCU_RANDEVU_BEKLIYOR","SERVIS_RANDEVU_BEKLIYOR"],Jj=t=>{if(!t)return"";const s=new Date(t),n=new Date-s,l=Math.floor(n/6e4),a=Math.floor(n/36e5),i=Math.floor(n/864e5);return l<60?`${l} dk nce`:a<24?`${a} saat nce`:i===0?"Bugn":i===1?"Dn":`${i} gn nce`},Xj=()=>{const[t,s]=d.useState({stats:[],activities:[],priorityJobs:[],weekOverview:[],paymentStatus:{},teamStatus:{}}),[r,n]=d.useState([]),[l,a]=d.useState([]),[i,c]=d.useState([]),[u,f]=d.useState([]),[v,S]=d.useState([]),[k,R]=d.useState(!0),[w,A]=d.useState("");return d.useEffect(()=>{(async()=>{try{R(!0),A("");const[y,m,j,z,P,W]=await Promise.all([ej(),Sr().catch(()=>[]),Cj().catch(()=>[]),wc().catch(()=>[]),Cc().catch(()=>[]),sy().catch(()=>[])]);s(y);const G=(m||[]).filter(F=>Qj.includes(F.status)).slice(0,5);n(G),a((j||[]).slice(0,5)),c((z||[]).slice(0,5));const Q=(P||[]).filter(F=>["sent","partial"].includes(F.status)).slice(0,5);f(Q),S((W||[]).slice(0,5))}catch(y){A(y.message||"Bilinmeyen bir hata olutu")}finally{R(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Kontrol Paneli",subtitle:" srelerinizin genel durumunu grntleyin"}),k?e.jsx("div",{className:"card subtle-card",children:"Veriler ykleniyor..."}):w?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Veri alnamad"}),e.jsx("div",{className:"error-message",children:w})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"stats-grid",children:t.stats.map(C=>e.jsx(zc,{icon:C.icon,label:C.label,value:C.value,change:C.change,trend:C.trend,tone:C.tone},C.id))}),r.length>0&&e.jsxs("div",{className:"card",style:{marginTop:24,border:"2px solid var(--color-warning)",background:"var(--color-warning-bg)"},children:[e.jsxs("div",{className:"card-header",style:{borderBottom:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("h3",{className:"card-title",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:20},children:""}),"Randevu Bekliyor",e.jsx("span",{className:"badge badge-warning",style:{marginLeft:8},children:r.length})]}),e.jsx(ps,{to:"/isler/list",className:"btn btn-secondary btn-small",children:"Tmn Gr"})]}),e.jsx("div",{className:"card-body",style:{padding:0},children:e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r.map(C=>{var y;return e.jsxs(ps,{to:"/isler/list",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid rgba(245, 158, 11, 0.1)",textDecoration:"none",color:"inherit",transition:"background 0.2s"},onMouseOver:m=>m.currentTarget.style.background="rgba(245, 158, 11, 0.1)",onMouseOut:m=>m.currentTarget.style.background="transparent",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:C.startType==="SERVIS"?"":""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:C.customerName}),e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[C.title,"  ",((y=C.roles)==null?void 0:y.map(m=>m.name).join(", "))||" kolu belirtilmemi"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{className:"badge badge-warning",style:{fontSize:11},children:C.startType==="SERVIS"?"Servis":"l"}),e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)",marginTop:4},children:Jj(C.createdAt)})]})]},C.id)})})}),e.jsx("div",{className:"card-footer",style:{background:"rgba(245, 158, 11, 0.05)",padding:"10px 16px",fontSize:12,color:"var(--color-text-light)"},children:" Bu mterileri arayp randevu belirlemeniz gerekiyor."})]}),v.length>0&&e.jsxs("div",{className:"card",style:{marginTop:24,border:"2px solid var(--color-danger)",background:"var(--color-danger-bg)"},children:[e.jsxs("div",{className:"card-header",style:{borderBottom:"1px solid rgba(239, 68, 68, 0.2)"},children:[e.jsxs("h3",{className:"card-title",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:20},children:""}),"retim/Tedarik Uyarlar",e.jsx("span",{className:"badge badge-danger",style:{marginLeft:8},children:v.length})]}),e.jsx(ps,{to:"/uretim/siparisler",className:"btn btn-secondary btn-small",children:"Tmn Gr"})]}),e.jsx("div",{className:"card-body",style:{padding:0},children:e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:v.map((C,y)=>e.jsxs(ps,{to:`/isler/list?job=${C.jobId}`,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid rgba(239, 68, 68, 0.1)",textDecoration:"none",color:"inherit",transition:"background 0.2s"},onMouseOver:m=>m.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseOut:m=>m.currentTarget.style.background="transparent",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:C.type==="overdue"?"":C.type==="due_today"?"":""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:C.message}),e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[C.jobTitle,"  ",C.roleName]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{className:`badge badge-${C.severity==="high"?"danger":"warning"}`,style:{fontSize:11},children:C.type==="overdue"?"GECKT":C.type==="due_today"?"BUGN":"SORUN"}),C.estimatedDelivery&&e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)",marginTop:4},children:new Date(C.estimatedDelivery).toLocaleDateString("tr-TR")})]})]},y))})}),e.jsx("div",{className:"card-footer",style:{background:"rgba(239, 68, 68, 0.05)",padding:"10px 16px",fontSize:12,color:"var(--color-text-light)"},children:" Geciken veya sorunlu sipariler acil mdahale gerektiriyor."})]}),(l.length>0||i.length>0||u.length>0)&&e.jsxs("div",{className:"grid grid-3",style:{marginTop:24},children:[l.length>0&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-danger)",background:"var(--color-danger-bg)"},children:[e.jsxs("div",{className:"card-header",style:{borderBottom:"1px solid rgba(239, 68, 68, 0.2)"},children:[e.jsxs("h3",{className:"card-title",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),"Kritik Stok",e.jsx("span",{className:"badge badge-danger",style:{marginLeft:4},children:l.length})]}),e.jsx(ps,{to:"/stok/kritik",className:"btn btn-secondary btn-small",children:"Tm"})]}),e.jsx("div",{style:{padding:"8px 0"},children:l.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 16px",borderBottom:"1px solid rgba(239, 68, 68, 0.1)",fontSize:13},children:[e.jsxs("span",{children:[e.jsx("strong",{children:C.productCode}),"-",C.colorCode,e.jsx("div",{className:"text-muted",style:{fontSize:11},children:C.name})]}),e.jsxs("span",{style:{color:"var(--color-danger)",fontWeight:600},children:[C.available," ",C.unit]})]},C.id))})]}),i.length>0&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-warning)",background:"var(--color-warning-bg)"},children:[e.jsxs("div",{className:"card-header",style:{borderBottom:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("h3",{className:"card-title",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),"Sipari Gerekli",e.jsx("span",{className:"badge badge-warning",style:{marginLeft:4},children:i.length})]}),e.jsx(ps,{to:"/satinalma/eksik",className:"btn btn-secondary btn-small",children:"Sipari Ver"})]}),e.jsx("div",{style:{padding:"8px 0"},children:i.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 16px",borderBottom:"1px solid rgba(245, 158, 11, 0.1)",fontSize:13},children:[e.jsxs("span",{children:[e.jsx("strong",{children:C.productCode}),"-",C.colorCode,e.jsx("div",{className:"text-muted",style:{fontSize:11},children:C.name})]}),e.jsxs("span",{style:{color:"var(--color-warning)",fontWeight:600},children:["+",C.suggestedQty]})]},C.itemId))})]}),u.length>0&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-info)",background:"var(--color-info-bg)"},children:[e.jsxs("div",{className:"card-header",style:{borderBottom:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("h3",{className:"card-title",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),"Bekleyen PO",e.jsx("span",{className:"badge badge-info",style:{marginLeft:4},children:u.length})]}),e.jsx(ps,{to:"/satinalma/bekleyen",className:"btn btn-secondary btn-small",children:"Tm"})]}),e.jsx("div",{style:{padding:"8px 0"},children:u.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 16px",borderBottom:"1px solid rgba(59, 130, 246, 0.1)",fontSize:13},children:[e.jsxs("span",{children:[e.jsx("strong",{children:C.id}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:C.supplierName})]}),e.jsxs("span",{children:[e.jsx("span",{className:`badge badge-${C.status==="partial"?"warning":"info"}`,style:{fontSize:10},children:C.status==="partial"?"Ksmi":"Bekliyor"}),C.expectedDate&&e.jsx("div",{className:"text-muted",style:{fontSize:10,marginTop:2},children:C.expectedDate})]})]},C.id))})]})]}),e.jsxs("div",{className:"grid grid-2",style:{marginTop:24},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Son Aktiviteler"}),e.jsx("button",{className:"btn btn-secondary btn-icon",type:"button",children:""})]}),e.jsx("div",{className:"card-body",children:e.jsx(dt,{columns:[{label:"lem",accessor:"action"},{label:"Kullanc",accessor:"user"},{label:"Tarih",accessor:"time"}],rows:t.activities})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"ncelikli ler"}),e.jsx("button",{className:"btn btn-secondary",type:"button",children:"Tmn Gr"})]}),e.jsx("div",{className:"card-body",children:e.jsx(dt,{columns:[{label:" Ad",accessor:"name"},{label:"Durum",accessor:"status",render:(C,y)=>Zj(y.status,y.badge)},{label:"Termin",accessor:"dueDate"}],rows:t.priorityJobs})})]})]}),e.jsxs("div",{className:"grid grid-3",style:{marginTop:24},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Bu Hafta"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"metric-list",children:t.weekOverview.map(C=>e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:C.label}),e.jsx("span",{className:"metric-value",children:C.value})]},C.label))})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"deme Durumu"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"metric-list",children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Bekleyen"}),e.jsx("span",{className:"metric-value warning",children:t.paymentStatus.pending})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Bu Ay Tahsilat"}),e.jsx("span",{className:"metric-value success",children:t.paymentStatus.collected})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Bu Ay deme"}),e.jsx("span",{className:"metric-value danger",children:t.paymentStatus.paid})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Ekip Durumu"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"metric-list",children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Atlye"}),e.jsxs("span",{className:"metric-value",children:[t.teamStatus.workshop," kii"]})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Montaj"}),e.jsxs("span",{className:"metric-value",children:[t.teamStatus.assembly," kii"]})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Ofis"}),e.jsxs("span",{className:"metric-value",children:[t.teamStatus.office," kii"]})]})]})})]})]})]})]})},Zj=(t,s="secondary")=>e.jsx("span",{className:`badge badge-${s}`,children:t}),e0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await Nj();s(c)}catch(c){a(c.message||"Evraklar alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"rsaliye & Fatura",subtitle:"Kesilmi veya taslak evraklar"}),r?e.jsx("div",{className:"card subtle-card",children:"Evraklar ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Evraklar alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"Evrak No",accessor:"id"},{label:"Mteri",accessor:"customer"},{label:"Tip",accessor:"type"},{label:"Tutar",accessor:"amount"},{label:"Tarih",accessor:"date"},{label:"Durum",accessor:"status"}],rows:t})]})},_t=t=>new Intl.NumberFormat("tr-TR").format(t||0),up=t=>t?new Date(t).toLocaleDateString("tr-TR"):"-",t0={pending:{label:"Bekliyor",tone:"warning",icon:""},overdue:{label:"Gecikmi",tone:"danger",icon:""},today:{label:"Bugn",tone:"primary",icon:""},afterDelivery:{label:"Montaj Bitti",tone:"info",icon:""},chequeWaiting:{label:"ek Bekliyor",tone:"secondary",icon:""},chequeReceived:{label:"ek Alnd",tone:"success",icon:""},collected:{label:"Tahsil Edildi",tone:"success",icon:""}},yi={MONTAJA_HAZIR:{label:"Montaja Hazr",icon:""},MONTAJ_TERMIN:{label:"Montaj Terminli",icon:""},MUHASEBE_BEKLIYOR:{label:"Muhasebe Bekliyor",icon:""},KAPALI:{label:"Kapand",icon:""}},s0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState("pending"),[v,S]=d.useState("all"),[k,R]=d.useState(null),[w,A]=d.useState(null),[C,y]=d.useState(null),[m,j]=d.useState(null),[z,P]=d.useState({amount:"",isPartial:!1,hasDiscount:!1,discountAmount:"",discountReason:"",note:""}),[W,G]=d.useState(!1),[Q,F]=d.useState([]);d.useEffect(()=>{b()},[]);const b=async()=>{try{a(!0),c("");const[x,_]=await Promise.all([Sr(),Aa()]);s(x.filter(q=>!q.deleted)),n(_)}catch(x){c(x.message||"Veriler alnamad")}finally{a(!1)}},Z=x=>{const _=r.find(q=>q.id===x);return(_==null?void 0:_.name)||"Bilinmiyor"},Se=x=>["MUHASEBE_BEKLIYOR","KAPALI"].includes(x.status),fe=d.useMemo(()=>{const x=new Date;x.setHours(0,0,0,0);const _=[];return t.forEach(q=>{var ye,Pe,Te,$e,Ve,Ue;const O=(ye=q.approval)==null?void 0:ye.paymentPlan;if(!O)return;const Y={jobId:q.id,jobTitle:q.title||q.id,customerId:q.customerId,customerName:q.customerName||Z(q.customerId),jobStatus:q.status};if(((Pe=O.cash)==null?void 0:Pe.amount)>0){const _e=O.cash.date?new Date(O.cash.date):null;let Ze="pending";O.cash.status==="collected"?Ze="collected":_e&&(_e<x?Ze="overdue":_e.toDateString()===x.toDateString()&&(Ze="today")),_.push({...Y,id:`${q.id}-cash`,type:"cash",typeLabel:"Nakit",amount:O.cash.amount,date:O.cash.date,status:Ze,collectedData:O.cash.collectedData||null})}if(((Te=O.card)==null?void 0:Te.amount)>0){const _e=O.card.date?new Date(O.card.date):null;let Ze="pending";O.card.status==="collected"?Ze="collected":_e&&(_e<x?Ze="overdue":_e.toDateString()===x.toDateString()&&(Ze="today")),_.push({...Y,id:`${q.id}-card`,type:"card",typeLabel:"Kredi Kart",amount:O.card.amount,date:O.card.date,status:Ze,collectedData:O.card.collectedData||null})}if((($e=O.cheque)==null?void 0:$e.total)>0){const _e=O.cheque.received&&((Ve=O.cheque.items)==null?void 0:Ve.length)>0;_.push({...Y,id:`${q.id}-cheque`,type:"cheque",typeLabel:`ek (${O.cheque.count||"?"} adet)`,amount:O.cheque.total,date:null,status:O.cheque.status==="collected"?"collected":_e?"chequeReceived":"chequeWaiting",chequeDetails:O.cheque.items||[],chequeCount:O.cheque.count||0,chequeReceived:O.cheque.received||!1,collectedData:O.cheque.collectedData||null})}if(((Ue=O.afterDelivery)==null?void 0:Ue.amount)>0){let _e="pending";O.afterDelivery.status==="collected"?_e="collected":Se(q)&&(_e="afterDelivery"),_.push({...Y,id:`${q.id}-afterDelivery`,type:"afterDelivery",typeLabel:"Teslim Sonras",amount:O.afterDelivery.amount,date:null,status:_e,note:O.afterDelivery.note,collectedData:O.afterDelivery.collectedData||null})}}),_},[t,r]),H=d.useMemo(()=>{let x=fe;u==="pending"?x=x.filter(q=>q.status!=="collected"):x=x.filter(q=>q.status==="collected"),v!=="all"&&(x=x.filter(q=>q.type===v));const _={overdue:0,today:1,afterDelivery:2,chequeWaiting:3,chequeReceived:4,pending:5,collected:6};return x.sort((q,O)=>{const Y=_[q.status]??99,ye=_[O.status]??99;return Y!==ye?Y-ye:q.date&&O.date?new Date(q.date)-new Date(O.date):0}),x},[fe,u,v]),$=d.useMemo(()=>{const x=fe.filter(O=>O.status!=="collected"),_=new Date;_.setHours(0,0,0,0);const q=new Date(_);return q.setDate(q.getDate()+7),{overdueCount:x.filter(O=>O.status==="overdue").length,overdueAmount:x.filter(O=>O.status==="overdue").reduce((O,Y)=>O+Y.amount,0),todayCount:x.filter(O=>O.status==="today").length,todayAmount:x.filter(O=>O.status==="today").reduce((O,Y)=>O+Y.amount,0),afterDeliveryCount:x.filter(O=>O.status==="afterDelivery").length,afterDeliveryAmount:x.filter(O=>O.status==="afterDelivery").reduce((O,Y)=>O+Y.amount,0),chequeWaitingCount:x.filter(O=>O.status==="chequeWaiting").length,thisWeekCount:x.filter(O=>{if(!O.date)return!1;const Y=new Date(O.date);return Y>=_&&Y<=q}).length,thisWeekAmount:x.filter(O=>{if(!O.date)return!1;const Y=new Date(O.date);return Y>=_&&Y<=q}).reduce((O,Y)=>O+Y.amount,0),totalPending:x.reduce((O,Y)=>O+Y.amount,0),totalCollected:fe.filter(O=>O.status==="collected").reduce((O,Y)=>O+Y.amount,0)}},[fe]),E=x=>{P({amount:x.amount,isPartial:!1,hasDiscount:!1,discountAmount:"",discountReason:"",note:""}),R(x)},ie=x=>{const _=x.chequeCount||1,q=x.chequeDetails||[],O=[];for(let Y=0;Y<_;Y++)O.push(q[Y]||{bank:"",chequeNo:"",amount:Math.round(x.amount/_),due:""});F(O),A(x)},J=async()=>{if(k)try{G(!0);const x=t.find(Y=>Y.id===k.jobId);if(!x)throw new Error(" bulunamad");const _={...x.approval.paymentPlan},q=k.type,O={collectedAt:new Date().toISOString(),originalAmount:k.amount,collectedAmount:Number(z.amount)||k.amount,isPartial:z.isPartial,discountAmount:z.hasDiscount?Number(z.discountAmount):0,discountReason:z.discountReason,note:z.note};q==="cash"?_.cash={..._.cash,status:"collected",collectedData:O}:q==="card"?_.card={..._.card,status:"collected",collectedData:O}:q==="cheque"?_.cheque={..._.cheque,status:"collected",collectedData:O}:q==="afterDelivery"&&(_.afterDelivery={..._.afterDelivery,status:"collected",collectedData:O}),await np(x.id,_),await b(),R(null)}catch(x){c(x.message||"Tahsilat kaydedilemedi")}finally{G(!1)}},ee=async()=>{if(w)try{G(!0);const x=t.find(q=>q.id===w.jobId);if(!x)throw new Error(" bulunamad");const _={...x.approval.paymentPlan};_.cheque={..._.cheque,received:!0,items:Q,count:Q.length,total:Q.reduce((q,O)=>q+Number(O.amount||0),0)},await np(x.id,_),await b(),A(null)}catch(x){c(x.message||"ek detaylar kaydedilemedi")}finally{G(!1)}},re=x=>{const _=t0[x];return _?e.jsxs("span",{className:`badge badge-${_.tone}`,children:[_.icon," ",_.label]}):e.jsx("span",{className:"badge badge-secondary",children:x})},N=x=>{switch(x){case"cash":return"";case"card":return"";case"cheque":return"";case"afterDelivery":return"";default:return""}};return e.jsxs("div",{children:[e.jsx(Fe,{title:"demeler / Kasa",subtitle:"Tahsilat takibi ve hatrlatmalar"}),l?e.jsx(Dt,{text:"demeler ykleniyor..."}):i?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:i})]}):e.jsxs(e.Fragment,{children:[($.overdueCount>0||$.todayCount>0||$.afterDeliveryCount>0||$.chequeWaitingCount>0)&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:16,borderRadius:12,marginBottom:16,border:"1px solid #f59e0b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontWeight:700,fontSize:16},children:"Dikkat Gerektiren demeler"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:16},children:[$.overdueCount>0&&e.jsxs("div",{style:{background:"#fecaca",padding:"8px 16px",borderRadius:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:["Gecikmi: ",$.overdueCount]}),e.jsxs("div",{style:{fontSize:13,color:"#991b1b"},children:["",_t($.overdueAmount)]})]})]}),$.todayCount>0&&e.jsxs("div",{style:{background:"#dbeafe",padding:"8px 16px",borderRadius:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:["Bugn: ",$.todayCount]}),e.jsxs("div",{style:{fontSize:13,color:"#1e40af"},children:["",_t($.todayAmount)]})]})]}),$.afterDeliveryCount>0&&e.jsxs("div",{style:{background:"#d1fae5",padding:"8px 16px",borderRadius:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:["Montaj Biten: ",$.afterDeliveryCount]}),e.jsxs("div",{style:{fontSize:13,color:"#065f46"},children:["",_t($.afterDeliveryAmount)]})]})]}),$.chequeWaitingCount>0&&e.jsxs("div",{style:{background:"#e5e7eb",padding:"8px 16px",borderRadius:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:["ek Bekliyor: ",$.chequeWaitingCount]}),e.jsx("div",{style:{fontSize:13,color:"#374151"},children:"Detay girilecek"})]})]})]})]}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:16},children:[e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bekleyen Toplam"}),e.jsxs("div",{className:"metric-value",children:["",_t($.totalPending)]})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bu Hafta Alnacak"}),e.jsxs("div",{className:"metric-value",children:["",_t($.thisWeekAmount)]}),e.jsxs("div",{className:"text-muted",style:{fontSize:11},children:[$.thisWeekCount," deme"]})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Tahsil Edilen"}),e.jsxs("div",{className:"metric-value",style:{color:"var(--color-success)"},children:["",_t($.totalCollected)]})]})]})})]}),e.jsxs("div",{className:"card",style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{className:`btn ${u==="pending"?"btn-primary":"btn-secondary"}`,onClick:()=>f("pending"),children:[" Bekleyen (",fe.filter(x=>x.status!=="collected").length,")"]}),e.jsxs("button",{className:`btn ${u==="collected"?"btn-primary":"btn-secondary"}`,onClick:()=>f("collected"),children:[" Tahsil Edilen (",fe.filter(x=>x.status==="collected").length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("span",{className:"text-muted",style:{fontSize:12},children:"Filtre:"}),e.jsxs("select",{className:"form-select",value:v,onChange:x=>S(x.target.value),style:{width:150},children:[e.jsx("option",{value:"all",children:"Tm"}),e.jsx("option",{value:"cash",children:" Nakit"}),e.jsx("option",{value:"card",children:" Kart"}),e.jsx("option",{value:"cheque",children:" ek"}),e.jsx("option",{value:"afterDelivery",children:" Teslim Sonras"})]})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tarih"}),e.jsx("th",{children:"Mteri"}),e.jsx("th",{children:""}),e.jsx("th",{children:"Tip"}),e.jsx("th",{children:"Tutar"}),e.jsx("th",{children:"Durum"}),e.jsx("th",{children:"lemler"})]})}),e.jsx("tbody",{children:H.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:u==="pending"?"":""}),e.jsx("div",{style:{fontWeight:600},children:u==="pending"?"Bekleyen deme yok!":"Henz tahsilat kayd yok"})]})})}):H.map(x=>e.jsxs("tr",{style:{background:x.status==="overdue"?"#fef2f2":x.status==="today"?"#eff6ff":x.status==="afterDelivery"?"#ecfdf5":void 0},children:[e.jsx("td",{children:x.date?e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:up(x.date)}),x.status==="overdue"&&e.jsx("div",{style:{fontSize:11,color:"var(--color-danger)"},children:"Gecikmi!"})]}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{children:e.jsx("div",{style:{fontWeight:600},children:x.customerName})}),e.jsxs("td",{children:[e.jsx("div",{style:{fontSize:13},children:x.jobTitle}),e.jsx("code",{style:{fontSize:10},children:x.jobId})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{children:N(x.type)}),e.jsx("span",{children:x.typeLabel})]})}),e.jsx("td",{children:e.jsxs("strong",{style:{fontSize:15},children:["",_t(x.amount)]})}),e.jsx("td",{children:re(x.status)}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:6},children:[x.status==="collected"?e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>y(x),children:" deme Alnd"}):x.status==="chequeWaiting"?e.jsx("button",{className:"btn btn-primary btn-small",onClick:()=>ie(x),children:"ek Detay Gir"}):e.jsx("button",{className:"btn btn-success btn-small",onClick:()=>E(x),children:"Tahsil Et"}),e.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>j(x),children:"e Git"})]})})]},x.id))})]})})]})]}),e.jsx(Ie,{open:!!k,title:" deme Tahsil Et",size:"medium",onClose:()=>R(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>R(null),disabled:W,children:"ptal"}),e.jsx("button",{className:"btn btn-success",onClick:J,disabled:W,children:W?"Kaydediliyor...":" Tahsil Et"})]}),children:k&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("div",{style:{background:"var(--color-bg-secondary)",padding:16,borderRadius:8},children:e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Mteri"}),e.jsx("div",{style:{fontWeight:600},children:k.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:""}),e.jsx("div",{style:{fontWeight:600},children:k.jobTitle})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"deme Tipi"}),e.jsxs("div",{children:[N(k.type)," ",k.typeLabel]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Beklenen Tutar"}),e.jsxs("div",{style:{fontWeight:700,fontSize:18},children:["",_t(k.amount)]})]})]})}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"Alnan Tutar"}),e.jsx("input",{type:"number",className:"form-input",value:z.amount,onChange:x=>P(_=>({..._,amount:x.target.value})),style:{fontSize:18,fontWeight:600}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:z.isPartial,onChange:x=>P(_=>({..._,isPartial:x.target.checked}))}),e.jsx("span",{children:"Ksmi tahsilat (kalan tutar sonra alnacak)"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:z.hasDiscount,onChange:x=>P(_=>({..._,hasDiscount:x.target.checked}))}),e.jsx("span",{children:"skonto ile kapat"})]})]}),z.hasDiscount&&e.jsxs("div",{className:"grid grid-2",style:{gap:12,padding:12,background:"#fef3c7",borderRadius:8},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"skonto Tutar *"}),e.jsx("input",{type:"number",className:"form-input",value:z.discountAmount,onChange:x=>P(_=>({..._,discountAmount:x.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"skonto Sebebi *"}),e.jsx("input",{type:"text",className:"form-input",value:z.discountReason,onChange:x=>P(_=>({..._,discountReason:x.target.value})),placeholder:"rn: Nakit indirimi",required:!0})]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"Not (Opsiyonel)"}),e.jsx("textarea",{className:"form-input",value:z.note,onChange:x=>P(_=>({..._,note:x.target.value})),rows:2})]})]})}),e.jsx(Ie,{open:!!w,title:" ek Detaylar Gir",size:"large",onClose:()=>A(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>A(null),disabled:W,children:"ptal"}),e.jsx("button",{className:"btn btn-primary",onClick:ee,disabled:W,children:W?"Kaydediliyor...":" ekleri Kaydet"})]}),children:w&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("div",{style:{background:"var(--color-bg-secondary)",padding:12,borderRadius:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600},children:w.customerName}),e.jsxs("span",{className:"text-muted",children:[" - ",w.jobTitle]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted",children:"Toplam: "}),e.jsxs("strong",{children:["",_t(w.amount)]})]})]})}),e.jsx("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,overflow:"hidden"},children:e.jsxs("table",{className:"table",style:{marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Banka"}),e.jsx("th",{children:"ek No"}),e.jsx("th",{children:"Tutar"}),e.jsx("th",{children:"Vade Tarihi"})]})}),e.jsx("tbody",{children:Q.map((x,_)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",value:x.bank,onChange:q=>{const O=[...Q];O[_]={...O[_],bank:q.target.value},F(O)},placeholder:"Banka ad"})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",value:x.chequeNo,onChange:q=>{const O=[...Q];O[_]={...O[_],chequeNo:q.target.value},F(O)},placeholder:"ek numaras"})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-input",value:x.amount,onChange:q=>{const O=[...Q];O[_]={...O[_],amount:Number(q.target.value)},F(O)},style:{width:120}})}),e.jsx("td",{children:e.jsx("input",{type:"date",className:"form-input",value:x.due,onChange:q=>{const O=[...Q];O[_]={...O[_],due:q.target.value},F(O)}})})]},_))})]})}),e.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[e.jsx("span",{className:"text-muted",children:"Girilen toplam: "}),e.jsxs("strong",{children:["",_t(Q.reduce((x,_)=>x+Number(_.amount||0),0))]})]})]})}),e.jsx(Ie,{open:!!C,title:" deme Detay",size:"medium",onClose:()=>y(null),actions:e.jsx("button",{className:"btn btn-primary",onClick:()=>y(null),children:"Kapat"}),children:C&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("div",{style:{background:"#ecfdf5",padding:16,borderRadius:8},children:e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Mteri"}),e.jsx("div",{style:{fontWeight:600},children:C.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:""}),e.jsx("div",{style:{fontWeight:600},children:C.jobTitle})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"deme Tipi"}),e.jsxs("div",{children:[N(C.type)," ",C.typeLabel]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Tutar"}),e.jsxs("div",{style:{fontWeight:700,fontSize:18,color:"var(--color-success)"},children:["",_t(C.amount)]})]})]})}),C.collectedData&&e.jsxs("div",{style:{border:"1px solid var(--color-border)",padding:16,borderRadius:8},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14},children:" Tahsilat Bilgileri"}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Tahsilat Tarihi"}),e.jsx("div",{children:up(C.collectedData.collectedAt)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Alnan Tutar"}),e.jsxs("div",{style:{fontWeight:600},children:["",_t(C.collectedData.collectedAmount)]})]}),C.collectedData.isPartial&&e.jsx("div",{style:{gridColumn:"span 2"},children:e.jsx("span",{className:"badge badge-warning",children:"Ksmi Tahsilat"})}),C.collectedData.discountAmount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"skonto"}),e.jsxs("div",{style:{color:"var(--color-warning)"},children:["",_t(C.collectedData.discountAmount)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"skonto Sebebi"}),e.jsx("div",{children:C.collectedData.discountReason||"-"})]})]}),C.collectedData.note&&e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Not"}),e.jsx("div",{children:C.collectedData.note})]})]})]})]})}),e.jsx(Ie,{open:!!m,title:m?` ${m.jobTitle}`:"",size:"medium",onClose:()=>j(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>window.open(`/isler?job=${m==null?void 0:m.jobId}`,"_blank"),children:" Tam Detay (Yeni Sekme)"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>j(null),children:"Kapat"})]}),children:m&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("div",{style:{background:"var(--color-bg-secondary)",padding:16,borderRadius:8},children:e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:" Kodu"}),e.jsx("code",{children:m.jobId})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:"Mteri"}),e.jsx("div",{style:{fontWeight:600},children:m.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:" Bal"}),e.jsx("div",{style:{fontWeight:600},children:m.jobTitle})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:" Durumu"}),e.jsx("div",{children:yi[m.jobStatus]?e.jsxs("span",{children:[yi[m.jobStatus].icon," ",yi[m.jobStatus].label]}):e.jsx("span",{children:m.jobStatus})})]})]})}),e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx("div",{className:"text-muted",style:{marginBottom:8},children:'Detayl i bilgileri iin "Tam Detay" butonuna tklayn'})})]})})]})},r0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await oj();s(c)}catch(c){a(c.message||"Grevler alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Grevler",subtitle:"Ekip grevlerinizi durumlarna gre takip edin",actions:e.jsx("button",{className:"btn btn-primary",type:"button",children:"+ Grev Ata"})}),r?e.jsx("div",{className:"card subtle-card",children:"Grevler ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Grevler getirilemedi"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"Grev",accessor:"title"},{label:"Sorumlu",accessor:"owner"},{label:"Durum",accessor:"status",render:i=>e.jsx("span",{className:"badge badge-secondary",children:i})},{label:"Termin",accessor:"dueDate"}],rows:t})]})},n0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,f]=d.useState(null),[v,S]=d.useState({customerId:"",customerName:"",title:"",startType:"OLCU",newCustomer:!1,segment:"B2B",location:"",contact:""});d.useEffect(()=>{(async()=>{try{n(!0),a("");const A=await Aa();s(A.filter(C=>!C.deleted))}catch(A){a(A.message||"Mteriler alnamad")}finally{n(!1)}})()},[]);const k=async w=>{w.preventDefault();try{c(!0),a("");let A=v.customerId,C=v.customerName;if(v.newCustomer){const m=await kc({name:v.customerName,segment:v.segment,location:v.location,contact:v.contact});A=m.id,C=m.name,s(j=>[m,...j])}const y=await Vf({customerId:A,customerName:C,title:v.title,startType:v.startType});f(y),S({customerId:"",customerName:"",title:"",startType:"OLCU",newCustomer:!1,segment:"B2B",location:"",contact:""})}catch(A){a(A.message||" oluturulamad")}finally{c(!1)}},R=t.find(w=>w.id===v.customerId);return e.jsxs("div",{children:[e.jsx(Fe,{title:"Yeni  Balat (Wizard)",subtitle:"Mteri se ve balang trn belirle"}),l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:l})]}):null,e.jsxs("form",{className:"card",onSubmit:k,children:[e.jsxs("div",{className:"grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"job-title",children:" Bal"}),e.jsx("input",{id:"job-title",className:"form-input",placeholder:"rn: Balkon PVC Dorama",value:v.title,onChange:w=>S(A=>({...A,title:w.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"start-type",children:"Balatma Tr"}),e.jsxs("select",{id:"start-type",className:"form-select",value:v.startType,onChange:w=>S(A=>({...A,startType:w.target.value})),children:[e.jsx("option",{value:"OLCU",children:"l ile Balat"}),e.jsx("option",{value:"FIYATLANDIRMA",children:"Fiyatlandrma ile Balat"})]})]})]}),e.jsxs("div",{className:"card",style:{marginTop:12},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Mteri"})}),e.jsxs("div",{className:"card-body",style:{display:"flex",gap:16,flexDirection:"column"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"radio",name:"customer-mode",checked:!v.newCustomer,onChange:()=>S(w=>({...w,newCustomer:!1}))}),"Mevcut mteriden se"]}),v.newCustomer?null:e.jsxs("select",{className:"form-select",value:v.customerId,onChange:w=>{const A=w.target.value,C=t.find(y=>y.id===A);S(y=>({...y,customerId:A,customerName:(C==null?void 0:C.name)||""}))},required:!0,children:[e.jsx("option",{value:"",children:"Mteri sein"}),t.map(w=>e.jsxs("option",{value:w.id,children:[w.name," (",w.segment,")"]},w.id))]}),e.jsxs("label",{className:"form-label",style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"radio",name:"customer-mode",checked:v.newCustomer,onChange:()=>S(w=>({...w,newCustomer:!0,customerId:"",customerName:""}))}),"Yeni mteri olutur"]}),v.newCustomer?e.jsxs("div",{className:"grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"new-name",children:"Ad"}),e.jsx("input",{id:"new-name",className:"form-input",value:v.customerName,onChange:w=>S(A=>({...A,customerName:w.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"new-segment",children:"Segment"}),e.jsxs("select",{id:"new-segment",className:"form-select",value:v.segment,onChange:w=>S(A=>({...A,segment:w.target.value})),children:[e.jsx("option",{value:"B2B",children:"B2B"}),e.jsx("option",{value:"B2C",children:"B2C"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"new-location",children:"Lokasyon"}),e.jsx("input",{id:"new-location",className:"form-input",value:v.location,onChange:w=>S(A=>({...A,location:w.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"new-contact",children:"letiim"}),e.jsx("input",{id:"new-contact",className:"form-input",value:v.contact,onChange:w=>S(A=>({...A,contact:w.target.value}))})]})]}):R?e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Segment"}),e.jsx("span",{className:"metric-value",children:R.segment})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Lokasyon"}),e.jsx("span",{className:"metric-value",children:R.location})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"letiim"}),e.jsx("span",{className:"metric-value",children:R.contact})]})]}):null]})]}),e.jsxs("div",{className:"page-actions",style:{marginTop:16},children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>f(null),children:"Temizle"}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:i,children:i?"Kaydediliyor...":"Kaydet ve Balat"})]})]}),u?e.jsxs("div",{className:"card",style:{marginTop:24},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:" oluturuldu"}),e.jsx("span",{className:"badge badge-primary",children:u.id})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"metric-list",children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:" Bal"}),e.jsx("span",{className:"metric-value",children:u.title})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Mteri"}),e.jsx("span",{className:"metric-value",children:u.customerName})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Durum"}),e.jsx("span",{className:"metric-value",children:u.status})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Balatma"}),e.jsx("span",{className:"metric-value",children:u.startType})]})]})})]}):null]})},l0=[{code:"+90",iso:"TR",flag:"",format:"### ### ## ##"},{code:"+49",iso:"DE",flag:"",format:"### ### ####"},{code:"+44",iso:"GB",flag:"",format:"#### ### ###"},{code:"+1",iso:"US",flag:"",format:"### ### ####"},{code:"+33",iso:"FR",flag:"",format:"# ## ## ## ##"},{code:"+31",iso:"NL",flag:"",format:"## ### ####"},{code:"+32",iso:"BE",flag:"",format:"### ## ## ##"},{code:"+43",iso:"AT",flag:"",format:"### ### ####"},{code:"+41",iso:"CH",flag:"",format:"## ### ## ##"},{code:"+46",iso:"SE",flag:"",format:"## ### ## ##"},{code:"+47",iso:"NO",flag:"",format:"### ## ###"},{code:"+45",iso:"DK",flag:"",format:"## ## ## ##"},{code:"+358",iso:"FI",flag:"",format:"## ### ####"},{code:"+39",iso:"IT",flag:"",format:"### ### ####"},{code:"+34",iso:"ES",flag:"",format:"### ### ###"},{code:"+30",iso:"GR",flag:"",format:"### ### ####"},{code:"+7",iso:"RU",flag:"",format:"### ### ## ##"},{code:"+380",iso:"UA",flag:"",format:"## ### ## ##"},{code:"+994",iso:"AZ",flag:"",format:"## ### ## ##"},{code:"+995",iso:"GE",flag:"",format:"### ### ###"},{code:"+374",iso:"AM",flag:"",format:"## ### ###"},{code:"+972",iso:"IL",flag:"",format:"## ### ####"},{code:"+966",iso:"SA",flag:"",format:"## ### ####"},{code:"+971",iso:"AE",flag:"",format:"## ### ####"},{code:"+86",iso:"CN",flag:"",format:"### #### ####"},{code:"+81",iso:"JP",flag:"",format:"## #### ####"},{code:"+82",iso:"KR",flag:"",format:"## #### ####"},{code:"+91",iso:"IN",flag:"",format:"##### #####"},{code:"+61",iso:"AU",flag:"",format:"### ### ###"},{code:"+55",iso:"BR",flag:"",format:"## ##### ####"},{code:"+48",iso:"PL",flag:"",format:"### ### ###"},{code:"+420",iso:"CZ",flag:"",format:"### ### ###"},{code:"+36",iso:"HU",flag:"",format:"## ### ####"},{code:"+40",iso:"RO",flag:"",format:"### ### ###"},{code:"+359",iso:"BG",flag:"",format:"## ### ####"}],ny=t=>{if(!t)return null;const s=t.replace(/\s/g,""),r=[...l0].sort((n,l)=>l.code.length-n.code.length);for(const n of r)if(s.startsWith(n.code))return n;return null},a0=t=>{if(!t)return"";let s=t.replace(/[^\d+]/g,"");s&&!s.startsWith("+")&&(s="+"+s);const r=ny(s);if(!r)return s;const n=s.substring(r.code.length);if(!n)return r.code+" ";let l="",a=0;for(let i=0;i<r.format.length&&a<n.length;i++)r.format[i]==="#"?(l+=n[a],a++):l+=r.format[i];return r.code+" "+l};function mp({value:t="",onChange:s,placeholder:r="+90 5XX XXX XX XX",required:n=!1,disabled:l=!1,label:a,className:i=""}){const c=d.useMemo(()=>ny(t),[t]),u=f=>{let v=f.target.value;v=v.replace(/[^\d+\s]/g,"");const S=a0(v);s(S)};return e.jsxs("div",{className:`phone-input-wrapper ${i}`,children:[a&&e.jsx("label",{className:"form-label",children:a}),e.jsxs("div",{style:{display:"flex",alignItems:"center",border:"1px solid var(--color-border)",borderRadius:8,overflow:"hidden",background:l?"var(--color-bg-secondary)":"white"},children:[e.jsx("div",{style:{padding:"10px 12px",background:"var(--color-bg-secondary)",borderRight:"1px solid var(--color-border)",display:"flex",alignItems:"center",gap:6,minWidth:70,justifyContent:"center"},children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:18},children:c.flag}),e.jsx("span",{style:{fontWeight:600,fontSize:13,color:"var(--color-text)"},children:c.iso})]}):e.jsx("span",{style:{fontSize:13,color:"var(--color-text-light)"},children:""})}),e.jsx("input",{type:"tel",value:t,onChange:u,placeholder:r,required:n,disabled:l,style:{flex:1,padding:"10px 12px",border:"none",outline:"none",fontSize:15,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",letterSpacing:.5,background:"transparent"}})]})]})}const Dn=t=>({...t,roles:Array.isArray(t==null?void 0:t.roles)?t.roles:[],payments:(t==null?void 0:t.payments)||{},offer:(t==null?void 0:t.offer)||{},files:(t==null?void 0:t.files)||{},measure:(t==null?void 0:t.measure)||{},pendingPO:(t==null?void 0:t.pendingPO)||[]}),xi=t=>{if(!t)return"Bilinmeyen hata";if(typeof t=="string")return t;if(t.message)return t.message;if(t.detail)return t.detail;try{return JSON.stringify(t)}catch{return String(t)}},pe=t=>new Intl.NumberFormat("tr-TR").format(t||0),i0=t=>{if(!t&&t!==0)return"";const s=String(t).replace(/[^\d]/g,"");return s?new Intl.NumberFormat("tr-TR").format(Number(s)):""},yt=({value:t,onChange:s,placeholder:r,className:n="form-input",style:l={}})=>{const[a,i]=d.useState("");d.useEffect(()=>{t!=null&&t!==""?i(i0(t)):i("")},[t]);const c=u=>{const S=u.target.value.replace(/[^\d.,]/g,"").replace(/[^\d]/g,""),k=S?new Intl.NumberFormat("tr-TR").format(Number(S)):"";i(k),s(S?Number(S):"")};return e.jsx("input",{type:"text",className:n,placeholder:r,value:a,onChange:c,style:{textAlign:"right",...l}})},gi=t=>{if(!t)return"-";try{return new Date(t).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return t}},o0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(""),[i,c]=d.useState("all"),[u,f]=d.useState(!0),[v,S]=d.useState(""),[k,R]=d.useState(!1),[w,A]=d.useState(!1),[C,y]=d.useState(!1),[m,j]=d.useState(null),[z,P]=d.useState(""),[W,G]=d.useState(!1),[Q,F]=d.useState(""),[b,Z]=d.useState({customerId:"",customerName:"",startType:"OLCU",title:"",phone:"+90 ",phone2:"",address:"",newCustomer:!1,segment:"B2B",location:"",contact:"",roles:[],isArchive:!1,archiveDate:"",archiveCompletedDate:"",archiveTotalAmount:"",archiveNote:"",customerFiles:[],serviceNote:"",serviceFixedFee:""}),[Se,fe]=d.useState([]),[H,$]=d.useState("");d.useEffect(()=>{(async()=>{try{f(!0),S("");const[x,_]=await Promise.all([Sr(),Aa()]);s(x.map(Dn)),n(_.filter(O=>!O.deleted));const q=await yj();fe(q)}catch(x){S(x.message||" listesi alnamad")}finally{f(!1)}})()},[]);const E=d.useMemo(()=>{const N=l.trim().toLowerCase();return t.filter(x=>i==="all"?!0:(x.status||"").toUpperCase()===i.toUpperCase()).filter(x=>N?(x.title||"").toLowerCase().includes(N)||(x.customerName||"").toLowerCase().includes(N)||(x.id||"").toLowerCase().includes(N):!0)},[t,l,i]),ie=[{label:" Kodu",accessor:"id"},{label:"Balk",accessor:"title"},{label:"Mteri",accessor:"customerName"},{label:" Kollar",accessor:"roles",render:(N,x)=>!x.roles||x.roles.length===0?e.jsx("span",{className:"text-muted",children:"Belirtilmemi"}):e.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:x.roles.map(_=>e.jsx("span",{className:"badge badge-secondary",children:_.name},_.id||_.name))})},{label:"Durum",accessor:"status",render:(N,x)=>En(x.status)},{label:"Balatma",accessor:"startType",render:(N,x)=>{const _={OLCU:" l",MUSTERI_OLCUSU:" Mteri ls",SERVIS:" Servis",ARSIV:" Ariv"};return e.jsx("span",{className:x.isArchive||x.startType==="ARSIV"?"badge badge-secondary":"",children:_[x.startType]||x.startType})}}],J=async N=>{A(!0),y(!0),P(""),j(Dn(N));try{const x=await tj(N.id);j(Dn(x))}catch(x){P(x.message||" detay alnamad")}finally{y(!1)}},ee=N=>{Z(x=>x.roles.find(q=>q.id===N.id)?{...x,roles:x.roles.filter(q=>q.id!==N.id)}:{...x,roles:[...x.roles,N]})};d.useMemo(()=>{const N=H.trim().toLowerCase();return N?Se.filter(x=>x.name.toLowerCase().includes(N)||(x.description||"").toLowerCase().includes(N)):Se},[Se,H]);const re=d.useMemo(()=>{const N=Q.trim().toLowerCase();return N?N.length<2?[]:r.filter(x=>{const _=(x.name||"").toLowerCase().includes(N),q=(x.phone||"").replace(/\s/g,"").includes(N.replace(/\s/g,"")),O=(x.phone2||"").replace(/\s/g,"").includes(N.replace(/\s/g,""));return _||q||O}).slice(0,10):[]},[r,Q]);return e.jsxs("div",{children:[e.jsx(Fe,{title:" Listesi",subtitle:"Aktif tm ilerinizi tek ekranda takip edin",actions:e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{Z({customerId:"",customerName:"",startType:"OLCU",title:"",newCustomer:!1,segment:"B2B",location:"",contact:"",roles:[],isArchive:!1,archiveDate:"",archiveCompletedDate:"",archiveTotalAmount:"",archiveNote:""}),R(!0)},children:"+ Yeni  Balat"})}),e.jsxs("div",{className:"filter-bar",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",htmlFor:"search",children:"Arama"}),e.jsx("input",{id:"search",className:"filter-input",type:"search",placeholder:" ad, mteri veya i kodu",value:l,onChange:N=>a(N.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",htmlFor:"status",children:"Durum"}),e.jsxs("select",{id:"status",className:"filter-select",value:i,onChange:N=>c(N.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),e.jsxs("optgroup",{label:"l/Keif",children:[e.jsx("option",{value:"OLCU_RANDEVU_BEKLIYOR",children:"Randevu Bekliyor"}),e.jsx("option",{value:"OLCU_RANDEVULU",children:"Randevu Verildi"}),e.jsx("option",{value:"OLCU_ALINDI",children:"l Alnd"}),e.jsx("option",{value:"MUSTERI_OLCUSU_BEKLENIYOR",children:"Mteri ls Bekleniyor"}),e.jsx("option",{value:"MUSTERI_OLCUSU_YUKLENDI",children:"Mteri ls Yklendi"})]}),e.jsxs("optgroup",{label:"Fiyatlandrma",children:[e.jsx("option",{value:"FIYATLANDIRMA",children:"Fiyat Verilecek"}),e.jsx("option",{value:"FIYAT_VERILDI",children:"Fiyat Verildi - Onay Bekliyor"}),e.jsx("option",{value:"ANLASILAMADI",children:"Anlalamad"})]}),e.jsxs("optgroup",{label:"Anlama",children:[e.jsx("option",{value:"ANLASMA_YAPILIYOR",children:"Anlama Yaplyor"}),e.jsx("option",{value:"ANLASMA_TAMAMLANDI",children:"Anlama Tamamland"})]}),e.jsx("optgroup",{label:"Stok/Rezervasyon",children:e.jsx("option",{value:"SONRA_URETILECEK",children:"Sonra retilecek"})}),e.jsxs("optgroup",{label:"retim",children:[e.jsx("option",{value:"URETIME_HAZIR",children:"retime Hazr"}),e.jsx("option",{value:"URETIMDE",children:"retimde"})]}),e.jsxs("optgroup",{label:"Montaj",children:[e.jsx("option",{value:"MONTAJA_HAZIR",children:"Montaja Hazr"}),e.jsx("option",{value:"MONTAJ_TERMIN",children:"Montaj Terminli"})]}),e.jsxs("optgroup",{label:"Finans",children:[e.jsx("option",{value:"MUHASEBE_BEKLIYOR",children:"Muhasebe Bekliyor"}),e.jsx("option",{value:"KAPALI",children:"Kapal"})]}),e.jsxs("optgroup",{label:"Servis",children:[e.jsx("option",{value:"SERVIS_RANDEVU_BEKLIYOR",children:"Servis Randevusu Bekliyor"}),e.jsx("option",{value:"SERVIS_RANDEVULU",children:"Servis Randevulu"}),e.jsx("option",{value:"SERVIS_YAPILIYOR",children:"Servis Yaplyor"}),e.jsx("option",{value:"SERVIS_DEVAM_EDIYOR",children:"Servis Devam Ediyor"}),e.jsx("option",{value:"SERVIS_ODEME_BEKLIYOR",children:"Servis deme Bekliyor"}),e.jsx("option",{value:"SERVIS_KAPALI",children:"Servis Tamamland"})]})]})]})]}),u?e.jsx(Dt,{text:"ler ykleniyor..."}):v?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Liste yklenemedi"}),e.jsx("div",{className:"error-message",children:v})]}):e.jsx(dt,{columns:ie,rows:E,getKey:N=>N.id,onRowClick:J}),e.jsx(Ie,{open:k,title:" Yeni  Balat",size:"large",onClose:()=>{R(!1),F("")},actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>R(!1),disabled:W,children:"Vazge"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"job-modal-form",disabled:W,children:W?"Kaydediliyor...":b.isArchive?" Arive Kaydet":"i Balat"})]}),children:e.jsxs("form",{id:"job-modal-form",onSubmit:async N=>{N.preventDefault();try{G(!0),S("");let x=b.customerId,_=b.customerName;if(b.newCustomer){const Y=await kc({name:b.customerName,segment:b.segment,phone:b.phone,phone2:b.phone2,address:b.address,location:b.location,contact:b.contact});x=Y.id,_=Y.name,n(ye=>[Y,...ye])}const q={customerId:x,customerName:_,title:b.title,startType:b.isArchive?"ARSIV":b.startType,roles:b.roles};b.isArchive&&(q.isArchive=!0,q.archiveDate=b.archiveDate,q.archiveCompletedDate=b.archiveCompletedDate,q.archiveTotalAmount=b.archiveTotalAmount?Number(b.archiveTotalAmount):null,q.archiveNote=b.archiveNote);const O=await Vf(q);s(Y=>[Dn(O),...Y]),Z(Y=>({...Y,roles:[],isArchive:!1,archiveDate:"",archiveCompletedDate:"",archiveTotalAmount:"",archiveNote:""})),F(""),R(!1)}catch(x){S(x.message||" oluturulamad")}finally{G(!1)}},children:[e.jsxs("div",{className:"card subtle-card",style:{marginBottom:16},children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Mteri"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{type:"button",className:`btn btn-small ${b.newCustomer?"btn-secondary":"btn-primary"}`,onClick:()=>Z(N=>({...N,newCustomer:!1})),children:"Mevcut"}),e.jsx("button",{type:"button",className:`btn btn-small ${b.newCustomer?"btn-primary":"btn-secondary"}`,onClick:()=>Z(N=>({...N,newCustomer:!0,customerId:"",customerName:""})),children:"+ Yeni"})]})]}),e.jsx("div",{className:"card-body",style:{padding:16},children:b.newCustomer?e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Ad Soyad *"}),e.jsx("input",{className:"form-input",value:b.customerName,onChange:N=>Z(x=>({...x,customerName:N.target.value})),placeholder:"rn: Ahmet Ylmaz",required:!0})]}),e.jsx("div",{className:"form-group",children:e.jsx(mp,{label:" Telefon 1 *",value:b.phone,onChange:N=>Z(x=>({...x,phone:N})),required:!0})}),e.jsx("div",{className:"form-group",children:e.jsx(mp,{label:" Telefon 2 (istee bal)",value:b.phone2,onChange:N=>Z(x=>({...x,phone2:N}))})}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:" Adres"}),e.jsx("textarea",{className:"form-textarea",value:b.address,onChange:N=>Z(x=>({...x,address:N.target.value})),placeholder:"Tam adres...",rows:2})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Segment"}),e.jsxs("select",{className:"form-select",value:b.segment,onChange:N=>Z(x=>({...x,segment:N.target.value})),children:[e.jsx("option",{value:"B2C",children:"Bireysel (B2C)"}),e.jsx("option",{value:"B2B",children:"Kurumsal (B2B)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"le / Semt"}),e.jsx("input",{className:"form-input",value:b.location,onChange:N=>Z(x=>({...x,location:N.target.value})),placeholder:"rn: Kadky"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[e.jsx("label",{className:"form-label",children:" Mteri Ara (sim veya Telefon)"}),e.jsx("input",{className:"form-input",placeholder:"rn: Ahmet veya 532 123...",value:Q,onChange:N=>F(N.target.value),autoFocus:!0})]}),b.customerId&&e.jsx("div",{style:{padding:12,background:"var(--color-success-bg)",borderRadius:8,border:"1px solid var(--color-success)",marginBottom:12},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:[" ",b.customerName]}),(()=>{const N=r.find(x=>x.id===b.customerId);return N!=null&&N.phone?e.jsxs("div",{style:{fontSize:12},children:[" ",N.phone]}):null})()]}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-small",onClick:()=>Z(N=>({...N,customerId:"",customerName:""})),children:"Deitir"})]})}),!b.customerId&&Q.length>=2&&e.jsx("div",{style:{maxHeight:200,overflow:"auto",border:"1px solid var(--color-border)",borderRadius:8},children:re.length===0?e.jsxs("div",{style:{padding:16,textAlign:"center"},className:"text-muted",children:['"',Q,'" ile eleen mteri bulunamad']}):re.map(N=>e.jsxs("div",{style:{padding:"10px 16px",cursor:"pointer",borderBottom:"1px solid var(--color-border)",transition:"background 0.2s"},className:"hover-row",onClick:()=>{Z(x=>({...x,customerId:N.id,customerName:N.name})),F("")},children:[e.jsx("div",{style:{fontWeight:600},children:N.name}),e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[N.phone&&` ${N.phone}`,N.phone&&N.address&&"  ",N.address&&` ${N.address.substring(0,30)}...`]})]},N.id))}),!b.customerId&&Q.length<2&&e.jsx("div",{className:"text-muted",style:{fontSize:12},children:" En az 2 karakter girerek mteri arayn"})]})})]}),e.jsxs("div",{className:"card subtle-card",style:{marginBottom:16},children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"  Bilgileri"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Bal *"}),e.jsx("input",{className:"form-input",value:b.title,onChange:N=>Z(x=>({...x,title:N.target.value})),placeholder:"rn: Balkon PVC Dorama",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Balatma Tr"}),e.jsxs("select",{className:"form-select",value:b.isArchive?"ARSIV":b.startType,onChange:N=>{const x=N.target.value;Z(x==="ARSIV"?_=>({..._,isArchive:!0,startType:"OLCU"}):_=>({..._,isArchive:!1,startType:x}))},children:[e.jsx("option",{value:"OLCU",children:" l Randevusu"}),e.jsx("option",{value:"MUSTERI_OLCUSU",children:" Mteri ls"}),e.jsx("option",{value:"SERVIS",children:" Servis/Bakm"}),e.jsx("option",{value:"ARSIV",children:" Ariv Kayd (Tamamlanm )"})]})]})]}),e.jsxs("div",{className:"text-muted",style:{fontSize:12,marginTop:8},children:[!b.isArchive&&b.startType==="OLCU"&&" l randevusu verilecek, sonra fiyatlandrlacak.",!b.isArchive&&b.startType==="MUSTERI_OLCUSU"&&" Mteri ls ile direkt fiyatlandrmaya geilecek.",!b.isArchive&&b.startType==="SERVIS"&&" Servis randevusu ve sabit cret belirlenecek.",b.isArchive&&" Gemite tamamlanm bir ii sisteme kaydedin. Sre haritas atlanr."]}),b.isArchive&&e.jsxs("div",{style:{marginTop:16,padding:16,background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:12,border:"1px solid #f59e0b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontWeight:600,color:"#92400e"},children:"Ariv Bilgileri"})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:" Anlama Tarihi *"}),e.jsx("input",{type:"date",className:"form-input",value:b.archiveDate,onChange:N=>Z(x=>({...x,archiveDate:N.target.value})),required:b.isArchive,max:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:" Tamamlanma Tarihi"}),e.jsx("input",{type:"date",className:"form-input",value:b.archiveCompletedDate,onChange:N=>Z(x=>({...x,archiveCompletedDate:N.target.value})),max:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:" Toplam Tutar ()"}),e.jsx("input",{type:"number",className:"form-input",value:b.archiveTotalAmount,onChange:N=>Z(x=>({...x,archiveTotalAmount:N.target.value})),placeholder:"rn: 15000",min:"0"})]}),e.jsxs("div",{className:"form-group",style:{margin:0,gridColumn:"span 2"},children:[e.jsx("label",{className:"form-label",children:" Not (Opsiyonel)"}),e.jsx("textarea",{className:"form-input",value:b.archiveNote,onChange:N=>Z(x=>({...x,archiveNote:N.target.value})),placeholder:"Ariv kayd ile ilgili notlar...",rows:2,style:{resize:"vertical"}})]})]})]})]})]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"  Kollar"}),e.jsxs("span",{className:"badge badge-secondary",children:[b.roles.length," seili"]})]}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[b.roles.length>0&&e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:b.roles.map(N=>e.jsxs("span",{className:"badge badge-primary",style:{padding:"6px 12px",display:"inline-flex",gap:8,alignItems:"center",cursor:"pointer"},onClick:()=>ee(N),children:[N.name,e.jsx("span",{style:{opacity:.7},children:""})]},N.id))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:8},children:Se.map(N=>{const x=b.roles.some(_=>_.id===N.id);return e.jsx("button",{type:"button",style:{padding:"10px 12px",border:x?"2px solid var(--color-primary)":"1px solid var(--color-border)",borderRadius:8,background:x?"var(--color-primary-bg)":"var(--color-bg-secondary)",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onClick:()=>ee(N),children:e.jsxs("div",{style:{fontWeight:600,fontSize:13,color:x?"var(--color-primary)":"var(--color-text)"},children:[x&&" ",N.name]})},N.id)})}),b.roles.length===0&&e.jsx("div",{className:"text-muted",style:{fontSize:12,marginTop:8},children:" En az bir i kolu sein"})]})]})]})}),e.jsx(Ie,{open:w,title:` Detay ${m?`- ${m.id}`:""}`,size:"xxlarge",onClose:()=>{A(!1),j(null),P("")},children:C?e.jsx("div",{children:"Ykleniyor..."}):z?e.jsxs("div",{className:"error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:z})]}):m?e.jsx(c0,{job:m,customers:r,onUpdated:async N=>{j(N),s(x=>x.map(_=>_.id===N.id?N:_))}}):null})]})},ha={OLCU_RANDEVU_BEKLIYOR:{label:"Randevu Bekliyor",tone:"warning",icon:""},OLCU_RANDEVULU:{label:"Randevu Verildi",tone:"info",icon:""},OLCU_ALINDI:{label:"l Alnd",tone:"success",icon:""},MUSTERI_OLCUSU_BEKLENIYOR:{label:"Mteri ls Bekleniyor",tone:"warning",icon:""},MUSTERI_OLCUSU_YUKLENDI:{label:"Mteri ls Yklendi",tone:"success",icon:""},FIYATLANDIRMA:{label:"Fiyat Verilecek",tone:"secondary",icon:""},FIYAT_VERILDI:{label:"Fiyat Verildi - Onay Bekliyor",tone:"warning",icon:""},ANLASILAMADI:{label:"Anlalamad",tone:"danger",icon:""},ANLASMA_YAPILIYOR:{label:"Anlama Yaplyor",tone:"primary",icon:""},ANLASMA_TAMAMLANDI:{label:"Anlama Tamamland",tone:"success",icon:""},SONRA_URETILECEK:{label:"Sonra retilecek",tone:"info",icon:""},URETIME_HAZIR:{label:"retime Hazr",tone:"success",icon:""},URETIMDE:{label:"retimde",tone:"primary",icon:""},MONTAJA_HAZIR:{label:"Montaja Hazr",tone:"success",icon:""},MONTAJ_TERMIN:{label:"Montaj Terminli",tone:"primary",icon:""},MUHASEBE_BEKLIYOR:{label:"Muhasebe Bekliyor",tone:"secondary",icon:""},KAPALI:{label:"Kapal",tone:"success",icon:""},SERVIS_RANDEVU_BEKLIYOR:{label:"Servis Randevusu Bekliyor",tone:"warning",icon:""},SERVIS_RANDEVULU:{label:"Servis Randevulu",tone:"primary",icon:""},SERVIS_YAPILIYOR:{label:"Servis Yaplyor",tone:"info",icon:""},SERVIS_DEVAM_EDIYOR:{label:"Servis Devam Ediyor",tone:"warning",icon:""},SERVIS_ODEME_BEKLIYOR:{label:"Servis deme Bekliyor",tone:"warning",icon:""},SERVIS_KAPALI:{label:"Servis Tamamland",tone:"success",icon:""}},En=t=>{const s=ha[t];if(s)return e.jsxs("span",{className:`badge badge-${s.tone}`,children:[s.icon," ",s.label]});const r=t||"Bilinmiyor",n=r.toLowerCase();let l="secondary";return(n.includes("l")||n.includes("olcu"))&&(l="primary"),n.includes("fiyat")&&(l="secondary"),n.includes("teklif")&&(l="secondary"),n.includes("onay")&&(l="warning"),n.includes("stok")&&(l="warning"),(n.includes("hazr")||n.includes("hazir"))&&(l="success"),(n.includes("anlama")||n.includes("anlasma"))&&(l="info"),n.includes("retim")&&(l="warning"),n.includes("montaj")&&(l="primary"),n.includes("muhasebe")&&(l="secondary"),(n.includes("kapal")||n.includes("kapali"))&&(l="success"),n.includes("servis")&&(l="info"),e.jsx("span",{className:`badge badge-${l}`,children:r})},jo=[{id:"measure",label:"l/Keif",statuses:["OLCU_RANDEVU_BEKLIYOR","OLCU_RANDEVULU","OLCU_ALINDI","MUSTERI_OLCUSU_BEKLENIYOR","MUSTERI_OLCUSU_YUKLENDI"]},{id:"pricing",label:"Fiyatlandrma",statuses:["FIYATLANDIRMA","FIYAT_VERILDI","ANLASILAMADI"]},{id:"agreement",label:"Anlama",statuses:["ANLASMA_YAPILIYOR"]},{id:"stock",label:"Stok/Rezervasyon",statuses:["ANLASMA_TAMAMLANDI","SONRA_URETILECEK"]},{id:"production",label:"retim",statuses:["URETIME_HAZIR","URETIMDE"]},{id:"assembly",label:"Montaj",statuses:["MONTAJA_HAZIR","MONTAJ_TERMIN"]},{id:"finance",label:"Finans Kapan",statuses:["MUHASEBE_BEKLIYOR","KAPALI"]}],No=[{id:"service_schedule",label:"Randevu",statuses:["SERVIS_RANDEVU_BEKLIYOR"]},{id:"service_start",label:"Balat",statuses:["SERVIS_RANDEVULU"]},{id:"service_work",label:"Servis",statuses:["SERVIS_YAPILIYOR","SERVIS_DEVAM_EDIYOR"]},{id:"service_payment",label:"deme",statuses:["SERVIS_ODEME_BEKLIYOR"]},{id:"service_done",label:"Tamamland",statuses:["SERVIS_KAPALI"]}],vi=(t,s)=>{var a,i;const r=jo.find(c=>c.id===s)||No.find(c=>c.id===s);if(!r||!t.logs)return[];const n=r.statuses||[],l=[];for(const c of t.logs)if(c.action==="status.updated"&&c.note){const u=c.note.match(/(\w+)\s*->\s*(\w+)/);if(u){const[,f,v]=u;(n.includes(f)||n.includes(v))&&l.push({from:f,to:v,at:c.at,fromLabel:((a=ha[f])==null?void 0:a.label)||f,toLabel:((i=ha[v])==null?void 0:i.label)||v})}}return l},c0=({job:t,customers:s=[],onUpdated:r})=>{var Pc,Oc,_c,Mc,Fc,Uc,Kc,Wc,$c,qc,Hc,Vc,Yc,Gc,Qc,Jc,Xc,Zc,ed,td,sd,rd,nd,ld,ad,id,od,cd,dd,ud,md,pd,hd,fd,yd,xd,gd,vd,jd,Nd,bd,Sd,kd,Cd,wd,Td,zd,Dd,Ed,Id,Ad,Rd,Ld,Bd,Pd,Od,_d,Md,Fd,Ud,Kd,Wd,$d,qd,Hd,Vd,Yd,Gd,Qd,Jd,Xd,Zd,eu,tu,su,ru,nu,lu,au,iu,ou,cu,du,uu,mu,pu,hu,fu,yu,xu,gu,vu,ju,Nu,bu,Su,ku,Cu,wu,Tu,zu,Du,Eu,Iu,Au,Ru,Lu,Bu,Pu,Ou,_u,Mu;const n=s.find(o=>o.id===t.customerId)||{},[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,f]=d.useState(!1),[v,S]=d.useState(""),[k,R]=d.useState([]),[w,A]=d.useState(""),[C,y]=d.useState(""),[m,j]=d.useState(""),[z,P]=d.useState(null),[W,G]=d.useState(1),[Q,F]=d.useState(!1),[b,Z]=d.useState([]),[Se,fe]=d.useState(!1),[H,$]=d.useState(null),[E,ie]=d.useState(1),[J,ee]=d.useState(!1),[re,N]=d.useState(""),[x,_]=d.useState(""),[q,O]=d.useState({orders:[],summary:{}}),[Y,ye]=d.useState(!1),[Pe,Te]=d.useState(!1),[$e,Ve]=d.useState(!1),[Ue,_e]=d.useState(null),[Ze,V]=d.useState([]),[le,Oe]=d.useState([]),[ze,we]=d.useState([]),[Le,Ee]=d.useState([]),[g,K]=d.useState({roleId:"",roleName:"",productionType:"internal",productionDescription:"",productionQty:1,productionUnit:"adet",productionEstDelivery:"",productionNotes:"",productionSupplierId:"",productionSupplierName:"",requiresGlass:!1,includeGlass:!1,glassItems:[{glassType:"",glassName:"",quantity:1,combination:""}],glassSupplierId:"",glassSupplierName:"",glassEstDelivery:""}),[ue,je]=d.useState({deliveries:[],deliveryDate:"",deliveryNote:""}),[De,B]=d.useState([]),[te,Be]=d.useState(""),[T,X]=d.useState(!1),[oe,Ke]=d.useState(t.pendingPO||[]),[p,D]=d.useState({measureNote:"",appointment:"",measureCall:!1,measureConfirmed:!1,measureDraftFile:"",techDrawingFile:"",orderNo:"",cariCode:"",offerExpanded:!0,offerTotal:"",pricingNotifiedDate:"",rejectionReason:"",rejectionCategory:"",rejectionFollowUp:"",showRejectionModal:!1,roleDiscounts:{},showNegotiationPanel:!1,payCash:"",payCashDate:"",payCard:"",payCardDate:"",payAfter:"",payAfterNote:"",chequeLines:[],chequesReceived:!1,chequeCount:"",chequeTotalAmount:"",stockReady:!0,stockNote:"",productionStatus:"URETIMDE",agreementDate:"",assemblyDate:"",assemblyNote:"",assemblyTeam:"",proofNote:"",financeTotal:"",financeCash:"",financeCard:"",financeCheque:"",discountAmount:"",discountNote:"",rolePrices:{},serviceAppointmentDate:"",serviceAppointmentTime:"10:00",serviceFixedFee:"",serviceNote:"",serviceVisitDate:"",serviceVisitTime:"",serviceWorkNote:"",serviceMaterials:"",serviceExtraCost:"",servicePaymentCash:"",servicePaymentCard:"",servicePaymentTransfer:"",serviceDiscount:"",serviceDiscountNote:"",serviceNewAppointmentDate:"",serviceNewAppointmentTime:"10:00",serviceNewAppointmentNote:""}),[ae,Ne]=d.useState(!1),[ce,Ge]=d.useState([]),[Es,cn]=d.useState(!1),[dn,jt]=d.useState([]);d.useEffect(()=>{var M;const o=t.measure||{},h=t.offer||{},I=t.payments||{},L=((M=t.assembly)==null?void 0:M.schedule)||{},U=t.finance||{};D(ne=>{var de,xe,Ce,be,at,qe,tt,me,ve;return{...ne,measureNote:o.note||"",appointment:o.appointment||"",measureCall:o.call||!1,measureConfirmed:o.confirm||!1,orderNo:h.orderNo||"",cariCode:h.cariCode||t.customerAccountCode||"",offerTotal:h.total||"",payCash:I.cash||"",payCard:I.card||"",payCheque:I.cheque||"",payAfter:I.after||"",chequeLines:I.chequeLines||[],productionStatus:t.status==="ANLASMADA"?"ANLASMADA":t.status==="MONTAJA_HAZIR"?"MONTAJA_HAZIR":"URETIMDE",agreementDate:t.agreementDate||"",assemblyDate:L.date||"",assemblyNote:L.note||"",assemblyTeam:L.team||"",financeTotal:U.total||h.total||"",financeCash:U.cash||I.cash||"",rolePrices:t.rolePrices||{},serviceAppointmentDate:((de=t.service)==null?void 0:de.appointmentDate)||"",serviceAppointmentTime:((xe=t.service)==null?void 0:xe.appointmentTime)||"10:00",serviceFixedFee:((Ce=t.service)==null?void 0:Ce.fixedFee)||"",serviceNote:((be=t.service)==null?void 0:be.note)||"",serviceWorkNote:((at=t.service)==null?void 0:at.workNote)||"",serviceMaterials:((qe=t.service)==null?void 0:qe.materials)||"",serviceExtraCost:((tt=t.service)==null?void 0:tt.extraCost)||"",serviceExtraNote:((me=t.service)==null?void 0:me.extraNote)||"",serviceCloseNote:((ve=t.service)==null?void 0:ve.closeNote)||"",financeCard:U.card||I.card||"",financeCheque:U.cheque||I.cheque||"",discountAmount:U.discount||"",discountNote:U.discountNote||""}})},[t]);const kr=t.startType==="SERVIS",rr=kr?No:jo,La=(o,h)=>h.find(I=>I.statuses.includes(o))||h[0],Cr=La(t.status||"OLCU_RANDEVU_BEKLIYOR",rr),[Dc,Ba]=d.useState(Cr.id);d.useEffect(()=>{const o=La(t.status||"OLCU_RANDEVU_BEKLIYOR",rr);Ba(o.id)},[t.id,t.status,rr]);const qt=o=>Dc===o,ly=o=>Ba(o),Ec=o=>{const h=rr.findIndex(L=>L.id===Cr.id),I=rr.findIndex(L=>L.id===o);return I<h?"done":I===h?"current":"pending"},Qe=Ec(Dc)==="done",wr=async(o,h,I={})=>{try{await hj({jobId:t.id,action:o,detail:h,meta:I});const L=await ap(t.id);B(L)}catch{}},ay=async()=>{try{cn(!0);const o=await Sj(t.id);Ge(o)}catch{}finally{cn(!1)}},iy=o=>{const h=o.startType==="SERVIS"?No:jo,I=La(o.status,h);I.id!==Cr.id&&Ba(I.id)},oy=(o,h)=>!(h!=null&&h.skipAdvance),et=async(o,h,I={})=>{try{c(!0),a("");const L=await o(),U=Dn(L);r(U),await wr("update",`Aama: ${Cr.label}`,{stage:Cr.id,...h||{}}),oy(U,h)&&iy(U)}catch(L){a(xi(L)||"lem baarsz")}finally{c(!1)}},un=async(o,h,I="")=>{if(o)try{Ne(!0);const L=await kj(o,t.id,h,I);return Ge(U=>[L,...U]),L}catch(L){return a(L.message||"Dosya yklenemedi"),null}finally{Ne(!1)}},Pa=async o=>{try{await Zf(o),Ge(h=>h.filter(I=>I.id!==o))}catch(h){a(h.message||"Dosya silinemedi")}},cy=async()=>{try{f(!0),S("");const h=(await dl()||[]).map(I=>({...I,available:Math.max(0,(I.onHand||0)-(I.reserved||0))}));R(h)}catch(o){S(o.message||"Stok listesi alnamad")}finally{f(!1)}},Ic=async()=>{ye(!0);let o={orders:[],summary:{}},h=[],I=[],L=[],U=[];try{o=await fi(t.id)}catch(M){console.warn("Orders load error:",M)}try{h=await Ra(!0)}catch(M){console.warn("Roles load error:",M)}try{I=await sr()}catch(M){console.warn("Suppliers load error:",M)}try{L=await Tc()}catch(M){console.warn("Glass types load error:",M)}try{U=await ry()}catch(M){console.warn("Combinations load error:",M)}return O(o||{orders:[],summary:{}}),V(h||[]),Oe(I||[]),we(L||[]),Ee(U||[]),ye(!1),{ordersData:o,rolesData:h,suppliersData:I,glassData:L,combData:U}};d.useEffect(()=>{cy(),ay(),(async()=>{try{Be("");const h=await ap(t.id);B(h)}catch(h){Be(h.message||"Loglar alnamad")}})(),Ke(t.pendingPO||[]),Ic()},[t==null?void 0:t.id]);const dy=o=>o?o.available<=0?{label:"Tkendi",tone:"danger"}:o.available<=o.critical?{label:"Kritik",tone:"danger"}:o.available<=o.critical+Math.max(5,o.critical*.25)?{label:"Dk",tone:"warning"}:{label:"Salkl",tone:"success"}:{label:"-",tone:"secondary"},Oa=d.useMemo(()=>{const o=w.trim().toLowerCase(),h=C.trim().toLowerCase(),I=m.trim().toLowerCase();let L=k;return o&&(L=L.filter(U=>(U.name||"").toLowerCase().includes(o)||(U.supplierName||U.supplier||"").toLowerCase().includes(o)||(U.colorName||"").toLowerCase().includes(o))),h&&(L=L.filter(U=>(U.productCode||U.sku||"").toLowerCase().includes(h))),I&&(L=L.filter(U=>(U.colorCode||U.color||"").toLowerCase().includes(I))),L},[k,w,C,m]),Ac=d.useMemo(()=>{const o=k.reduce((I,L)=>I+(L.available||0),0),h=k.filter(I=>dy(I).tone!=="success").length;return{total:o,critical:h}},[k]),is=d.useMemo(()=>{var I;const o=Number(((I=t.offer)==null?void 0:I.total)||0);return Number(p.offerTotal||0)||o||0},[t.offer,p.offerTotal]),mn=d.useMemo(()=>{var o;return p.chequesReceived&&((o=p.chequeLines)==null?void 0:o.length)>0?(p.chequeLines||[]).reduce((h,I)=>h+Number(I.amount||0),0):Number(p.chequeTotalAmount||0)},[p.chequeLines,p.chequesReceived,p.chequeTotalAmount]),Tr=d.useMemo(()=>Number(p.payCash||0)+Number(p.payCard||0)+mn+Number(p.payAfter||0),[p.payCash,p.payCard,p.payAfter,mn]),zr=d.useMemo(()=>Math.abs(Tr-is)<.01,[Tr,is]),_a=d.useMemo(()=>{const o=p.chequeLines||[];if(o.length===0)return 0;const h=new Date,I=o.reduce((U,M)=>U+Number(M.amount||0),0);if(I<=0)return 0;const L=o.reduce((U,M)=>{const ne=M.due?new Date(M.due):h,de=Math.max(0,Math.round((ne-h)/(1e3*60*60*24)));return U+Number(M.amount||0)*de},0);return Math.round(L/I)},[p.chequeLines]),Rc=o=>{b.some(h=>h.id===o.id)||($(o),ie(1),fe(!0))},Lc=()=>{if(!H||E<=0)return;const o={id:H.id,name:H.name,productCode:H.productCode||H.sku,colorCode:H.colorCode||H.color,sku:H.sku||H.productCode,qty:E,unit:H.unit||"adet",available:H.available,onHand:H.onHand,reserved:H.reserved||0,supplier:H.supplier||H.supplierName,color:H.color||H.colorName,colorName:H.colorName};Z(h=>[...h,o]),fe(!1),$(null),ie(1),A(""),y(""),j("")},Bc=o=>{Z(h=>h.filter(I=>I.id!==o))},Ma=t.status||"";return e.jsxs("div",{className:"grid grid-1",style:{gap:16},children:[e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Sre Haritas"}),e.jsx("span",{className:"badge badge-secondary",children:Cr.label})]}),e.jsx("div",{className:"card-body",style:{overflowX:"auto",paddingBottom:16},children:e.jsx("div",{style:{display:"flex",alignItems:"flex-start",minWidth:"max-content",padding:"0 12px"},children:rr.map((o,h)=>{var Ce,be;const I=Ec(o.id),L=I==="current",U=I==="done",M=h===rr.length-1,ne=((Ce=o.statuses)==null?void 0:Ce.length)||1,de=L?(be=o.statuses)==null?void 0:be.indexOf(t.status):U?ne:-1;let xe="#e2e8f0";return L&&(xe="#3b82f6"),U&&(xe="#22c55e"),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",position:"relative",zIndex:1,width:100},onClick:()=>ly(o.id),children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",backgroundColor:L?"white":xe,border:`2px solid ${xe}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,color:L?xe:"white",marginBottom:8,transition:"all 0.2s",boxShadow:L?`0 0 0 4px ${xe}33`:"none"},children:U?"":h+1}),e.jsx("div",{style:{fontSize:12,fontWeight:L?700:500,color:L?"#0f172a":"#64748b",textAlign:"center",lineHeight:1.3},children:o.label})]}),!M&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"relative",marginTop:-20},children:e.jsx("div",{style:{width:ne>1?30+(ne-1)*16:60,height:3,backgroundColor:U?"#22c55e":"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-evenly",position:"relative"},children:ne>1&&Array.from({length:ne-1}).map((at,qe)=>{var me,ve;const tt=U||L&&qe<de;return e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:tt?"#22c55e":L&&qe===de?"#3b82f6":"#cbd5e1",border:L&&qe===de?"2px solid #3b82f6":"none",boxShadow:L&&qe===de?"0 0 0 2px rgba(59,130,246,0.3)":"none",transition:"all 0.2s"},title:(me=o.statuses)!=null&&me[qe+1]&&((ve=ha[o.statuses[qe+1]])==null?void 0:ve.label)||""},qe)})})})]},o.id)})})}),e.jsx("div",{className:"card-footer text-muted",children:"Setiiniz aamann formu aada alr. nceki aamalara dnp dzeltme yapabilirsiniz."})]}),e.jsx("div",{className:"card subtle-card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid grid-2",style:{gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"metric-row",style:{marginBottom:8},children:[e.jsx("span",{className:"metric-label",children:"Durum"}),En(t.status)]}),e.jsxs("div",{className:"metric-row",style:{marginBottom:8},children:[e.jsx("span",{className:"metric-label",children:"Balk"}),e.jsx("span",{className:"metric-value",children:t.title})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:" No"}),e.jsx("span",{className:"metric-value",style:{fontSize:12},children:t.id})]})]}),e.jsxs("div",{style:{borderLeft:"1px solid var(--color-border)",paddingLeft:16},children:[e.jsxs("div",{style:{fontWeight:600,fontSize:16,marginBottom:8},children:[" ",t.customerName]}),n.phone&&e.jsxs("div",{style:{fontSize:13,marginBottom:4},children:[" ",n.phone,n.phone2&&` / ${n.phone2}`]}),n.address&&e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[" ",n.address]}),!n.phone&&!n.address&&e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"Mteri detaylar bulunamad"})]})]})}),l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:l})]}):null,qt("measure")&&e.jsxs("div",{className:"card",children:[Qe&&(()=>{const o=vi(t,"measure");return e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",color:"#475569"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:o.length>0?10:0},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),o.length>0&&e.jsxs("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,marginBottom:6,color:"#64748b"},children:" Geilen Alt Aamalar:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:o.map((h,I)=>e.jsxs("span",{className:"badge badge-secondary",style:{fontSize:10},children:[h.toLabel,"  ",new Date(h.at).toLocaleDateString("tr-TR")]},I))})]})]})})(),e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:t.startType==="MUSTERI_OLCUSU"?" Mteri ls":" l / Keif"}),En(t.status)]}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[((Pc=t.roles)==null?void 0:Pc.length)>0&&e.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:t.roles.map(o=>e.jsx("span",{className:"badge badge-secondary",children:o.name},o.id||o.name))}),Qe&&e.jsxs("div",{className:"card subtle-card",style:{background:"#f8fafc"},children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" l Bilgileri zeti"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:16,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"RANDEVU TARH"}),e.jsx("div",{style:{fontWeight:600},children:(_c=(Oc=t.measure)==null?void 0:Oc.appointment)!=null&&_c.date?new Date(t.measure.appointment.date).toLocaleString("tr-TR",{dateStyle:"long",timeStyle:"short"}):"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600},children:t.customerName})]})]}),((Fc=(Mc=t.measure)==null?void 0:Mc.measurements)==null?void 0:Fc.note)&&e.jsxs("div",{style:{marginBottom:16,padding:12,background:"white",borderRadius:8,border:"1px solid var(--color-border)"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12,marginBottom:4},children:"NOT"}),e.jsx("div",{children:t.measure.measurements.note})]}),ce.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12,marginBottom:8},children:" YKL DOSYALAR"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:ce.map(o=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"white",borderRadius:6,border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,fontSize:13},children:o.fileName||o.filename}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:o.type})]})]}),e.jsx("a",{href:`http://localhost:8000/documents/${o.id}/download`,className:"btn btn-sm",style:{fontSize:11,padding:"4px 8px"},download:!0,children:" ndir"})]},o.id))})]})]})]}),!Qe&&t.status==="OLCU_RANDEVU_BEKLIYOR"&&t.startType!=="MUSTERI_OLCUSU"&&e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Randevu Bilgileri"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Randevu Tarihi *"}),e.jsx("input",{className:"form-input",type:"date",value:((Uc=p.appointment)==null?void 0:Uc.split("T")[0])||"",onChange:o=>{var I,L;const h=(I=p.appointment)!=null&&I.includes("T")?(L=p.appointment.split("T")[1])==null?void 0:L.slice(0,5):"10:00";D(U=>({...U,appointment:o.target.value?`${o.target.value}T${h}`:""}))}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Saat *"}),e.jsx("input",{className:"form-input",type:"time",value:(Kc=p.appointment)!=null&&Kc.includes("T")?(Wc=p.appointment.split("T")[1])==null?void 0:Wc.slice(0,5):"10:00",onChange:o=>{var I;const h=((I=p.appointment)==null?void 0:I.split("T")[0])||"";h&&D(L=>({...L,appointment:`${h}T${o.target.value}`}))}})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:12},children:[e.jsx("label",{className:"form-label",children:"Adres / Not"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Mteri adresi, iletiim bilgileri, notlar...",rows:2,value:p.measureNote,onChange:o=>D(h=>({...h,measureNote:o.target.value}))})]}),e.jsx("button",{className:"btn btn-success",type:"button",style:{marginTop:12},disabled:i||!p.appointment,onClick:()=>et(()=>sj(t.id,{measurements:{note:p.measureNote},appointment:{date:p.appointment},status:"OLCU_RANDEVULU"}),{transition:"OLCU_RANDEVULU"}),children:" Randevuyu Kaydet"}),!p.appointment&&e.jsx("div",{className:"text-muted",style:{fontSize:12,marginTop:8},children:" Randevu tarihi zorunludur."})]})]}),!Qe&&t.status==="OLCU_RANDEVULU"&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-info)",background:"var(--color-info-bg)"},children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Randevu Bilgisi"}),e.jsx("span",{className:"badge badge-info",children:"lye Gidilecek"})]}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"RANDEVU"}),e.jsx("div",{style:{fontWeight:600,fontSize:16},children:(qc=($c=t.measure)==null?void 0:$c.appointment)!=null&&qc.date?new Date(t.measure.appointment.date).toLocaleString("tr-TR",{dateStyle:"long",timeStyle:"short"}):"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600},children:t.customerName})]})]}),((Vc=(Hc=t.measure)==null?void 0:Hc.measurements)==null?void 0:Vc.note)&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"white",borderRadius:6},children:[e.jsx("strong",{children:"Not:"})," ",t.measure.measurements.note]}),e.jsx("button",{className:"btn btn-primary",type:"button",style:{marginTop:16},disabled:i,onClick:()=>et(()=>St(t.id,{status:"OLCU_ALINDI"}),{transition:"OLCU_ALINDI"}),children:" l Alnd - Dosya Yklemeye Ge"})]})]}),!Qe&&(t.status==="OLCU_ALINDI"||t.startType==="MUSTERI_OLCUSU")&&((Yc=t.roles)==null?void 0:Yc.length)>0&&e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" izim Dosyalar"}),e.jsx("span",{className:"text-muted",style:{fontSize:12},children:"Her i kolu iin dosya ykleyin"})]}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[t.roles.map(o=>{const h=o.id||o.name,I=ce.filter(de=>de.type===`measure_${h}`),L=ce.filter(de=>de.type===`technical_${h}`),U=I.length>0,M=L.length>0,ne=U&&M;return e.jsxs("div",{style:{marginBottom:16,padding:16,background:ne?"var(--color-success-bg)":"var(--color-bg-secondary)",borderRadius:8,border:ne?"1px solid var(--color-success)":"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:8},children:[ne&&e.jsx("span",{style:{color:"var(--color-success)"},children:""}),o.name]}),ne&&e.jsx("span",{className:"badge badge-success",children:"Tamamland"})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["l izimi ",!U&&e.jsx("span",{style:{color:"var(--color-danger)"},children:"*"})]}),e.jsxs("div",{className:"file-upload-zone",children:[e.jsx("input",{type:"file",id:`measure-file-${h}`,accept:".pdf,.jpg,.jpeg,.png,.dwg,.dxf",style:{display:"none"},onChange:async de=>{var Ce;const xe=(Ce=de.target.files)==null?void 0:Ce[0];xe&&(await un(xe,`measure_${h}`,`${o.name} - l izimi`),de.target.value="")}}),e.jsx("label",{htmlFor:`measure-file-${h}`,className:"btn btn-secondary btn-small",style:{cursor:"pointer"},children:" Dosya Se"}),U&&e.jsx("span",{className:"badge badge-success",style:{marginLeft:8},children:""})]}),I.map(de=>e.jsxs("div",{style:{marginTop:8,display:"flex",alignItems:"center",gap:8,fontSize:12},children:[e.jsxs("a",{href:rs(de.id),target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)"},children:[" ",de.originalName]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",style:{padding:"2px 6px",fontSize:10},onClick:()=>Pa(de.id),children:""})]},de.id))]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Teknik izim ",!M&&e.jsx("span",{style:{color:"var(--color-danger)"},children:"*"})]}),e.jsxs("div",{className:"file-upload-zone",children:[e.jsx("input",{type:"file",id:`tech-file-${h}`,accept:".pdf,.jpg,.jpeg,.png,.dwg,.dxf",style:{display:"none"},onChange:async de=>{var Ce;const xe=(Ce=de.target.files)==null?void 0:Ce[0];xe&&(await un(xe,`technical_${h}`,`${o.name} - Teknik izim`),de.target.value="")}}),e.jsx("label",{htmlFor:`tech-file-${h}`,className:"btn btn-secondary btn-small",style:{cursor:"pointer"},children:" Dosya Se"}),M&&e.jsx("span",{className:"badge badge-success",style:{marginLeft:8},children:""})]}),L.map(de=>e.jsxs("div",{style:{marginTop:8,display:"flex",alignItems:"center",gap:8,fontSize:12},children:[e.jsxs("a",{href:rs(de.id),target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)"},children:[" ",de.originalName]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",style:{padding:"2px 6px",fontSize:10},onClick:()=>Pa(de.id),children:""})]},de.id))]})]})]},h)}),t.roles.every(h=>{const I=h.id||h.name,L=ce.some(M=>M.type===`measure_${I}`),U=ce.some(M=>M.type===`technical_${I}`);return L&&U})?e.jsx("button",{className:"btn btn-success",type:"button",style:{marginTop:8},disabled:i,onClick:()=>et(()=>St(t.id,{status:"FIYATLANDIRMA"}),{transition:"FIYATLANDIRMA"}),children:" Fiyatlandrmaya Ge"}):e.jsx("div",{className:"text-muted",style:{padding:12,background:"var(--color-warning-bg)",borderRadius:8,fontSize:13},children:" Fiyatlandrmaya gemek iin tm i kollarnn dosyalar yklenmelidir."})]})]}),t.status==="MUSTERI_OLCUSU_BEKLENIYOR"&&e.jsx("div",{className:"card",style:{border:"2px solid var(--color-warning)",background:"var(--color-warning-bg)"},children:e.jsxs("div",{className:"card-body",style:{padding:20,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Mteri ls Bekleniyor"}),e.jsx("div",{className:"text-muted",children:"Yukardaki alanlara mteriden gelen l dosyalarn ykleyin."})]})}),dn.length>0&&e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:" Eksikler var"}),e.jsx("ul",{style:{margin:"8px 0 0 16px",padding:0},children:dn.map((o,h)=>e.jsx("li",{style:{marginBottom:4},children:o},h))})]})]})]}),qt("pricing")&&e.jsxs("div",{className:"card",children:[Qe&&(()=>{const o=vi(t,"pricing");return e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",color:"#475569"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:o.length>0?10:0},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),o.length>0&&e.jsxs("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,marginBottom:6,color:"#64748b"},children:" Geilen Alt Aamalar:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:o.map((h,I)=>e.jsxs("span",{className:"badge badge-secondary",style:{fontSize:10},children:[h.toLabel,"  ",new Date(h.at).toLocaleDateString("tr-TR")]},I))})]})]})})(),e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:" Fiyatlandrma"}),En(t.status)]}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[Qe&&e.jsxs("div",{className:"card subtle-card",style:{background:"#f8fafc"},children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Fiyatlandrma zeti"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[((Gc=t.offer)==null?void 0:Gc.rolePrices)&&Object.keys(t.offer.rolePrices).length>0&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12,marginBottom:8},children:" KOLU FYATLARI"}),(Qc=t.roles)==null?void 0:Qc.map(o=>{var L;const h=o.id||o.name,I=((L=t.offer.rolePrices)==null?void 0:L[h])||0;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",background:"white",borderRadius:6,marginBottom:4,border:"1px solid var(--color-border)"},children:[e.jsx("span",{children:o.name}),e.jsxs("span",{style:{fontWeight:600},children:[pe(I)," "]})]},h)}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px",background:"var(--color-primary-bg)",borderRadius:6,marginTop:8},children:[e.jsx("span",{style:{fontWeight:600},children:"TOPLAM"}),e.jsxs("span",{style:{fontWeight:700,color:"var(--color-primary)"},children:[pe(((Jc=t.offer)==null?void 0:Jc.total)||0)," "]})]})]}),((Xc=t.offer)==null?void 0:Xc.notifiedDate)&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12,marginBottom:4},children:"FYAT BLDRM TARH"}),e.jsx("div",{style:{fontWeight:500},children:new Date(t.offer.notifiedDate).toLocaleDateString("tr-TR")})]}),ce.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12,marginBottom:8},children:" YKL DOSYALAR"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:ce.map(o=>e.jsxs("a",{href:rs(o.id),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm",style:{fontSize:11},children:[" ",o.originalName," "]},o.id))})]})]})]}),!Qe&&t.status==="FIYATLANDIRMA"&&e.jsxs(e.Fragment,{children:[ce.length>0&&e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Ykl Dosyalar"})}),e.jsx("div",{className:"card-body",style:{padding:16},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:ce.map(o=>e.jsxs("a",{href:rs(o.id),target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",background:"var(--color-bg-secondary)",borderRadius:6,fontSize:12,textDecoration:"none",color:"var(--color-text)"},children:[" ",o.originalName]},o.id))})})]}),((Zc=t.roles)==null?void 0:Zc.length)>0&&e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"  Kolu Bazl Fiyatlandrma"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:t.roles.map(o=>{const h=o.id||o.name;return e.jsxs("div",{className:"metric-row",style:{padding:"12px 16px",background:"var(--color-bg-secondary)",borderRadius:8},children:[e.jsx("div",{style:{fontWeight:600,minWidth:180},children:o.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(yt,{placeholder:"0",style:{width:150},value:p.rolePrices[h]||"",onChange:I=>D(L=>({...L,rolePrices:{...L.rolePrices,[h]:I}}))}),e.jsx("span",{style:{color:"var(--color-text-light)"},children:""})]})]},h)})}),e.jsxs("div",{style:{marginTop:16,padding:"16px",background:"var(--color-primary)",borderRadius:8,color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:600},children:"TOPLAM"}),e.jsxs("span",{style:{fontSize:24,fontWeight:700},children:[pe(Object.values(p.rolePrices).reduce((o,h)=>o+(Number(h)||0),0))," "]})]})]})]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Mteriye Bildirim"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fiyat Bildirim Tarihi *"}),e.jsx("input",{className:"form-input",type:"date",value:p.pricingNotifiedDate||new Date().toISOString().split("T")[0],onChange:o=>D(h=>({...h,pricingNotifiedDate:o.target.value}))})]}),e.jsx("button",{className:"btn btn-success",type:"button",style:{marginTop:12},disabled:i||Object.values(p.rolePrices).every(o=>!o),onClick:()=>{const o=Object.values(p.rolePrices).reduce((h,I)=>h+(Number(I)||0),0);et(()=>St(t.id,{status:"FIYAT_VERILDI",offer:{total:o,rolePrices:p.rolePrices,notifiedDate:p.pricingNotifiedDate||new Date().toISOString().split("T")[0]}}),{transition:"FIYAT_VERILDI"})},children:" Fiyat Mteriye Bildirildi"})]})]})]}),!Qe&&t.status==="FIYAT_VERILDI"&&(()=>{var ne,de,xe,Ce,be,at,qe,tt;const o=((ne=t.offer)==null?void 0:ne.rolePrices)||{},h=((de=t.offer)==null?void 0:de.total)||((xe=t.roles)==null?void 0:xe.reduce((me,ve)=>{const He=ve.id||ve.name;return me+(Number(o[He])||0)},0))||0,I=p.roleDiscounts||{},L=Object.values(I).reduce((me,ve)=>me+(Number(ve)||0),0),U=h-L,M=((be=(Ce=t.offer)==null?void 0:Ce.negotiationHistory)==null?void 0:be.length)>0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card",style:{border:"2px solid var(--color-warning)",background:"var(--color-warning-bg)"},children:e.jsxs("div",{className:"card-body",style:{padding:20},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:16,marginBottom:16},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"LK FYAT"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:h>0?"var(--color-text)":"var(--color-danger)"},children:h>0?`${pe(h)} `:"Fiyat Girilmedi!"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"BLDRM TARH"}),e.jsx("div",{style:{fontWeight:600},children:(at=t.offer)!=null&&at.notifiedDate?new Date(t.offer.notifiedDate).toLocaleDateString("tr-TR"):"-"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600},children:t.customerName})]})]}),((qe=t.roles)==null?void 0:qe.length)>0&&e.jsxs("div",{style:{borderTop:"1px solid var(--color-border)",paddingTop:12,marginTop:12},children:[e.jsx("div",{style:{fontSize:12,color:"var(--color-text-light)",marginBottom:8},children:" Kolu Bazl Fiyatlar:"}),t.roles.map(me=>{const ve=me.id||me.name,He=Number(o[ve])||0;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,marginBottom:4},children:[e.jsx("span",{children:me.name}),e.jsx("span",{style:{color:He>0?"inherit":"var(--color-danger)"},children:He>0?`${pe(He)} `:"Girilmedi"})]},ve)})]})]})}),h===0&&e.jsx("div",{className:"card",style:{border:"2px solid var(--color-danger)",background:"var(--color-danger-bg)"},children:e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--color-danger)",marginBottom:8},children:" Bu i iin fiyat girilmemi!"}),e.jsx("div",{className:"text-muted",style:{fontSize:13,marginBottom:12},children:"Fiyatlandrma aamasna geri dnp i kolu bazl fiyatlar girmeniz gerekmektedir."}),e.jsx("button",{className:"btn btn-warning",type:"button",disabled:i,onClick:()=>et(()=>St(t.id,{status:"FIYATLANDIRMA"}),{transition:"FIYATLANDIRMA"}),children:" Fiyatlandrmaya Geri Dn"})]})}),e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Fiyat Gemii"})}),e.jsxs("div",{className:"card-body",style:{padding:M?0:16},children:[M?e.jsxs("table",{className:"table",style:{margin:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tarih"}),e.jsx("th",{children:"lk Fiyat"}),e.jsx("th",{children:"skonto"}),e.jsx("th",{children:"Son Fiyat"})]})}),e.jsx("tbody",{children:t.offer.negotiationHistory.map((me,ve)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(me.date).toLocaleDateString("tr-TR")}),e.jsxs("td",{children:[pe(me.originalTotal)," "]}),e.jsxs("td",{style:{color:"var(--color-danger)"},children:["-",pe(me.discountTotal)," "]}),e.jsxs("td",{style:{fontWeight:600},children:[pe(me.finalTotal)," "]})]},ve))})]}):e.jsx("div",{style:{color:"var(--color-text-light)",fontSize:13,textAlign:"center"},children:"Henz fiyat deiiklii veya pazarlk yaplmad."}),t.rejection&&e.jsxs("div",{style:{marginTop:M?12:0,padding:M?"12px 16px":0,borderTop:M?"1px solid var(--color-border)":"none"},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--color-danger)",marginBottom:8,fontSize:13},children:" Red Gemii"}),e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[e.jsx("strong",{children:"Tarih:"})," ",t.rejection.rejectedAt?new Date(t.rejection.rejectedAt).toLocaleDateString("tr-TR"):"-",t.rejection.reason&&e.jsxs("span",{children:[" | ",e.jsx("strong",{children:"Sebep:"})," ",t.rejection.reason]}),t.rejection.previousTotal&&e.jsxs("span",{children:[" | ",e.jsx("strong",{children:"Red Edilen Fiyat:"})," ",pe(t.rejection.previousTotal)," "]})]})]})]})]}),p.showNegotiationPanel&&h>0?e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-primary)"},children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px",background:"var(--color-primary-bg)"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" skonto / Pazarlk"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-small",onClick:()=>D(me=>({...me,showNegotiationPanel:!1,roleDiscounts:{}})),children:"ptal"})]}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsx("div",{style:{fontSize:13,color:"var(--color-text-light)",marginBottom:12},children:"Her i kolu iin yaplacak iskonto tutarn girin:"}),(tt=t.roles)==null?void 0:tt.map(me=>{const ve=me.id||me.name,He=Number(o[ve])||0,wt=Number(I[ve]||0),os=He-wt;return e.jsxs("div",{style:{padding:"12px 16px",background:"var(--color-bg-secondary)",borderRadius:8,marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx("span",{style:{fontWeight:600},children:me.name}),e.jsxs("span",{style:{fontSize:13},children:["Mevcut: ",pe(He)," "]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"form-label",style:{fontSize:12},children:"skonto Tutar"}),e.jsx(yt,{placeholder:"0",value:I[ve]||"",onChange:Me=>D(gs=>({...gs,roleDiscounts:{...gs.roleDiscounts,[ve]:Me}}))})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:"Yeni Fiyat"}),e.jsxs("div",{style:{fontWeight:700,fontSize:16,color:wt>0?"var(--color-success)":"inherit"},children:[pe(os)," "]})]})]})]},ve)}),e.jsxs("div",{style:{marginTop:16,padding:16,background:L>0?"var(--color-success-bg)":"var(--color-bg-secondary)",borderRadius:8,border:L>0?"2px solid var(--color-success)":"none"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{children:"lk Toplam:"}),e.jsxs("span",{children:[pe(h)," "]})]}),L>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"var(--color-danger)"},children:[e.jsx("span",{children:"Toplam skonto:"}),e.jsxs("span",{children:["-",pe(L)," "]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700,fontSize:18,paddingTop:8,borderTop:"1px solid var(--color-border)"},children:[e.jsx("span",{children:"ANLAILAN FYAT:"}),e.jsxs("span",{style:{color:"var(--color-success)"},children:[pe(U)," "]})]})]}),e.jsx("button",{className:"btn btn-success",type:"button",style:{width:"100%",marginTop:16},disabled:i,onClick:()=>{var wt,os;const ve=[...((wt=t.offer)==null?void 0:wt.negotiationHistory)||[],{date:new Date().toISOString(),originalTotal:h,discountTotal:L,finalTotal:U,roleDiscounts:{...I}}],He={};(os=t.roles)==null||os.forEach(Me=>{const gs=Me.id||Me.name,uy=Number(o[gs])||0;He[gs]=uy-(Number(I[gs])||0)}),et(()=>St(t.id,{status:"ANLASMA_YAPILIYOR",offer:{...t.offer,total:U,rolePrices:He,negotiationHistory:ve,agreedDate:new Date().toISOString()}}),{transition:"ANLASMA_YAPILIYOR"})},children:" Bu Fiyatla Anlald - Devam Et"})]})]}):e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{className:"btn btn-success",type:"button",style:{flex:1},disabled:i,onClick:()=>et(()=>St(t.id,{status:"ANLASMA_YAPILIYOR",offer:{...t.offer,agreedDate:new Date().toISOString()}}),{transition:"ANLASMA_YAPILIYOR"}),children:" Fiyat Onayland"}),e.jsx("button",{className:"btn btn-warning",type:"button",style:{flex:1},disabled:i,onClick:()=>D(me=>({...me,showNegotiationPanel:!0})),children:" Pazarlk / skonto"}),e.jsx("button",{className:"btn btn-danger",type:"button",style:{flex:1},disabled:i,onClick:()=>D(me=>({...me,showRejectionModal:!0})),children:" Reddedildi"})]}),p.showRejectionModal&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-danger)",background:"var(--color-danger-bg)"},children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14,color:"var(--color-danger)"},children:" Ret / Anlalamad"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Ret Kategorisi *"}),e.jsxs("select",{className:"form-select",value:p.rejectionCategory||"",onChange:me=>D(ve=>({...ve,rejectionCategory:me.target.value})),children:[e.jsx("option",{value:"",children:"Sein..."}),e.jsx("option",{value:"FIYAT_YUKSEK",children:" Fiyat Yksek Bulundu"}),e.jsx("option",{value:"ZAMANLAMA",children:" Zamanlama Uymuyor"}),e.jsx("option",{value:"BASKA_FIRMA",children:" Baka Firmaya Gitti"}),e.jsx("option",{value:"PROJE_IPTAL",children:" Projeyi ptal Etti"}),e.jsx("option",{value:"DUSUNUYOR",children:" Dnyor / Bekliyor"}),e.jsx("option",{value:"DIGER",children:" Dier"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Takip Tarihi"}),e.jsx("input",{className:"form-input",type:"date",value:p.rejectionFollowUp||"",onChange:me=>D(ve=>({...ve,rejectionFollowUp:me.target.value})),min:new Date().toISOString().split("T")[0]}),e.jsx("div",{className:"text-muted",style:{fontSize:11,marginTop:4},children:" Bu tarihte tekrar aranacak"})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:12},children:[e.jsx("label",{className:"form-label",children:"Aklama / Not *"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Detayl aklama yazn...",rows:3,value:p.rejectionReason||"",onChange:me=>D(ve=>({...ve,rejectionReason:me.target.value}))})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>D(me=>({...me,showRejectionModal:!1})),children:"ptal"}),e.jsx("button",{className:"btn btn-danger",type:"button",disabled:i||!p.rejectionReason||!p.rejectionCategory,onClick:()=>et(()=>St(t.id,{status:"ANLASILAMADI",rejection:{category:p.rejectionCategory,reason:p.rejectionReason,followUpDate:p.rejectionFollowUp||null,date:new Date().toISOString(),lastOffer:t.offer}}),{transition:"ANLASILAMADI"}),children:"i Anlalamad Olarak aretle"})]}),(!p.rejectionReason||!p.rejectionCategory)&&e.jsx("div",{className:"text-muted",style:{fontSize:12,marginTop:8},children:" Kategori ve aklama zorunludur."})]})]})]})})(),t.status==="ANLASILAMADI"&&(()=>{var M,ne,de,xe,Ce,be,at,qe,tt,me;const o={FIYAT_YUKSEK:{label:"Fiyat Yksek Bulundu",icon:"",color:"warning"},ZAMANLAMA:{label:"Zamanlama Uymuyor",icon:"",color:"secondary"},BASKA_FIRMA:{label:"Baka Firmaya Gitti",icon:"",color:"danger"},PROJE_IPTAL:{label:"Projeyi ptal Etti",icon:"",color:"danger"},DUSUNUYOR:{label:"Dnyor / Bekliyor",icon:"",color:"info"},DIGER:{label:"Dier",icon:"",color:"secondary"}},h=o[(M=t.rejection)==null?void 0:M.category]||o.DIGER,I=((ne=t.rejection)==null?void 0:ne.lastOffer)||t.offer,L=(de=t.rejection)==null?void 0:de.followUpDate,U=L&&new Date(t.rejection.followUpDate)<=new Date;return e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-danger)"},children:[e.jsxs("div",{className:"card-header",style:{background:"var(--color-danger)",color:"white"},children:[e.jsx("h3",{className:"card-title",style:{color:"white"},children:" Anlalamad"}),e.jsx("span",{style:{fontSize:12,opacity:.9},children:(xe=t.rejection)!=null&&xe.date?new Date(t.rejection.date).toLocaleDateString("tr-TR"):""})]}),e.jsxs("div",{className:"card-body",style:{padding:20},children:[e.jsxs("div",{className:"grid grid-2",style:{gap:16,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600,fontSize:16},children:t.customerName}),n.phone&&e.jsxs("div",{style:{fontSize:13,marginTop:4},children:[" ",n.phone]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"RET SEBEB"}),e.jsxs("div",{style:{fontWeight:600},children:[h.icon," ",h.label]})]})]}),((Ce=t.rejection)==null?void 0:Ce.reason)&&e.jsxs("div",{style:{padding:12,background:"var(--color-danger-bg)",borderRadius:8,marginBottom:16},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Aklama:"}),e.jsx("div",{children:t.rejection.reason})]}),L&&e.jsx("div",{style:{padding:12,background:U?"var(--color-warning-bg)":"var(--color-bg-secondary)",borderRadius:8,marginBottom:16,border:U?"2px solid var(--color-warning)":"none"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:12,color:"var(--color-text-light)"},children:" TAKP TARH"}),e.jsx("div",{style:{fontWeight:600},children:new Date(t.rejection.followUpDate).toLocaleDateString("tr-TR")})]}),U&&e.jsx("span",{className:"badge badge-warning",children:" Takip Zaman!"})]})}),e.jsxs("div",{className:"card subtle-card",style:{marginBottom:16},children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"  zeti"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"metric-row",style:{marginBottom:8},children:[e.jsx("span",{className:"metric-label",children:" l Alnd"}),e.jsx("span",{className:"metric-value",children:(at=(be=t.measure)==null?void 0:be.measurements)!=null&&at.date?new Date(t.measure.measurements.date).toLocaleDateString("tr-TR"):(tt=(qe=t.measure)==null?void 0:qe.appointment)!=null&&tt.date?new Date(t.measure.appointment.date).toLocaleDateString("tr-TR"):"-"})]}),ce.length>0&&e.jsxs("div",{className:"metric-row",style:{marginBottom:8},children:[e.jsx("span",{className:"metric-label",children:" Ykl Dosyalar"}),e.jsxs("span",{className:"metric-value",children:[ce.length," dosya"]})]}),e.jsxs("div",{style:{borderTop:"1px solid var(--color-border)",paddingTop:12,marginTop:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:" Son Fiyat Teklifi:"}),(I==null?void 0:I.rolePrices)&&Object.entries(I.rolePrices).map(([ve,He])=>{var wt,os;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,marginBottom:4},children:[e.jsx("span",{children:((os=(wt=t.roles)==null?void 0:wt.find(Me=>(Me.id||Me.name)===ve))==null?void 0:os.name)||ve}),e.jsxs("span",{children:[pe(He)," "]})]},ve)}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700,fontSize:16,marginTop:8,paddingTop:8,borderTop:"1px solid var(--color-border)"},children:[e.jsx("span",{children:"TOPLAM:"}),e.jsxs("span",{children:[pe((I==null?void 0:I.total)||0)," "]})]})]}),((me=I==null?void 0:I.negotiationHistory)==null?void 0:me.length)>0&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,fontSize:13},children:" Pazarlk Gemii:"}),I.negotiationHistory.map((ve,He)=>e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)",marginBottom:4},children:[new Date(ve.date).toLocaleDateString("tr-TR"),": ",pe(ve.originalTotal),"   ",pe(ve.finalTotal)," ",e.jsxs("span",{style:{color:"var(--color-danger)"},children:[" (-",pe(ve.discountTotal)," )"]})]},He))]})]})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-secondary)",borderRadius:8,border:"1px dashed var(--color-border)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:" Mteri Geri Dnd m?"}),e.jsx("div",{className:"text-muted",style:{fontSize:13,marginBottom:12},children:"Mteri tekrar ilgileniyorsa, son fiyat zerinden yeni iskonto yapabilir veya mevcut fiyatla devam edebilirsiniz."}),e.jsx("button",{className:"btn btn-primary",type:"button",disabled:i,onClick:()=>{et(()=>St(t.id,{status:"FIYAT_VERILDI",offer:{...I,reactivatedAt:new Date().toISOString(),reactivatedFrom:t.rejection}}),{transition:"FIYAT_VERILDI"})},children:" i Yeniden Aktifletir"})]})]})]})})()]})]}),qt("agreement")&&e.jsxs("div",{className:"card",children:[Qe&&(()=>{const o=vi(t,"agreement");return e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",color:"#475569"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:o.length>0?10:0},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),o.length>0&&e.jsxs("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,marginBottom:6,color:"#64748b"},children:" Geilen Alt Aamalar:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:o.map((h,I)=>e.jsxs("span",{className:"badge badge-secondary",style:{fontSize:10},children:[h.toLabel,"  ",new Date(h.at).toLocaleDateString("tr-TR")]},I))})]})]})})(),e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:" Anlama"}),En(t.status)]}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[e.jsx("div",{className:"card",style:{background:"var(--color-success-bg)",border:"1px solid var(--color-success)"},children:e.jsx("div",{className:"card-body",style:{padding:16},children:e.jsxs("div",{className:"grid grid-3",style:{gap:16},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600},children:t.customerName})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"ANLAILAN FYAT"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-success)"},children:[pe(((ed=t.offer)==null?void 0:ed.total)||0)," "]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"ONAY TARH"}),e.jsx("div",{style:{fontWeight:600},children:(td=t.approval)!=null&&td.approvedAt?new Date(t.approval.approvedAt).toLocaleDateString("tr-TR"):new Date().toLocaleDateString("tr-TR")})]})]})})}),e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Fiyat Gemii"})}),e.jsxs("div",{className:"card-body",style:{padding:((rd=(sd=t.offer)==null?void 0:sd.negotiationHistory)==null?void 0:rd.length)>0?0:16},children:[((ld=(nd=t.offer)==null?void 0:nd.negotiationHistory)==null?void 0:ld.length)>0?e.jsxs("table",{className:"table",style:{margin:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tarih"}),e.jsx("th",{children:"lk Fiyat"}),e.jsx("th",{children:"skonto"}),e.jsx("th",{children:"Son Fiyat"})]})}),e.jsx("tbody",{children:t.offer.negotiationHistory.map((o,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(o.date).toLocaleDateString("tr-TR")}),e.jsxs("td",{children:[pe(o.originalTotal)," "]}),e.jsxs("td",{style:{color:"var(--color-danger)"},children:["-",pe(o.discountTotal)," "]}),e.jsxs("td",{style:{fontWeight:600},children:[pe(o.finalTotal)," "]})]},h))})]}):e.jsx("div",{style:{color:"var(--color-text-light)",fontSize:13,textAlign:"center"},children:"Dorudan anlald, pazarlk yaplmad."}),t.rejection&&e.jsxs("div",{style:{marginTop:((id=(ad=t.offer)==null?void 0:ad.negotiationHistory)==null?void 0:id.length)>0?12:0,padding:((cd=(od=t.offer)==null?void 0:od.negotiationHistory)==null?void 0:cd.length)>0?"12px 16px":0,borderTop:((ud=(dd=t.offer)==null?void 0:dd.negotiationHistory)==null?void 0:ud.length)>0?"1px solid var(--color-border)":"none"},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--color-danger)",marginBottom:8,fontSize:13},children:" Red Gemii"}),e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[e.jsx("strong",{children:"Tarih:"})," ",t.rejection.rejectedAt?new Date(t.rejection.rejectedAt).toLocaleDateString("tr-TR"):"-",t.rejection.reason&&e.jsxs("span",{children:[" | ",e.jsx("strong",{children:"Sebep:"})," ",t.rejection.reason]}),t.rejection.previousTotal&&e.jsxs("span",{children:[" | ",e.jsx("strong",{children:"Red Edilen Fiyat:"})," ",pe(t.rejection.previousTotal)," "]})]})]})]})]}),Qe&&((md=t.approval)==null?void 0:md.paymentPlan)&&e.jsxs("div",{className:"card subtle-card",style:{padding:16,background:"#f8fafc"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:14},children:" deme Plan zeti"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(((pd=t.approval.paymentPlan.cash)==null?void 0:pd.amount)>0||t.approval.paymentPlan.cash>0)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"white",borderRadius:6,border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsx("span",{style:{fontWeight:500},children:"Nakit"}),((hd=t.approval.paymentPlan.cash)==null?void 0:hd.date)&&e.jsx("span",{className:"badge badge-secondary",style:{fontSize:10},children:new Date(t.approval.paymentPlan.cash.date).toLocaleDateString("tr-TR")})]}),e.jsxs("span",{style:{fontWeight:600},children:[pe(((fd=t.approval.paymentPlan.cash)==null?void 0:fd.amount)||t.approval.paymentPlan.cash||0)," "]})]}),(((yd=t.approval.paymentPlan.card)==null?void 0:yd.amount)>0||t.approval.paymentPlan.card>0)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"white",borderRadius:6,border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsx("span",{style:{fontWeight:500},children:"Kredi Kart"}),((xd=t.approval.paymentPlan.card)==null?void 0:xd.date)&&e.jsx("span",{className:"badge badge-secondary",style:{fontSize:10},children:new Date(t.approval.paymentPlan.card.date).toLocaleDateString("tr-TR")})]}),e.jsxs("span",{style:{fontWeight:600},children:[pe(((gd=t.approval.paymentPlan.card)==null?void 0:gd.amount)||t.approval.paymentPlan.card||0)," "]})]}),(((vd=t.approval.paymentPlan.cheque)==null?void 0:vd.total)>0||t.approval.paymentPlan.cheque>0)&&e.jsxs("div",{style:{padding:"10px 12px",background:"white",borderRadius:6,border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:((Nd=(jd=t.approval.paymentPlan.cheque)==null?void 0:jd.items)==null?void 0:Nd.length)>0?8:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsx("span",{style:{fontWeight:500},children:"ek"}),((bd=t.approval.paymentPlan.cheque)==null?void 0:bd.count)>0&&e.jsxs("span",{className:"badge badge-secondary",style:{fontSize:10},children:[t.approval.paymentPlan.cheque.count," adet"]}),((Sd=t.approval.paymentPlan.cheque)==null?void 0:Sd.received)&&e.jsx("span",{className:"badge badge-success",style:{fontSize:10},children:"Teslim alnd"})]}),e.jsxs("span",{style:{fontWeight:600},children:[pe(((kd=t.approval.paymentPlan.cheque)==null?void 0:kd.total)||t.approval.paymentPlan.cheque||0)," "]})]}),((wd=(Cd=t.approval.paymentPlan.cheque)==null?void 0:Cd.items)==null?void 0:wd.length)>0&&e.jsx("div",{style:{fontSize:12,borderTop:"1px solid var(--color-border)",paddingTop:8},children:t.approval.paymentPlan.cheque.items.map((o,h)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:h<t.approval.paymentPlan.cheque.items.length-1?"1px dashed var(--color-border)":"none"},children:[e.jsxs("span",{className:"text-muted",children:[o.bank," - ",o.chequeNo||o.number]}),e.jsxs("span",{children:[pe(o.amount),"  ",e.jsxs("span",{className:"text-muted",children:["(",gi(o.due),")"]})]})]},h))})]}),(((Td=t.approval.paymentPlan.afterDelivery)==null?void 0:Td.amount)>0||t.approval.paymentPlan.afterDelivery>0)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",background:"var(--color-warning-bg)",borderRadius:6,border:"1px solid var(--color-warning)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""}),e.jsx("span",{style:{fontWeight:500},children:"Teslim Sonras"}),((zd=t.approval.paymentPlan.afterDelivery)==null?void 0:zd.note)&&e.jsxs("span",{className:"text-muted",style:{fontSize:11},children:["(",t.approval.paymentPlan.afterDelivery.note,")"]})]}),e.jsxs("span",{style:{fontWeight:600},children:[pe(((Dd=t.approval.paymentPlan.afterDelivery)==null?void 0:Dd.amount)||t.approval.paymentPlan.afterDelivery||0)," "]})]})]}),e.jsxs("div",{style:{marginTop:12,padding:12,background:"var(--color-primary-bg)",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:600},children:"TOPLAM"}),e.jsxs("span",{style:{fontWeight:700,fontSize:18,color:"var(--color-primary)"},children:[pe(t.approval.paymentPlan.total||((Ed=t.offer)==null?void 0:Ed.total)||0)," "]})]})]}),!Qe&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:14,color:"var(--text-secondary)"},children:" deme Plan"}),e.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--color-bg-secondary)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Nakit"})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Tutar"}),e.jsx(yt,{placeholder:"0",value:p.payCash,onChange:o=>D(h=>({...h,payCash:o}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsxs("label",{className:"form-label",style:{fontSize:11},children:["deme Tarihi ",e.jsx("span",{className:"text-muted",children:"(bo = bugn)"})]}),e.jsx("input",{className:"form-input",type:"date",value:p.payCashDate||"",onChange:o=>D(h=>({...h,payCashDate:o.target.value}))})]})]})]}),e.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--color-bg-secondary)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Kredi Kart"})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Tutar"}),e.jsx(yt,{placeholder:"0",value:p.payCard,onChange:o=>D(h=>({...h,payCard:o}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsxs("label",{className:"form-label",style:{fontSize:11},children:["ekim Tarihi ",e.jsx("span",{className:"text-muted",children:"(bo = bugn)"})]}),e.jsx("input",{className:"form-input",type:"date",value:p.payCardDate||"",onChange:o=>D(h=>({...h,payCardDate:o.target.value}))})]})]})]}),e.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--color-warning-bg)",borderRadius:8,border:"1px solid var(--color-warning)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Teslim Sonras"}),e.jsx("span",{className:"badge badge-warning",style:{fontSize:10},children:"Montaj bitince hatrlatlacak"})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Tutar"}),e.jsx(yt,{placeholder:"0",value:p.payAfter,onChange:o=>D(h=>({...h,payAfter:o}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Not"}),e.jsx("input",{className:"form-input",placeholder:"Opsiyonel not...",value:p.payAfterNote||"",onChange:o=>D(h=>({...h,payAfterNote:o.target.value}))})]})]})]}),e.jsxs("div",{style:{padding:12,background:"var(--color-bg-secondary)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontWeight:600},children:"ek"})]}),e.jsxs("div",{style:{fontWeight:700,color:"var(--color-primary)"},children:["Toplam: ",pe(mn)," "]})]}),e.jsxs("div",{style:{marginBottom:12,padding:10,background:"white",borderRadius:6,display:"flex",alignItems:"center",gap:12},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:p.chequesReceived||!1,onChange:o=>D(h=>({...h,chequesReceived:o.target.checked})),style:{width:18,height:18}}),e.jsx("span",{style:{fontWeight:500},children:"ekler teslim alnd"})]}),!p.chequesReceived&&e.jsx("span",{className:"text-muted",style:{fontSize:11},children:"(Alnmadysa sadece adet ve toplam tutar girin)"})]}),!p.chequesReceived&&e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"ek Adedi"}),e.jsx("input",{className:"form-input",type:"number",min:"0",placeholder:"0",value:p.chequeCount||"",onChange:o=>D(h=>({...h,chequeCount:o.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Toplam Tutar"}),e.jsx(yt,{placeholder:"0",value:p.chequeTotalAmount||"",onChange:o=>D(h=>({...h,chequeTotalAmount:o}))})]})]})]})]}),p.chequesReceived&&e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h4",{style:{margin:0,fontSize:14,color:"var(--text-secondary)"},children:" ek Detaylar"}),e.jsxs("span",{className:"text-muted",style:{fontSize:12},children:[((Id=p.chequeLines)==null?void 0:Id.length)||0," ek  Ort. vade: ",_a," gn"]})]}),e.jsx("div",{style:{padding:12,background:"var(--color-bg-secondary)",borderRadius:8,marginBottom:12},children:e.jsxs("div",{className:"grid grid-3",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Tutar *"}),e.jsx(yt,{placeholder:"0",value:p.chequeDraftAmount||"",onChange:o=>D(h=>({...h,chequeDraftAmount:o}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Vade Tarihi *"}),e.jsx("input",{className:"form-input",type:"date",value:p.chequeDraftDue||"",onChange:o=>D(h=>({...h,chequeDraftDue:o.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Banka *"}),e.jsx("input",{className:"form-input",placeholder:"Banka ad",value:p.chequeDraftBank||"",onChange:o=>D(h=>({...h,chequeDraftBank:o.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"ube"}),e.jsx("input",{className:"form-input",placeholder:"ube ad (opsiyonel)",value:p.chequeDraftBranch||"",onChange:o=>D(h=>({...h,chequeDraftBranch:o.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"ek No *"}),e.jsx("input",{className:"form-input",placeholder:"ek numaras",value:p.chequeDraftNumber||"",onChange:o=>D(h=>({...h,chequeDraftNumber:o.target.value}))})]}),e.jsx("div",{className:"form-group",style:{margin:0,display:"flex",alignItems:"flex-end"},children:e.jsx("button",{type:"button",className:"btn btn-primary",style:{width:"100%"},disabled:!p.chequeDraftAmount||!p.chequeDraftDue||!p.chequeDraftBank||!p.chequeDraftNumber,onClick:()=>{const o=Number(p.chequeDraftAmount||0);o&&D(h=>({...h,chequeLines:[...h.chequeLines,{amount:o,due:h.chequeDraftDue||"",bank:h.chequeDraftBank||"",branch:h.chequeDraftBranch||"",chequeNo:h.chequeDraftNumber||"",id:Date.now()}],chequeDraftAmount:"",chequeDraftDue:"",chequeDraftBank:"",chequeDraftBranch:"",chequeDraftNumber:""}))},children:"+ ek Ekle"})})]})}),(((Ad=p.chequeLines)==null?void 0:Ad.length)||0)>0&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{className:"text-muted",style:{fontSize:11,marginBottom:8},children:"EKLENM EKLER"}),e.jsx("div",{className:"table-container",style:{maxHeight:200,overflow:"auto"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tutar"}),e.jsx("th",{children:"Vade"}),e.jsx("th",{children:"Banka"}),e.jsx("th",{children:"ube"}),e.jsx("th",{children:"ek No"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:(p.chequeLines||[]).map((o,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[pe(o.amount)," "]})}),e.jsx("td",{children:gi(o.due)}),e.jsx("td",{children:o.bank||"-"}),e.jsx("td",{children:o.branch||"-"}),e.jsx("td",{children:o.chequeNo||o.number||"-"}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",onClick:()=>D(I=>({...I,chequeLines:I.chequeLines.filter((L,U)=>U!==h)})),children:""})})]},o.id||`${o.chequeNo}-${h}`))})]})})]})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14,color:"var(--text-secondary)"},children:" zet"}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"metric-row",style:{background:"var(--bg-tertiary)",padding:"12px",borderRadius:8},children:[e.jsx("div",{children:e.jsx("div",{className:"metric-label",children:"Teklif Toplam"})}),e.jsxs("strong",{style:{fontSize:18},children:[pe(is)," "]})]}),e.jsxs("div",{className:"metric-row",style:{background:zr?"var(--color-success-bg)":"var(--color-danger-bg)",padding:"12px",borderRadius:8},children:[e.jsx("div",{children:e.jsx("div",{className:"metric-label",children:"deme Toplam"})}),e.jsxs("strong",{style:{fontSize:18,color:zr?"var(--color-success)":"var(--color-danger)"},children:[pe(Tr)," "]})]})]}),!zr&&e.jsxs("div",{className:"error-text",style:{marginTop:8,padding:8,background:"var(--color-danger-bg)",borderRadius:4},children:[" Toplam deme, teklif tutaryla elemiyor. Fark: ",pe(Math.abs(is-Tr))," "]}),_a>90&&e.jsxs("div",{style:{marginTop:8,padding:8,background:"#fef3cd",borderRadius:4,color:"#856404"},children:[" Ortalama vade ",_a," gn. Uzun vade iin ek onay gerekebilir."]})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14,color:"var(--text-secondary)"},children:" Szleme Dosyas"}),e.jsxs("div",{className:"file-upload-zone",children:[e.jsx("input",{type:"file",id:"contract-file",accept:".pdf,.jpg,.jpeg,.png",style:{display:"none"},onChange:async o=>{var I;const h=(I=o.target.files)==null?void 0:I[0];h&&(await un(h,"sozlesme","mzal Szleme"),o.target.value="")}}),e.jsx("label",{htmlFor:"contract-file",className:"btn btn-secondary",style:{cursor:"pointer"},children:" Szleme Ykle"}),ce.filter(o=>o.type==="sozlesme").length>0&&e.jsxs("span",{className:"badge badge-success",style:{marginLeft:8},children:[" ",ce.filter(o=>o.type==="sozlesme").length," dosya yklendi"]})]}),ce.filter(o=>o.type==="sozlesme").map(o=>e.jsxs("div",{className:"metric-row",style:{marginTop:8,fontSize:13},children:[e.jsxs("a",{href:rs(o.id),target:"_blank",rel:"noopener noreferrer",className:"text-primary",children:[" ",o.originalName]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",onClick:()=>Pa(o.id),children:""})]},o.id)),e.jsx("div",{className:"text-muted",style:{fontSize:12,marginTop:8},children:"Mteriye imzalatlan szlemeyi ykleyin"})]}),e.jsx("div",{className:"btn-group",style:{gap:12,marginTop:8},children:e.jsx("button",{className:"btn btn-success",type:"button",disabled:i||!zr,onClick:()=>et(async()=>{var I,L;if(!zr)throw new Error("deme toplam teklif tutaryla elemiyor.");if(p.chequesReceived&&(p.chequeLines||[]).reduce((M,ne)=>M+Number(ne.amount||0),0)!==mn)throw new Error("ek paralar toplam hatal.");const o={paymentPlan:{cash:{amount:Number(p.payCash||0),date:p.payCashDate||new Date().toISOString().split("T")[0],status:"pending"},card:{amount:Number(p.payCard||0),date:p.payCardDate||new Date().toISOString().split("T")[0],status:"pending"},cheque:{total:mn,received:p.chequesReceived||!1,count:p.chequesReceived?((I=p.chequeLines)==null?void 0:I.length)||0:Number(p.chequeCount||0),items:p.chequesReceived?p.chequeLines||[]:[],status:"pending"},afterDelivery:{amount:Number(p.payAfter||0),note:p.payAfterNote||"",status:"pending"},total:Tr},contractUrl:((L=ce.find(U=>U.type==="sozlesme"))==null?void 0:L.id)||null,stockNeeds:[]},h=await rj(t.id,o);return bn(t.id,{approval:{paymentPlan:o.paymentPlan},offer:{...t.offer,total:is}}),h}),children:" Anlamay Tamamla - Stok Kontrolne Ge"})}),!zr&&e.jsxs("div",{className:"text-muted",style:{fontSize:12,color:"var(--color-danger)"},children:[" deme toplam teklif tutaryla elemiyor. Fark: ",pe(Math.abs(is-Tr))," "]})]})]})]}),qt("stock")&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{alignItems:"center"},children:[e.jsx("h3",{className:"card-title",children:"Stok / Rezervasyon"}),t.status==="SONRA_URETILECEK"?e.jsx("div",{className:"badge badge-info",children:" Sonra retilecek"}):Qe?e.jsx("div",{className:"badge badge-success",children:(Rd=t.stock)!=null&&Rd.ready?" retime Alnd":" Rezerve Edildi"}):e.jsxs("div",{className:"badge badge-secondary",children:["Mevcut: ",Ac.total,"  Kritik: ",Ac.critical]})]}),e.jsx("div",{className:"card-body",style:{display:"grid",gap:12},children:t.status==="SONRA_URETILECEK"?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:16,borderRadius:12,border:"1px solid #3b82f6",marginBottom:8},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1e40af",marginBottom:4},children:"Bu i sonra retilmek zere bekletiliyor"}),e.jsx("div",{style:{fontSize:13,color:"#1e40af"},children:'Stok rezerve edilmi durumda. Hazr olduunda "retime Al" butonuna tklayn.'}),((Ld=t.stock)==null?void 0:Ld.estimatedDate)&&e.jsxs("div",{style:{fontSize:12,color:"#3b82f6",marginTop:4},children:[" Tahmini Tarih: ",e.jsx("strong",{children:new Date(t.stock.estimatedDate).toLocaleDateString("tr-TR")})]})]})]})}),((Bd=t.stock)==null?void 0:Bd.purchaseNotes)&&e.jsxs("div",{className:"text-muted",style:{fontStyle:"italic",marginBottom:8},children:[" ",t.stock.purchaseNotes]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"Rezerve Edilen rnler"}),e.jsxs("span",{className:"badge badge-info",children:[((Od=(Pd=t.stock)==null?void 0:Pd.items)==null?void 0:Od.length)||0," kalem"]})]}),(((Md=(_d=t.stock)==null?void 0:_d.items)==null?void 0:Md.length)||0)===0?e.jsx("div",{className:"text-muted",style:{padding:16},children:"Bu i iin stok bilgisi kaydedilmemi."}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",style:{fontSize:13},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{children:"rn Kodu"}),e.jsx("th",{children:"Renk"}),e.jsx("th",{children:"Rezerve"}),e.jsx("th",{children:"Gncel Stok"}),e.jsx("th",{children:"Durum"})]})}),e.jsx("tbody",{children:t.stock.items.map((o,h)=>{const I=k.find(de=>de.id===o.id),L=(I==null?void 0:I.available)||0,U=(I==null?void 0:I.onHand)||0,M=U>=o.qty,ne=L<o.qty&&U>=o.qty;return e.jsxs("tr",{style:{background:M?ne?"rgba(251, 191, 36, 0.1)":"transparent":"rgba(239, 68, 68, 0.1)"},children:[e.jsx("td",{style:{fontWeight:600},children:o.name}),e.jsx("td",{children:e.jsx("code",{style:{fontSize:11},children:o.productCode||"-"})}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-secondary",style:{fontSize:10},children:o.colorCode||"-"})}),e.jsxs("td",{children:[e.jsx("strong",{children:o.qty})," ",o.unit||"adet"]}),e.jsx("td",{children:e.jsxs("span",{style:{color:M?"var(--color-success)":"var(--color-danger)"},children:[L,"/",U]})}),e.jsx("td",{children:M?ne?e.jsx("span",{style:{color:"var(--color-warning)",fontSize:12},children:" Rezerve stoktan kullanlacak"}):e.jsx("span",{style:{color:"var(--color-success)",fontSize:12},children:" Hazr"}):e.jsxs("span",{style:{color:"var(--color-danger)",fontSize:12},children:[" Stok yetersiz (",o.qty-U," eksik)"]})})]},h)})})]})})]}),(()=>{var U;const o=(((U=t.stock)==null?void 0:U.items)||[]).map(M=>{const ne=k.find(Ce=>Ce.id===M.id),de=(ne==null?void 0:ne.onHand)||0,xe=(ne==null?void 0:ne.available)||0;return{...M,currentOnHand:de,currentAvailable:xe,hasEnough:de>=M.qty,usesReserved:xe<M.qty&&de>=M.qty,shortage:Math.max(0,M.qty-de)}}),h=o.filter(M=>!M.hasEnough),I=o.filter(M=>M.usesReserved),L=h.length===0;return e.jsxs(e.Fragment,{children:[h.length>0&&e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--color-danger)",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--color-danger)",marginBottom:8},children:" Stok Yetersiz - retime Alnamaz"}),e.jsx("div",{style:{fontSize:12,color:"var(--color-text-secondary)"},children:"Bu i iin planlanan stok, baka ilerde kullanlm veya eksik kalm:"}),e.jsx("ul",{style:{margin:"8px 0 0 0",paddingLeft:20,fontSize:12},children:h.map((M,ne)=>e.jsxs("li",{children:[e.jsx("strong",{children:M.name}),": ",M.qty," gerekli, ",M.currentOnHand," mevcut (",M.shortage," eksik)"]},ne))})]}),I.length>0&&h.length===0&&e.jsxs("div",{style:{background:"rgba(251, 191, 36, 0.1)",border:"1px solid var(--color-warning)",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--color-warning)",marginBottom:4},children:" Dikkat: Baka ilere ait rezerve stok kullanlacak"}),e.jsx("div",{style:{fontSize:12},children:"Bu ilem devam ederse, aadaki rnler iin baka ilerin stou etkilenecektir."})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:e.jsx("button",{className:"btn btn-success",type:"button",style:{padding:"12px 24px"},disabled:i||!L,onClick:()=>et(async()=>{var Ce,be,at,qe;if(I.length>0&&!window.confirm(`Baz rnler iin baka ilere ait rezerve stok kullanlacak.
Bu, dier ilerin stok ihtiyacn etkileyecektir.

Devam etmek istiyor musunuz?`))return;const M={jobId:t.id,items:(((Ce=t.stock)==null?void 0:Ce.items)||[]).map(tt=>({itemId:tt.id,qty:tt.qty})),reserveType:"consume",note:"retime alnd - Stoktan dld"},ne=await hi(M),de={ready:!0,purchaseNotes:((be=t.stock)==null?void 0:be.purchaseNotes)||"retime alnd",items:((at=t.stock)==null?void 0:at.items)||[]},xe=await pi(t.id,de);return await wr("stock_consumed","retime alnd - Stoktan dld",{consumed:(qe=t.stock)==null?void 0:qe.items}),ne.results&&R(tt=>tt.map(me=>{const ve=ne.results.find(He=>He.itemId===me.id);return ve?{...me,onHand:ve.newOnHand,reserved:ve.newReserved,available:ve.available}:me})),xe}),children:i?" leniyor...":" retime Al"})})]})})()]}):Qe?e.jsxs(e.Fragment,{children:[((Fd=t.stock)==null?void 0:Fd.purchaseNotes)&&e.jsxs("div",{className:"text-muted",style:{fontStyle:"italic",marginBottom:8},children:[" ",t.stock.purchaseNotes]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"Kullanlan Stok Kalemleri"}),e.jsxs("span",{className:"badge badge-secondary",children:[((Kd=(Ud=t.stock)==null?void 0:Ud.items)==null?void 0:Kd.length)||0," kalem"]})]}),((($d=(Wd=t.stock)==null?void 0:Wd.items)==null?void 0:$d.length)||0)===0?e.jsx("div",{className:"text-muted",style:{padding:16},children:"Bu i iin stok bilgisi kaydedilmemi."}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{children:"rn Kodu"}),e.jsx("th",{children:"Renk Kodu"}),e.jsx("th",{children:"Miktar"}),e.jsx("th",{children:"Birim"})]})}),e.jsx("tbody",{children:t.stock.items.map((o,h)=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:600},children:o.name}),e.jsx("td",{children:e.jsx("code",{children:o.productCode||"-"})}),e.jsx("td",{children:o.colorCode||"-"}),e.jsx("td",{children:e.jsx("strong",{children:o.qty})}),e.jsx("td",{children:o.unit||"adet"})]},h))})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("div",{className:"text-muted",children:" iin birden fazla kalem rezerve edebilirsiniz."}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>F(!0),children:" Stoktan Kalem Ekle"})]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"Seili Kalemler"}),e.jsxs("span",{className:"badge badge-secondary",children:[b.length," kalem"]})]}),b.length===0?e.jsx("div",{className:"text-muted",style:{padding:16},children:'Henz ekleme yapmadnz. "Stoktan Ekle" butonuna tklayn.'}):e.jsx("div",{className:"table-container",style:{maxHeight:200,overflow:"auto"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kalem"}),e.jsx("th",{children:"Kod"}),e.jsx("th",{children:"Renk"}),e.jsx("th",{children:"Mevcut"}),e.jsx("th",{children:"Miktar"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:b.map(o=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:600},children:o.name}),e.jsx("td",{className:"text-muted",children:o.productCode||o.sku}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-secondary",children:o.colorCode||o.color||"-"})}),e.jsxs("td",{children:[o.available," ",o.unit]}),e.jsx("td",{style:{minWidth:100},children:e.jsx("input",{type:"number",className:"form-input",min:"1",value:o.qty,onChange:h=>{const I=Number(h.target.value)||1;Z(L=>L.map(U=>U.id===o.id?{...U,qty:I}:U))},style:{width:80}})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-small btn-icon",type:"button",onClick:()=>Bc(o.id),children:""})})]},o.id))})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Rezervasyon Notu"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Satnalma / rezervasyon notu",value:p.stockNote,onChange:o=>D(h=>({...h,stockNote:o.target.value})),rows:3})]}),b.some(o=>o.qty>o.available)&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-danger)",background:"var(--color-danger-bg)",padding:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("strong",{style:{color:"var(--color-danger)"},children:"Yetersiz Stok"})]}),e.jsx("div",{className:"text-muted",style:{marginBottom:8},children:"Aadaki kalemler iin stok yetersiz. Sipari oluturmanz gerekiyor:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:b.filter(o=>o.qty>o.available).map(o=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 8px",background:"white",borderRadius:4,fontSize:13},children:[e.jsxs("span",{children:[e.jsx("strong",{children:o.name})," (",o.productCode||o.sku,")"]}),e.jsxs("span",{children:["Talep: ",e.jsx("strong",{children:o.qty}),"  Mevcut: ",e.jsx("strong",{style:{color:"var(--color-danger)"},children:o.available})," ",e.jsxs("span",{style:{color:"var(--color-danger)",fontWeight:600},children:[" Eksik: ",o.qty-o.available]})]})]},o.id))}),e.jsx("button",{className:"btn btn-warning",type:"button",style:{marginTop:12},onClick:()=>{const o=b.filter(h=>h.qty>h.available);alert(`${o.length} kalem iin sipari oluturulacak. (Satnalma modlne ynlendirilecek)`)},children:" Eksik rnler in Sipari Olutur"})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[e.jsx("button",{className:"btn btn-secondary",type:"button",style:{flex:1,padding:"14px 20px"},disabled:i||b.length===0,onClick:()=>{ee(!0),N(""),_("")},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Sonra ret"}),e.jsx("span",{style:{fontSize:11,opacity:.8},children:"Stok rezerve edilir"})]})}),e.jsx("button",{className:"btn btn-success",type:"button",style:{flex:1,padding:"14px 20px"},disabled:i||b.length===0||b.some(o=>o.qty>(o.onHand||o.available)),onClick:()=>et(async()=>{if(b.some(M=>M.qty>M.available&&M.qty<=(M.onHand||0))&&!window.confirm(`Baz rnler iin rezerve edilmi stok kullanlacak.
Bu, baka ilerin stok ihtiyacn etkileyebilir.

Devam etmek istiyor musunuz?`))return;const h={jobId:t.id,items:b.map(M=>({itemId:M.id,qty:M.qty})),reserveType:"consume",note:p.stockNote||"retime alnd - Stoktan dld"},I=await hi(h),L={ready:!0,purchaseNotes:p.stockNote||"retime alnd - Stoktan dld",items:b.map(M=>({id:M.id,name:M.name,productCode:M.productCode,colorCode:M.colorCode,qty:M.qty,unit:M.unit}))},U=await pi(t.id,L);return bn(t.id,{pendingPO:[]}),Ke([]),await wr("stock_consumed","retime alnd - Stoktan dld",{consumed:b}),I.results&&R(M=>M.map(ne=>{const de=I.results.find(xe=>xe.itemId===ne.id);return de?{...ne,onHand:de.newOnHand,reserved:de.newReserved,available:de.available}:ne})),Z([]),U}),children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Hemen retime Al"}),e.jsx("span",{style:{fontSize:11,opacity:.8},children:"Stoktan dlr"})]})})]}),b.some(o=>o.qty>(o.onHand||o.available))&&e.jsx("div",{className:"text-muted",style:{fontSize:12,marginTop:8,textAlign:"center"},children:" Yetersiz fiziksel stok olduu iin retime alnamaz. nce sipari oluturun."}),b.some(o=>o.qty>o.available&&o.qty<=(o.onHand||0))&&e.jsx("div",{style:{fontSize:12,marginTop:8,textAlign:"center",color:"var(--color-warning)"},children:" Baz rnler iin baka ilere ait rezerve stok kullanlacak!"})]})})]}),e.jsx(Ie,{open:Q,title:" Stoktan Kalem Ekle",size:"xxlarge",onClose:()=>{F(!1),P(null),G(1),A(""),y(""),j(""),fe(!1),$(null)},actions:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,textAlign:"left",fontSize:13,color:"var(--text-muted)"},children:b.length>0&&` ${b.length} kalem seildi`}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>F(!1),children:"ptal"}),e.jsxs("button",{className:"btn btn-success",type:"button",onClick:()=>{F(!1),A(""),y(""),j("")},disabled:b.length===0,children:[" Seimi Tamamla (",b.length," kalem)"]})]}),children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,minHeight:550},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",padding:16,borderRadius:12,border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Hzl rn Ara"}),e.jsx("span",{className:"text-muted",style:{fontSize:12},children:"(rne tklayarak sepete ekle)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:12,alignItems:"end"},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11,marginBottom:4},children:"rn Ad / Tedariki"}),e.jsx("input",{id:"stock-search-modal",className:"form-input",placeholder:"rn ara...",value:w,onChange:o=>A(o.target.value),autoFocus:!0,style:{fontSize:14,padding:"10px 14px"}})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11,marginBottom:4},children:"rn Kodu"}),e.jsx("input",{className:"form-input",placeholder:"Kod...",value:C,onChange:o=>y(o.target.value),style:{fontSize:14,padding:"10px 14px"}})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11,marginBottom:4},children:"Renk Kodu"}),e.jsx("input",{className:"form-input",placeholder:"Renk...",value:m,onChange:o=>j(o.target.value),style:{fontSize:14,padding:"10px 14px"}})]}),(w||C||m)&&e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{A(""),y(""),j("")},style:{height:44},children:"Temizle"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,flex:1},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("h4",{style:{margin:0,fontSize:14,display:"flex",alignItems:"center",gap:8},children:[" Seilen rnler",b.length>0&&e.jsx("span",{className:"badge badge-success",children:b.length})]}),b.length>0&&e.jsx("button",{type:"button",className:"btn btn-danger btn-small",onClick:()=>Z([]),children:"Tmn Temizle"})]}),e.jsx("div",{style:{flex:1,border:"2px dashed var(--color-border)",borderRadius:12,overflow:"hidden",background:b.length===0?"var(--color-bg-secondary)":"var(--color-bg)"},children:b.length===0?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:40,color:"var(--color-text-light)"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Henz rn seilmedi"}),e.jsxs("div",{style:{fontSize:13,textAlign:"center"},children:["Sa taraftaki listeden rnlere tklayarak",e.jsx("br",{}),"sepete ekleyebilirsiniz"]})]}):e.jsx("div",{style:{maxHeight:380,overflow:"auto"},children:e.jsxs("table",{className:"table",style:{fontSize:13},children:[e.jsx("thead",{style:{position:"sticky",top:0,background:"var(--color-bg)",zIndex:1},children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{style:{width:"15%"},children:"Kod"}),e.jsx("th",{style:{width:"10%"},children:"Renk"}),e.jsx("th",{style:{width:"15%"},children:"Miktar"}),e.jsx("th",{style:{width:"10%"},children:"Stok"}),e.jsx("th",{style:{width:"8%"}})]})}),e.jsx("tbody",{children:b.map(o=>{const h=o.qty>(o.available||0),I=o.qty>(o.available||0)&&o.qty<=(o.onHand||0);return e.jsxs("tr",{style:{background:h?I?"rgba(251, 191, 36, 0.1)":"rgba(239, 68, 68, 0.1)":"transparent"},children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600},children:o.name}),o.colorName&&e.jsx("div",{className:"text-muted",style:{fontSize:11},children:o.colorName})]}),e.jsx("td",{children:e.jsx("code",{style:{fontSize:11},children:o.productCode})}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-secondary",style:{fontSize:11},children:o.colorCode||"-"})}),e.jsxs("td",{children:[e.jsx("input",{type:"number",className:"form-input",style:{width:70,padding:"4px 8px",fontSize:13,textAlign:"center",border:h?"2px solid var(--color-warning)":void 0},value:o.qty,min:"1",max:o.onHand||999,onChange:L=>{const U=Number(L.target.value);Z(M=>M.map(ne=>ne.id===o.id?{...ne,qty:U}:ne))}}),e.jsx("span",{className:"text-muted",style:{fontSize:11,marginLeft:4},children:o.unit})]}),e.jsx("td",{children:e.jsxs("span",{style:{fontSize:12,color:(o.available||0)>=o.qty?"var(--color-success)":"var(--color-warning)"},children:[o.available,"/",o.onHand]})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",onClick:()=>Bc(o.id),style:{padding:"4px 8px"},children:""})})]},o.id)})})]})})}),b.some(o=>o.qty>(o.available||0)&&o.qty<=(o.onHand||0))&&e.jsx("div",{style:{marginTop:8,padding:"8px 12px",background:"rgba(251, 191, 36, 0.15)",border:"1px solid var(--color-warning)",borderRadius:8,fontSize:12,color:"var(--color-warning)"},children:" Baz rnler iin baka ilere ait rezerve stok kullanlacak!"}),b.some(o=>o.qty>(o.onHand||0))&&e.jsx("div",{style:{marginTop:8,padding:"8px 12px",background:"rgba(239, 68, 68, 0.15)",border:"1px solid var(--color-danger)",borderRadius:8,fontSize:12,color:"var(--color-danger)"},children:" Baz rnler iin yeterli stok yok! Ltfen miktarlar dzeltin."})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx("h4",{style:{margin:0,fontSize:14},children:" Stok Listesi"}),e.jsxs("span",{className:"text-muted",style:{fontSize:12},children:[Oa.length," rn"]})]}),u?e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Dt,{size:"small",text:"Stok listesi ykleniyor..."})}):v?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Stok alnamad"}),e.jsx("div",{className:"error-message",children:v})]}):e.jsx("div",{style:{flex:1,border:"1px solid var(--color-border)",borderRadius:12,overflow:"hidden"},children:e.jsx("div",{style:{maxHeight:380,overflow:"auto"},children:e.jsxs("table",{className:"table",style:{fontSize:12},children:[e.jsx("thead",{style:{position:"sticky",top:0,background:"var(--color-bg)",zIndex:1},children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{style:{width:"12%"},children:"Kod"}),e.jsx("th",{style:{width:"8%"},children:"Renk"}),e.jsx("th",{style:{width:"15%"},children:"Stok"}),e.jsx("th",{style:{width:"10%"}})]})}),e.jsx("tbody",{children:Oa.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsxs("div",{style:{padding:30,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),e.jsx("div",{style:{fontWeight:600},children:"rn Bulunamad"})]})})}):Oa.slice(0,100).map(o=>{const h=b.some(U=>U.id===o.id),I=(o.reserved||0)>0,L=(o.onHand||0)>0&&!h;return e.jsxs("tr",{style:{background:h?"var(--color-success-bg, rgba(34, 197, 94, 0.1))":I?"rgba(251, 191, 36, 0.05)":"transparent",cursor:L?"pointer":"not-allowed",opacity:L?1:.6},onClick:()=>L&&Rc(o),children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:12},children:o.name}),e.jsx("div",{className:"text-muted",style:{fontSize:10},children:o.supplierName||o.supplier||"-"})]}),e.jsx("td",{children:e.jsx("code",{style:{fontSize:10,padding:"2px 4px"},children:o.productCode||o.sku})}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-secondary",style:{fontSize:10},children:o.colorCode||o.color||"-"})}),e.jsxs("td",{children:[e.jsxs("div",{style:{fontSize:12},children:[e.jsx("strong",{style:{color:(o.available||0)>0?"var(--color-success)":(o.onHand||0)>0?"var(--color-warning)":"var(--color-danger)"},children:o.available||0}),e.jsxs("span",{className:"text-muted",children:["/",o.onHand||0]})]}),I&&e.jsxs("div",{style:{fontSize:10,color:"var(--color-warning)"},children:[" ",o.reserved," res."]})]}),e.jsx("td",{children:h?e.jsx("span",{style:{color:"var(--color-success)",fontSize:16},children:""}):L?e.jsx("button",{type:"button",className:"btn btn-primary btn-small",style:{padding:"4px 8px",fontSize:11},onClick:U=>{U.stopPropagation(),Rc(o)},children:"+ Ekle"}):e.jsx("span",{className:"text-muted",style:{fontSize:10},children:(o.onHand||0)===0?"Stok yok":"Eklendi"})})]},o.id)})})]})})})]})]})]})}),e.jsx(Ie,{open:Se,title:"Miktar Girin",size:"small",onClose:()=>{fe(!1),$(null),ie(1)},actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>{fe(!1),$(null)},children:"ptal"}),e.jsx("button",{className:"btn btn-success",type:"button",onClick:Lc,disabled:!H||E<=0||E>((H==null?void 0:H.onHand)||0),children:" Sepete Ekle"})]}),children:H&&e.jsxs("div",{children:[e.jsxs("div",{style:{background:"var(--color-bg-secondary)",padding:16,borderRadius:8,marginBottom:16},children:[e.jsx("div",{style:{fontWeight:700,fontSize:16,marginBottom:8},children:H.name}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted",style:{fontSize:11},children:"Kod: "}),e.jsx("code",{children:H.productCode||H.sku})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted",style:{fontSize:11},children:"Renk: "}),e.jsx("span",{className:"badge badge-secondary",children:H.colorCode||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted",style:{fontSize:11},children:"Kullanlabilir: "}),e.jsx("strong",{style:{color:"var(--color-success)"},children:H.available||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted",style:{fontSize:11},children:"Fiziksel: "}),e.jsx("strong",{children:H.onHand||0})]})]})]}),((H==null?void 0:H.reserved)||0)>0&&e.jsxs("div",{style:{background:"rgba(251, 191, 36, 0.15)",border:"1px solid var(--color-warning)",borderRadius:8,padding:12,marginBottom:16,fontSize:12},children:[e.jsx("strong",{style:{color:"var(--color-warning)"},children:" Bu stok rezerve edilmi!"}),e.jsxs("div",{className:"text-muted",children:["Baka i iin ",H.reserved," adet rezerve. Yine de kullanabilirsiniz."]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Miktar (",H.unit||"adet",")"]}),e.jsx("input",{type:"number",className:"form-input",value:E,onChange:o=>ie(Number(o.target.value)),onKeyDown:o=>{o.key==="Enter"&&E>0&&E<=((H==null?void 0:H.onHand)||0)&&(o.preventDefault(),Lc())},min:"1",max:(H==null?void 0:H.onHand)||999,autoFocus:!0,style:{fontSize:24,padding:"16px",textAlign:"center",fontWeight:700}}),E>((H==null?void 0:H.available)||0)&&E<=((H==null?void 0:H.onHand)||0)&&e.jsxs("div",{style:{color:"var(--color-warning)",fontSize:12,marginTop:8},children:[" Rezerve stoktan kullanlacak! (",E-((H==null?void 0:H.available)||0)," adet)"]}),E>((H==null?void 0:H.onHand)||0)&&e.jsxs("div",{style:{color:"var(--color-danger)",fontSize:12,marginTop:8},children:[" Stok yetersiz! Maksimum: ",(H==null?void 0:H.onHand)||0]}),e.jsx("div",{className:"text-muted",style:{fontSize:11,marginTop:8,textAlign:"center"},children:" Enter tuu ile hzlca ekleyebilirsiniz"})]})]})}),e.jsx(Ie,{open:J,title:" Sonra retilecek - zet",size:"medium",onClose:()=>ee(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>ee(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"button",disabled:i||!re,onClick:()=>et(async()=>{const o={jobId:t.id,items:b.map(M=>({itemId:M.id,qty:M.qty})),reserveType:"reserve",note:x||"Sonra retilecek - Rezerve edildi"},h=await hi(o),I={ready:!1,purchaseNotes:x||"Sonra retilecek - Rezerve edildi",estimatedDate:re,items:b.map(M=>({id:M.id,name:M.name,productCode:M.productCode,colorCode:M.colorCode,qty:M.qty,unit:M.unit,available:M.available,onHand:M.onHand}))},L=await pi(t.id,I),U=b.filter(M=>M.qty>M.available).map(M=>({...M,missing:M.qty-M.available}));if(U.length>0){const M=fj(t.id,U);bn(t.id,{pendingPO:U,estimatedDate:re}),Ke(U),await wr("stock_reserved","Stok rezerve edildi - Sonra retilecek",{reserved:b,pending:U,estimatedDate:re,poId:M==null?void 0:M.id})}else bn(t.id,{pendingPO:[],estimatedDate:re}),Ke([]),await wr("stock_reserved","Stok rezerve edildi",{reserved:b,estimatedDate:re});return h.results&&R(M=>M.map(ne=>{const de=h.results.find(xe=>xe.itemId===ne.id);return de?{...ne,onHand:de.newOnHand,reserved:de.newReserved,available:de.available}:ne})),Z([]),ee(!1),L}),children:i?" leniyor...":" Rezerve Et ve Kaydet"})]}),children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:16,borderRadius:12,border:"1px solid #f59e0b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontWeight:700},children:"Sonra retilecek"})]}),e.jsx("div",{style:{fontSize:13,color:"#92400e"},children:'Bu i iin stok rezerve edilecek ve sonra retilmek zere bekletilecek.  listesinde "Sonra retilecek" durumunda grnecektir.'})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:14},children:[" Seilen rnler (",b.length," kalem)"]}),e.jsx("div",{style:{maxHeight:150,overflow:"auto",border:"1px solid var(--color-border)",borderRadius:8},children:e.jsxs("table",{className:"table",style:{fontSize:12,marginBottom:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{style:{width:"20%"},children:"Kod"}),e.jsx("th",{style:{width:"15%"},children:"Miktar"}),e.jsx("th",{style:{width:"15%"},children:"Durum"})]})}),e.jsx("tbody",{children:b.map(o=>{const h=o.qty>(o.available||0);return e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:600},children:o.name}),e.jsx("td",{children:e.jsx("code",{style:{fontSize:10},children:o.productCode})}),e.jsxs("td",{children:[o.qty," ",o.unit]}),e.jsx("td",{children:h?e.jsxs("span",{style:{color:"var(--color-warning)",fontSize:11},children:[" ",o.qty-(o.available||0)," eksik"]}):e.jsx("span",{style:{color:"var(--color-success)",fontSize:11},children:" Yeterli"})})]},o.id)})})]})})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsxs("label",{className:"form-label",children:[" Tahmini Hazr Olma Tarihi ",e.jsx("span",{style:{color:"var(--color-danger)"},children:"*"})]}),e.jsx("input",{type:"date",className:"form-input",value:re,onChange:o=>N(o.target.value),min:new Date().toISOString().split("T")[0],style:{fontSize:16,padding:12}}),e.jsx("div",{className:"text-muted",style:{fontSize:11,marginTop:4},children:"Bu tarih, iin ne zaman retime alnabileceini gsterir"})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:" Not (Opsiyonel)"}),e.jsx("textarea",{className:"form-input",value:x,onChange:o=>_(o.target.value),placeholder:"rn: Mteri talebiyle ertelendi, Malzeme bekliyor...",rows:2,style:{resize:"vertical"}})]})]})}),qt("production")&&e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:" retim & Tedarik Takip"})}),e.jsxs("div",{className:"card-body",style:{gap:12},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"0.75rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700},children:((qd=q.summary)==null?void 0:qd.totalOrders)||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Toplam Sipari"})]}),e.jsxs("div",{style:{background:"rgba(var(--warning-rgb), 0.1)",padding:"0.75rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--warning)"},children:((Hd=q.summary)==null?void 0:Hd.totalItems)-((Vd=q.summary)==null?void 0:Vd.receivedItems)||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Bekleyen Adet"})]}),e.jsxs("div",{style:{background:"rgba(var(--danger-rgb), 0.1)",padding:"0.75rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--danger)"},children:((Yd=q.summary)==null?void 0:Yd.pendingIssues)||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Sorun"})]}),e.jsxs("div",{style:{background:(Gd=q.summary)!=null&&Gd.readyForAssembly?"rgba(var(--success-rgb), 0.15)":"var(--bg-secondary)",padding:"0.75rem",borderRadius:"8px",textAlign:"center",border:(Qd=q.summary)!=null&&Qd.readyForAssembly?"2px solid var(--success)":"none"},children:[e.jsx("div",{style:{fontSize:"1.25rem"},children:(Jd=q.summary)!=null&&Jd.readyForAssembly?"":""}),e.jsx("div",{style:{fontSize:"0.7rem",color:(Xd=q.summary)!=null&&Xd.readyForAssembly?"var(--success)":"var(--text-muted)"},children:(Zd=q.summary)!=null&&Zd.readyForAssembly?"Montaja Hazr":"Bekleniyor"})]})]}),!Qe&&((eu=t.roles)==null?void 0:eu.length)>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,marginBottom:"0.5rem",color:"var(--text-muted)"},children:"  Kollar - Hzl Sipari"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.roles.map(o=>{var Ce;const h=Ze.find(be=>be.id===o.id||be.name===o.name),L=(o.productionType||(h==null?void 0:h.productionType)||"internal")==="internal",U=o.requiresGlass!==void 0?o.requiresGlass:(h==null?void 0:h.requiresGlass)||!1,M=((Ce=q.orders)==null?void 0:Ce.filter(be=>be.roleId===o.id))||[],ne=M.some(be=>be.orderType==="internal"||be.orderType==="external"),de=M.some(be=>be.orderType==="glass"),xe=ne&&(!U||de);return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:xe?"rgba(var(--success-rgb), 0.05)":"var(--bg-secondary)",borderRadius:"8px",borderLeft:`4px solid ${xe?"var(--success)":L?"var(--primary)":"var(--warning)"}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.name,xe&&e.jsx("span",{style:{color:"var(--success)"},children:""})]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[L?"  retim":" D Sipari",U&&e.jsx("span",{children:"   Cam Gerekli"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[ne&&e.jsx("span",{className:"badge badge-primary",style:{fontSize:"0.6rem"},children:" retim Siparii"}),U&&de&&e.jsx("span",{className:"badge badge-info",style:{fontSize:"0.6rem"},children:" Cam Siparii"})]})]}),e.jsxs("div",{children:[!xe&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:async()=>{await Ic();const be=new Date;be.setDate(be.getDate()+((h==null?void 0:h.estimatedDays)||5));const at=new Date;at.setDate(at.getDate()+7);let qe="",tt="";if(!L&&(h!=null&&h.defaultSupplier)){const He=le.find(wt=>wt.id===h.defaultSupplier);He&&(qe=He.id,tt=He.name)}let me="",ve="";if(U&&(h!=null&&h.defaultGlassSupplier)){const He=le.find(wt=>wt.id===h.defaultGlassSupplier);He&&(me=He.id,ve=He.name)}K({roleId:o.id||"",roleName:o.name||"",productionType:L?"internal":"external",productionDescription:"",productionQty:1,productionUnit:"adet",productionEstDelivery:be.toISOString().slice(0,10),productionNotes:"",productionSupplierId:qe,productionSupplierName:tt,requiresGlass:U||!1,includeGlass:U&&!de,glassItems:[{glassType:"",glassName:"",quantity:1,combination:""}],glassSupplierId:me,glassSupplierName:ve,glassEstDelivery:at.toISOString().slice(0,10),skipProduction:ne}),Te(!0)},children:ne?" Cam Sipari Ge":" Sipari Olutur"}),xe&&e.jsx("span",{className:"badge badge-success",children:" Sipariler Verildi"})]})]},o.id||o.name)})})]}),Y?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:"Ykleniyor..."}):((tu=q.orders)==null?void 0:tu.length)===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Henz sipari yok"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Yukardan i kollarna gre sipari oluturabilirsiniz"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:q.orders.map(o=>{var ne,de,xe;const h=((ne=o.items)==null?void 0:ne.reduce((Ce,be)=>Ce+(be.quantity||0),0))||0,I=((de=o.items)==null?void 0:de.reduce((Ce,be)=>Ce+(be.receivedQty||0),0))||0,L=((xe=o.issues)==null?void 0:xe.filter(Ce=>Ce.status==="pending").length)||0,U={internal:"var(--success)",external:"var(--warning)",glass:"var(--info)"},M={internal:"  retim",external:" D Sipari",glass:" Cam"};return e.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"8px",padding:"0.75rem",borderLeft:`4px solid ${U[o.orderType]||"var(--border-color)"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:o.roleName}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[M[o.orderType]," ",o.supplierName&&` ${o.supplierName}`]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("span",{className:`badge badge-${o.status==="completed"?"success":o.status==="partial"?"info":"primary"}`,children:o.status==="completed"?" Tamamland":o.status==="partial"?" Ksmi Teslim":" Siparite"}),o.isOverdue&&e.jsx("span",{className:"badge badge-danger",children:"GECKT"}),L>0&&e.jsxs("span",{className:"badge badge-danger",children:[" ",L]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{flex:1,height:"6px",background:"var(--bg-tertiary)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${h>0?I/h*100:0}%`,height:"100%",background:o.status==="completed"?"var(--success)":"var(--primary)",transition:"width 0.3s"}})}),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,minWidth:"60px"},children:[I," / ",h]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:["Tahmini: ",o.estimatedDelivery?gi(o.estimatedDelivery):""]}),!Qe&&o.status!=="completed"&&e.jsx("button",{className:"btn btn-xs btn-success",onClick:()=>{_e(o),je({deliveries:o.items.map((Ce,be)=>({lineIndex:be,receivedQty:0,problemQty:0,problemType:"",problemNote:""})),deliveryDate:new Date().toISOString().slice(0,10),deliveryNote:""}),Ve(!0)},children:" Teslim Kaydet"})]})]},o.id)})}),((su=q.summary)==null?void 0:su.readyForAssembly)&&!Qe&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"linear-gradient(135deg, rgba(var(--success-rgb), 0.1) 0%, rgba(var(--success-rgb), 0.05) 100%)",borderRadius:"8px",border:"1px solid var(--success)",textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem",color:"var(--success)"},children:" Tm sipariler tamamland!"}),e.jsx("button",{className:"btn btn-success",disabled:i,onClick:()=>et(()=>nj(t.id,{status:"MONTAJA_HAZIR"}),{production:"MONTAJA_HAZIR"}),children:" Montaja Ge"})]})]})]}),e.jsxs(Ie,{isOpen:Pe,onClose:()=>Te(!1),title:` ${g.roleName||"Sipari"} - Sipari Olutur`,size:"large",children:[!g.skipProduction&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",padding:"0.5rem 0.75rem",background:g.productionType==="internal"?"rgba(var(--success-rgb), 0.1)":"rgba(var(--warning-rgb), 0.1)",borderRadius:"6px",borderLeft:`3px solid ${g.productionType==="internal"?"var(--success)":"var(--warning)"}`},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:g.productionType==="internal"?"":""}),e.jsx("span",{style:{fontWeight:600},children:g.productionType==="internal"?" retim":"D Sipari"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Aklama"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"r: Villa projesi pencereler...",value:g.productionDescription,onChange:o=>K(h=>({...h,productionDescription:o.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Adet"}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("input",{type:"number",className:"form-input",min:1,value:g.productionQty,onChange:o=>K(h=>({...h,productionQty:parseInt(o.target.value)||1})),style:{flex:1}}),e.jsxs("select",{className:"form-select",value:g.productionUnit,onChange:o=>K(h=>({...h,productionUnit:o.target.value})),style:{width:"70px"},children:[e.jsx("option",{value:"adet",children:"adet"}),e.jsx("option",{value:"set",children:"set"}),e.jsx("option",{value:"m",children:"m"})]})]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Tahmini Teslim"}),e.jsx("input",{type:"date",className:"form-input",value:g.productionEstDelivery,onChange:o=>K(h=>({...h,productionEstDelivery:o.target.value}))})]})]}),g.productionType==="external"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.75rem"},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"D retim Tedarikisi"}),e.jsxs("select",{className:"form-select",value:g.productionSupplierId,onChange:o=>{const h=le.find(I=>I.id===o.target.value);K(I=>({...I,productionSupplierId:(h==null?void 0:h.id)||"",productionSupplierName:(h==null?void 0:h.name)||""}))},children:[e.jsx("option",{value:"",children:"Tedariki sein..."}),le.filter(o=>o.supplyType==="production"&&(o.jobRoleId===g.roleId||!o.jobRoleId)).map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Not"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Opsiyonel notlar...",value:g.productionNotes,onChange:o=>K(h=>({...h,productionNotes:o.target.value}))})]})]})]}),g.requiresGlass&&e.jsxs("div",{style:{padding:"1rem",background:g.includeGlass?"rgba(var(--info-rgb), 0.05)":"var(--bg-secondary)",borderRadius:"8px",border:g.includeGlass?"1px solid var(--info)":"1px dashed var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:g.includeGlass?"1rem":0},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:g.includeGlass,onChange:o=>K(h=>({...h,includeGlass:o.target.checked})),style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{fontSize:"1.1rem"},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Cam Siparii Dahil Et"})]}),!g.skipProduction&&g.requiresGlass&&e.jsx("span",{className:"badge badge-info",style:{fontSize:"0.65rem"},children:"Bu i kolu iin cam gerekli"})]}),g.includeGlass&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("label",{className:"form-label",style:{margin:0,fontSize:"0.75rem"},children:"Cam Kalemleri"}),e.jsx("button",{type:"button",className:"btn btn-xs btn-info",onClick:()=>K(o=>({...o,glassItems:[...o.glassItems,{glassType:"",glassName:"",quantity:1,combination:""}]})),children:"+ Cam Tipi Ekle"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:g.glassItems.map((o,h)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 80px 30px",gap:"0.5rem",padding:"0.5rem",background:"white",borderRadius:"6px",border:"1px solid var(--border-color)"},children:[e.jsxs("select",{className:"form-select",value:o.glassType,onChange:I=>{const L=ze.find(M=>M.code===I.target.value),U=[...g.glassItems];U[h]={...U[h],glassType:I.target.value,glassName:(L==null?void 0:L.name)||""},K(M=>({...M,glassItems:U}))},style:{fontSize:"0.8rem"},children:[e.jsxs("option",{value:"",children:["Cam tipi sein... (",ze.length," adet)"]}),ze.map(I=>e.jsx("option",{value:I.code,children:I.name},I.id))]}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Kombinasyon (r: Sinerji, Low-E)",value:o.combination,onChange:I=>{const L=[...g.glassItems];L[h]={...L[h],combination:I.target.value},K(U=>({...U,glassItems:L}))},style:{fontSize:"0.8rem"},list:"combinationsList"}),e.jsx("input",{type:"number",className:"form-input",min:1,placeholder:"Adet",value:o.quantity,onChange:I=>{const L=[...g.glassItems];L[h]={...L[h],quantity:parseInt(I.target.value)||1},K(U=>({...U,glassItems:L}))},style:{fontSize:"0.8rem",textAlign:"center"}}),e.jsx("button",{type:"button",className:"btn btn-xs btn-ghost",onClick:()=>{g.glassItems.length>1&&K(I=>({...I,glassItems:I.glassItems.filter((L,U)=>U!==h)}))},style:{color:"var(--danger)"},disabled:g.glassItems.length===1,children:""})]},h))}),e.jsx("datalist",{id:"combinationsList",children:Le.map((o,h)=>e.jsx("option",{value:o},h))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Cam Tedarikisi"}),e.jsxs("select",{className:"form-select",value:g.glassSupplierId,onChange:o=>{const h=le.find(I=>I.id===o.target.value);K(I=>({...I,glassSupplierId:(h==null?void 0:h.id)||"",glassSupplierName:(h==null?void 0:h.name)||""}))},children:[e.jsx("option",{value:"",children:"Tedariki sein..."}),le.filter(o=>o.supplyType==="glass"&&(o.jobRoleId===g.roleId||!o.jobRoleId)).map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem"},children:"Tahmini Cam Teslimi"}),e.jsx("input",{type:"date",className:"form-input",value:g.glassEstDelivery,onChange:o=>K(h=>({...h,glassEstDelivery:o.target.value}))})]})]})]})]}),e.jsx("div",{style:{marginTop:"1.5rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:[e.jsx("strong",{children:"Oluturulacak:"})," ",!g.skipProduction&&e.jsx("span",{className:"badge badge-primary",style:{marginRight:"0.25rem"},children:"1x retim"}),g.includeGlass&&e.jsxs("span",{className:"badge badge-info",children:["1x Cam Siparii (",g.glassItems.reduce((o,h)=>o+(h.quantity||0),0)," adet)"]}),g.skipProduction&&!g.includeGlass&&e.jsx("span",{style:{color:"var(--danger)"},children:"Hibir ey seilmedi"})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>Te(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",disabled:i||!g.skipProduction&&!g.productionDescription||g.skipProduction&&!g.includeGlass,onClick:async()=>{try{c(!0);const o=[];g.skipProduction||o.push(vo({jobId:t.id,roleId:g.roleId,roleName:g.roleName,orderType:g.productionType,supplierId:g.productionSupplierId,supplierName:g.productionSupplierName,items:[{notes:g.productionDescription,quantity:g.productionQty,unit:g.productionUnit}],estimatedDelivery:g.productionEstDelivery,notes:g.productionNotes})),g.includeGlass&&g.glassItems.length>0&&o.push(vo({jobId:t.id,roleId:g.roleId,roleName:g.roleName,orderType:"glass",supplierId:g.glassSupplierId,supplierName:g.glassSupplierName,items:g.glassItems.map(L=>({glassType:L.glassType,glassName:L.glassName,quantity:L.quantity,unit:"adet",combination:L.combination})),estimatedDelivery:g.glassEstDelivery,notes:""})),await Promise.all(o);const h=await fi(t.id);O(h||{orders:[],summary:{}}),(t.roles||[]).every(L=>{const U=L.id||`role-${L.name}`,M=((h==null?void 0:h.orders)||[]).filter(be=>be.roleId===U||be.roleName===L.name),ne=Ze.find(be=>be.id===U||be.name===L.name),de=M.some(be=>be.orderType==="internal"||be.orderType==="external"),xe=M.some(be=>be.orderType==="glass"),Ce=(ne==null?void 0:ne.requiresGlass)||L.requiresGlass;return de&&(!Ce||xe)})&&t.status==="URETIME_HAZIR"&&(await St(t.id,{status:"URETIMDE"}),bn(t.id,{status:"URETIMDE"})),Te(!1)}catch(o){a(xi(o))}finally{c(!1)}},children:i?"Kaydediliyor...":" Siparileri Olutur"})]})]}),e.jsx(Ie,{isOpen:$e,onClose:()=>Ve(!1),title:`Teslim Kaydet - ${(Ue==null?void 0:Ue.roleName)||""}`,size:"large",children:Ue&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:" Kolu:"})," ",Ue.roleName]}),Ue.supplierName&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tedariki:"})," ",Ue.supplierName]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("input",{type:"date",className:"form-input",value:ue.deliveryDate,onChange:o=>je(h=>({...h,deliveryDate:o.target.value})),style:{width:"150px"}}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{je(o=>({...o,deliveries:o.deliveries.map((h,I)=>{var L,U;return{...h,receivedQty:Math.max(0,(((L=Ue.items[I])==null?void 0:L.quantity)||0)-(((U=Ue.items[I])==null?void 0:U.receivedQty)||0))}})}))},children:"Tmn Doldur"})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("table",{className:"data-table",style:{fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kalem"}),e.jsx("th",{style:{width:"70px"},children:"Sipari"}),e.jsx("th",{style:{width:"70px"},children:"Alnan"}),e.jsx("th",{style:{width:"70px"},children:"Teslim"}),e.jsx("th",{style:{width:"70px"},children:"Sorunlu"}),e.jsx("th",{style:{width:"100px"},children:"Sorun Tipi"})]})}),e.jsx("tbody",{children:Ue.items.map((o,h)=>{const I=(o.quantity||0)-(o.receivedQty||0),L=ue.deliveries[h]||{};return e.jsxs("tr",{children:[e.jsxs("td",{children:[o.glassName||o.notes||`Kalem ${h+1}`,o.combination&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:o.combination})]}),e.jsxs("td",{children:[o.quantity," ",o.unit]}),e.jsx("td",{style:{color:I===0?"var(--success)":"inherit"},children:o.receivedQty||0}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-input",value:L.receivedQty||"",onChange:U=>{const M=[...ue.deliveries];M[h]={...M[h],receivedQty:parseInt(U.target.value)||0},je(ne=>({...ne,deliveries:M}))},min:0,max:I,style:{width:"60px",padding:"0.25rem",textAlign:"center"}})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-input",value:L.problemQty||"",onChange:U=>{const M=[...ue.deliveries];M[h]={...M[h],problemQty:parseInt(U.target.value)||0},je(ne=>({...ne,deliveries:M}))},min:0,style:{width:"60px",padding:"0.25rem",textAlign:"center"}})}),e.jsx("td",{children:L.problemQty>0&&e.jsxs("select",{className:"form-select",value:L.problemType||"",onChange:U=>{const M=[...ue.deliveries];M[h]={...M[h],problemType:U.target.value},je(ne=>({...ne,deliveries:M}))},style:{padding:"0.25rem",fontSize:"0.75rem"},children:[e.jsx("option",{value:"",children:"Sein..."}),e.jsx("option",{value:"broken",children:" Krk"}),e.jsx("option",{value:"missing",children:" Eksik"}),e.jsx("option",{value:"wrong",children:" Yanl"}),e.jsx("option",{value:"other",children:" Dier"})]})})]},h)})})]})}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Teslimat Notu"}),e.jsx("input",{type:"text",className:"form-input",value:ue.deliveryNote,onChange:o=>je(h=>({...h,deliveryNote:o.target.value})),placeholder:"Opsiyonel not..."})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>Ve(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-success",disabled:i,onClick:async()=>{if(!ue.deliveries.some(h=>h.receivedQty>0||h.problemQty>0)){alert("En az bir teslim miktar girin");return}try{c(!0),await ty(Ue.id,ue);const h=await fi(t.id);O(h||{orders:[],summary:{}}),Ve(!1)}catch(h){a(xi(h))}finally{c(!1)}},children:i?"Kaydediliyor...":" Teslim Kaydet"})]})]})}),qt("assembly")&&e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Montaj Termin"})}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:12},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Montaj Tarihi"}),e.jsx("input",{className:"form-input",type:"date",value:((ru=p.assemblyDate)==null?void 0:ru.split("T")[0])||p.assemblyDate||"",onChange:o=>{const h=p.assemblyTime||"09:00";D(I=>({...I,assemblyDate:o.target.value?`${o.target.value}T${h}`:""}))}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Saat"}),e.jsx("input",{className:"form-input",type:"time",value:(nu=p.assemblyDate)!=null&&nu.includes("T")?(lu=p.assemblyDate.split("T")[1])==null?void 0:lu.slice(0,5):"09:00",onChange:o=>{var I;const h=((I=p.assemblyDate)==null?void 0:I.split("T")[0])||"";h&&D(L=>({...L,assemblyDate:`${h}T${o.target.value}`}))}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Ekip"}),e.jsx("input",{className:"form-input",placeholder:"Montaj ekibi",value:p.assemblyTeam,onChange:o=>D(h=>({...h,assemblyTeam:o.target.value}))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Montaj Notu"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Montaj notu, adres detaylar vb.",value:p.assemblyNote,onChange:o=>D(h=>({...h,assemblyNote:o.target.value}))})]}),e.jsxs("div",{className:"btn-group",style:{gap:8},children:[e.jsx("button",{className:"btn btn-secondary",type:"button",disabled:i,onClick:()=>et(()=>lj(t.id,{date:p.assemblyDate,note:p.assemblyNote,team:p.assemblyTeam})),children:"Termin Kaydet"}),e.jsx("button",{className:"btn btn-success",type:"button",disabled:i,onClick:()=>et(async()=>{const o=await aj(t.id,{date:p.assemblyDate,note:p.assemblyNote,team:p.assemblyTeam,completed:!0});return await wr("assembly.completed","Montaj tamamland",{team:p.assemblyTeam}),o}),children:" Montaj Bitti"})]})]})]}),qt("finance")&&e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Son Mutabakat (Kapan)"})}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:"Finansal zet"})}),e.jsx("div",{className:"card-body",style:{padding:16},children:e.jsxs("div",{className:"grid grid-2",style:{gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Teklif Tutar"}),e.jsxs("span",{className:"metric-value",children:[pe(is)," "]})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"n Alnan"}),e.jsxs("span",{className:"metric-value",children:[pe(Number(((iu=(au=t.approval)==null?void 0:au.paymentPlan)==null?void 0:iu.cash)||0)+Number(((cu=(ou=t.approval)==null?void 0:ou.paymentPlan)==null?void 0:cu.card)||0)+Number(((uu=(du=t.approval)==null?void 0:du.paymentPlan)==null?void 0:uu.cheque)||0))," "]})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Teslimat Sonras"}),e.jsxs("span",{className:"metric-value",children:[pe(Number(((pu=(mu=t.approval)==null?void 0:mu.paymentPlan)==null?void 0:pu.afterDelivery)||0))," "]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Beklenen Toplam"}),e.jsxs("span",{className:"metric-value",children:[pe(Number(((fu=(hu=t.approval)==null?void 0:hu.paymentPlan)==null?void 0:fu.cash)||0)+Number(((xu=(yu=t.approval)==null?void 0:yu.paymentPlan)==null?void 0:xu.card)||0)+Number(((vu=(gu=t.approval)==null?void 0:gu.paymentPlan)==null?void 0:vu.cheque)||0)+Number(((Nu=(ju=t.approval)==null?void 0:ju.paymentPlan)==null?void 0:Nu.afterDelivery)||0))," "]})]}),is!==Number(((Su=(bu=t.approval)==null?void 0:bu.paymentPlan)==null?void 0:Su.cash)||0)+Number(((Cu=(ku=t.approval)==null?void 0:ku.paymentPlan)==null?void 0:Cu.card)||0)+Number(((Tu=(wu=t.approval)==null?void 0:wu.paymentPlan)==null?void 0:Tu.cheque)||0)+Number(((Du=(zu=t.approval)==null?void 0:zu.paymentPlan)==null?void 0:Du.afterDelivery)||0)&&e.jsx("div",{className:"badge badge-warning",style:{marginTop:8},children:"deme plan teklif tutaryla elemiyor!"})]})]})})]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Bitiminde Alnan Tutar"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-4",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nakit"}),e.jsx(yt,{placeholder:"0",value:p.financeCash,onChange:o=>D(h=>({...h,financeCash:o}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Kredi Kart"}),e.jsx(yt,{placeholder:"0",value:p.financeCard,onChange:o=>D(h=>({...h,financeCard:o}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ek"}),e.jsx(yt,{placeholder:"0",value:p.financeCheque,onChange:o=>D(h=>({...h,financeCheque:o}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Toplam Alnan"}),e.jsxs("div",{className:"form-input",style:{background:"#f9fafb",display:"flex",alignItems:"center"},children:[pe(Number(p.financeCash||0)+Number(p.financeCard||0)+Number(p.financeCheque||0))," "]})]})]}),(()=>{var M,ne,de,xe,Ce,be;const o=Number(((ne=(M=t.approval)==null?void 0:M.paymentPlan)==null?void 0:ne.cash)||0)+Number(((xe=(de=t.approval)==null?void 0:de.paymentPlan)==null?void 0:xe.card)||0)+Number(((be=(Ce=t.approval)==null?void 0:Ce.paymentPlan)==null?void 0:be.cheque)||0),h=Number(p.financeCash||0)+Number(p.financeCard||0)+Number(p.financeCheque||0),I=Number(p.discountAmount||0),L=o+h+I,U=is-L;return e.jsxs("div",{style:{marginTop:12,padding:12,background:U===0?"#ecfdf5":"#fef2f2",borderRadius:8},children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"n Alnan"}),e.jsxs("span",{children:[pe(o)," "]})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"imdi Alnan"}),e.jsxs("span",{children:[pe(h)," "]})]}),I>0&&e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"skonto"}),e.jsxs("span",{children:[pe(I)," "]})]}),e.jsx("hr",{style:{margin:"8px 0",borderColor:"rgba(0,0,0,0.1)"}}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",style:{fontWeight:700},children:"Toplam"}),e.jsxs("span",{style:{fontWeight:700},children:[pe(L)," "]})]}),e.jsxs("div",{className:"metric-row",style:{color:U===0?"#059669":"#dc2626"},children:[e.jsx("span",{className:"metric-label",children:"Bakiye Fark"}),e.jsxs("span",{style:{fontWeight:700},children:[U>0?`+${pe(U)}`:pe(U)," "]})]}),U!==0&&e.jsx("div",{className:"badge badge-danger",style:{marginTop:8},children:U>0?"Eksik tahsilat!":"Fazla tahsilat!"})]})})()]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"skonto Tutar (opsiyonel)"}),e.jsx(yt,{placeholder:"0",value:p.discountAmount,onChange:o=>D(h=>({...h,discountAmount:o}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"skonto Notu"}),e.jsx("input",{className:"form-input",placeholder:"skonto sebebi",value:p.discountNote,onChange:o=>D(h=>({...h,discountNote:o.target.value}))})]})]}),e.jsx("button",{className:"btn btn-success",type:"button",disabled:i,onClick:()=>et(()=>ij(t.id,{total:Number(p.financeTotal||is),payments:{cash:Number(p.financeCash||0),card:Number(p.financeCard||0),cheque:Number(p.financeCheque||0)},discount:Number(p.discountAmount||0)>0?{amount:Number(p.discountAmount||0),note:p.discountNote||""}:null})),children:"i Kapat (Bakiye 0 olmal)"})]})]}),kr&&qt("service_schedule")&&e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:" Servis Randevusu"}),e.jsx("span",{className:"badge badge-warning",children:"Randevu Belirlenmedi"})]}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[e.jsx("div",{className:"card subtle-card",style:{padding:12},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.customerName}),e.jsx("div",{className:"text-muted",style:{fontSize:12},children:t.title})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:" Kodu"}),e.jsx("div",{style:{fontWeight:600},children:t.id})]})]})}),e.jsxs("div",{className:"grid grid-3",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Randevu Tarihi *"}),e.jsx("input",{className:"form-input",type:"date",value:p.serviceAppointmentDate||"",onChange:o=>D(h=>({...h,serviceAppointmentDate:o.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Saat *"}),e.jsx("input",{className:"form-input",type:"time",value:p.serviceAppointmentTime||"10:00",onChange:o=>D(h=>({...h,serviceAppointmentTime:o.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Sabit Servis creti () *"}),e.jsx(yt,{placeholder:"rn: 500",value:p.serviceFixedFee||"",onChange:o=>D(h=>({...h,serviceFixedFee:o}))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Mteri Talebi / Adres / Not"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Mterinin ikayeti, servis adresi, zel notlar...",rows:3,value:p.serviceNote||"",onChange:o=>D(h=>({...h,serviceNote:o.target.value}))})]}),(!p.serviceAppointmentDate||!p.serviceFixedFee)&&e.jsx("div",{style:{padding:12,background:"var(--color-warning-bg)",borderRadius:8,fontSize:13},children:" Randevu tarihi ve servis creti zorunludur."}),e.jsx("button",{className:"btn btn-success",type:"button",style:{padding:"14px 24px",fontSize:16},disabled:i||!p.serviceAppointmentDate||!p.serviceFixedFee,onClick:()=>et(()=>St(t.id,{status:"SERVIS_RANDEVULU",service:{...t.service,fixedFee:Number(p.serviceFixedFee||0),note:p.serviceNote,visits:[{id:1,appointmentDate:p.serviceAppointmentDate,appointmentTime:p.serviceAppointmentTime||"10:00",status:"scheduled"}]}}),{transition:"SERVIS_RANDEVULU"}),children:" Randevuyu Kaydet ve Onayla"})]})]}),kr&&qt("service_start")&&e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:" Servise Bala"}),e.jsx("span",{className:"badge badge-primary",children:"Randevu Alnd"})]}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600},children:t.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"RANDEVU"}),e.jsx("div",{style:{fontWeight:600},children:(()=>{var h,I;const o=(I=(h=t.service)==null?void 0:h.visits)==null?void 0:I.find(L=>L.status==="scheduled");return o?`${new Date(o.appointmentDate).toLocaleDateString("tr-TR")} ${o.appointmentTime}`:"-"})()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"SABT CRET"}),e.jsxs("div",{style:{fontWeight:600,color:"var(--color-primary)"},children:[pe(((Eu=t.service)==null?void 0:Eu.fixedFee)||0)," "]})]})]}),((Iu=t.service)==null?void 0:Iu.note)&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"var(--color-warning-bg)",borderRadius:6},children:[e.jsx("strong",{children:"Not:"})," ",t.service.note]})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-secondary)",borderRadius:12},children:[e.jsx("h4",{style:{marginBottom:12},children:" Gidi Bilgilerini Girin"}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Gidi Tarihi *"}),e.jsx("input",{className:"form-input",type:"date",value:p.serviceVisitDate||new Date().toISOString().split("T")[0],onChange:o=>D(h=>({...h,serviceVisitDate:o.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Gidi Saati *"}),e.jsx("input",{className:"form-input",type:"time",value:p.serviceVisitTime||new Date().toTimeString().slice(0,5),onChange:o=>D(h=>({...h,serviceVisitTime:o.target.value}))})]})]})]}),e.jsx("button",{className:"btn btn-success",type:"button",style:{padding:"14px 24px",fontSize:16},disabled:i,onClick:()=>{var I;const o=[...((I=t.service)==null?void 0:I.visits)||[]],h=o.findIndex(L=>L.status==="scheduled");h>=0&&(o[h]={...o[h],visitedAt:`${p.serviceVisitDate||new Date().toISOString().split("T")[0]}T${p.serviceVisitTime||new Date().toTimeString().slice(0,5)}`,status:"in_progress"}),et(()=>St(t.id,{status:"SERVIS_YAPILIYOR",service:{...t.service,visits:o}}),{transition:"SERVIS_YAPILIYOR"})},children:" Servise Bala"})]})]}),kr&&qt("service_work")&&e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:" Servis almas"}),e.jsx("span",{className:`badge badge-${t.status==="SERVIS_DEVAM_EDIYOR"?"warning":"primary"}`,children:t.status==="SERVIS_DEVAM_EDIYOR"?"Devam Ziyareti":`Ziyaret #${((Ru=(Au=t.service)==null?void 0:Au.visits)==null?void 0:Ru.length)||1}`})]}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[((Bu=(Lu=t.service)==null?void 0:Lu.visits)==null?void 0:Bu.filter(o=>o.status==="completed").length)>0&&e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" nceki Ziyaretler"})}),e.jsx("div",{className:"card-body",style:{padding:0},children:t.service.visits.filter(o=>o.status==="completed").map((o,h)=>e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--color-border)",background:h%2===0?"transparent":"var(--color-bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:["#",o.id]})," - ",new Date(o.appointmentDate).toLocaleDateString("tr-TR")," ",o.appointmentTime]}),e.jsx("span",{className:"badge badge-success",children:" Tamamland"})]}),o.visitedAt&&e.jsxs("div",{className:"text-muted",style:{fontSize:12,marginTop:4},children:["Gidi: ",new Date(o.visitedAt).toLocaleString("tr-TR")]}),o.workNote&&e.jsxs("div",{style:{marginTop:8,fontSize:13},children:[e.jsx("strong",{children:"lem:"})," ",o.workNote]}),o.materials&&e.jsxs("div",{style:{marginTop:4,fontSize:13},children:[e.jsx("strong",{children:"Malzeme:"})," ",o.materials]}),o.extraCost>0&&e.jsxs("div",{style:{marginTop:4,fontSize:13,color:"var(--color-primary)"},children:[e.jsx("strong",{children:"Ekstra:"})," ",pe(o.extraCost)," "]})]},o.id))})]}),t.status==="SERVIS_DEVAM_EDIYOR"&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-warning)",background:"var(--color-warning-bg)"},children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Yeni Randevu Belirle"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Randevu Tarihi *"}),e.jsx("input",{className:"form-input",type:"date",value:p.serviceNewAppointmentDate||"",onChange:o=>D(h=>({...h,serviceNewAppointmentDate:o.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Saat *"}),e.jsx("input",{className:"form-input",type:"time",value:p.serviceNewAppointmentTime||"10:00",onChange:o=>D(h=>({...h,serviceNewAppointmentTime:o.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Gidi Tarihi"}),e.jsx("input",{className:"form-input",type:"date",value:p.serviceVisitDate||"",onChange:o=>D(h=>({...h,serviceVisitDate:o.target.value}))})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:12},children:[e.jsx("label",{className:"form-label",children:"Not"}),e.jsx("input",{className:"form-input",placeholder:"Eksik para, ilave ilem vb...",value:p.serviceNewAppointmentNote||"",onChange:o=>D(h=>({...h,serviceNewAppointmentNote:o.target.value}))})]}),e.jsx("button",{className:"btn btn-primary",type:"button",style:{marginTop:12},disabled:i||!p.serviceNewAppointmentDate,onClick:()=>{var I;const o=[...((I=t.service)==null?void 0:I.visits)||[]],h={id:o.length+1,appointmentDate:p.serviceNewAppointmentDate,appointmentTime:p.serviceNewAppointmentTime||"10:00",note:p.serviceNewAppointmentNote,visitedAt:p.serviceVisitDate?`${p.serviceVisitDate}T${p.serviceVisitTime||"10:00"}`:null,status:p.serviceVisitDate?"in_progress":"scheduled"};o.push(h),et(()=>St(t.id,{status:p.serviceVisitDate?"SERVIS_YAPILIYOR":"SERVIS_RANDEVULU",service:{...t.service,visits:o}}),{transition:p.serviceVisitDate?"SERVIS_YAPILIYOR":"SERVIS_RANDEVULU"})},children:p.serviceVisitDate?" Randevuyu Kaydet ve Servise Git":" Randevuyu Kaydet"})]})]}),t.status==="SERVIS_YAPILIYOR"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"MTER"}),e.jsx("div",{style:{fontWeight:600},children:t.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"SABT CRET"}),e.jsxs("div",{style:{fontWeight:600,color:"var(--color-primary)"},children:[pe(((Pu=t.service)==null?void 0:Pu.fixedFee)||0)," "]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",style:{fontSize:12},children:"TOPLAM ZYARET"}),e.jsx("div",{style:{fontWeight:600},children:((_u=(Ou=t.service)==null?void 0:Ou.visits)==null?void 0:_u.length)||1})]})]}),((Mu=t.service)==null?void 0:Mu.note)&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"var(--color-warning-bg)",borderRadius:6},children:[e.jsx("strong",{children:"Mteri Talebi:"})," ",t.service.note]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Yaplan lem Detay *"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Servis srasnda yaplan ilemleri detayl yazn...",rows:3,value:p.serviceWorkNote||"",onChange:o=>D(h=>({...h,serviceWorkNote:o.target.value}))})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Kullanlan Malzemeler"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Malzeme listesi...",rows:2,value:p.serviceMaterials||"",onChange:o=>D(h=>({...h,serviceMaterials:o.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Bu Ziyaret Ekstra Malzeme Tutar ()"}),e.jsx(yt,{placeholder:"0",value:p.serviceExtraCost||"",onChange:o=>D(h=>({...h,serviceExtraCost:o}))}),e.jsx("div",{className:"text-muted",style:{fontSize:11,marginTop:4},children:"Sabit crete ek malzeme tutar"})]})]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{padding:"12px 16px"},children:[e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" Fotoraflar (stee Bal)"}),ae&&e.jsx(Dt,{size:"small"})]}),e.jsx("div",{className:"card-body",style:{padding:16},children:e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ncesi"}),e.jsxs("div",{className:"file-upload-zone",children:[e.jsx("input",{type:"file",id:"service-before-photo",accept:".jpg,.jpeg,.png,.gif,.webp",style:{display:"none"},onChange:async o=>{var I;const h=(I=o.target.files)==null?void 0:I[0];h&&(await un(h,"servis_oncesi","Servis ncesi"),o.target.value="")}}),e.jsx("label",{htmlFor:"service-before-photo",className:"btn btn-secondary btn-small",style:{cursor:"pointer"},children:" Se"}),ce.some(o=>o.type==="servis_oncesi")&&e.jsx("span",{className:"badge badge-success",style:{marginLeft:8},children:""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sonras"}),e.jsxs("div",{className:"file-upload-zone",children:[e.jsx("input",{type:"file",id:"service-after-photo",accept:".jpg,.jpeg,.png,.gif,.webp",style:{display:"none"},onChange:async o=>{var I;const h=(I=o.target.files)==null?void 0:I[0];h&&(await un(h,"servis_sonrasi","Servis Sonras"),o.target.value="")}}),e.jsx("label",{htmlFor:"service-after-photo",className:"btn btn-secondary btn-small",style:{cursor:"pointer"},children:" Se"}),ce.some(o=>o.type==="servis_sonrasi")&&e.jsx("span",{className:"badge badge-success",style:{marginLeft:8},children:""})]})]})]})})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[e.jsx("button",{className:"btn btn-warning",type:"button",style:{flex:1},disabled:i||!p.serviceWorkNote,onClick:()=>{var I;const o=[...((I=t.service)==null?void 0:I.visits)||[]],h=o.findIndex(L=>L.status==="in_progress");h>=0&&(o[h]={...o[h],workNote:p.serviceWorkNote,materials:p.serviceMaterials,extraCost:Number(p.serviceExtraCost||0),status:"completed",completedAt:new Date().toISOString()}),et(()=>St(t.id,{status:"SERVIS_DEVAM_EDIYOR",service:{...t.service,visits:o}}),{transition:"SERVIS_DEVAM_EDIYOR"})},children:" Servis Devam Ediyor (Yeni Randevu)"}),e.jsx("button",{className:"btn btn-success",type:"button",style:{flex:1},disabled:i||!p.serviceWorkNote,onClick:()=>{var L;const o=[...((L=t.service)==null?void 0:L.visits)||[]],h=o.findIndex(U=>U.status==="in_progress");h>=0&&(o[h]={...o[h],workNote:p.serviceWorkNote,materials:p.serviceMaterials,extraCost:Number(p.serviceExtraCost||0),status:"completed",completedAt:new Date().toISOString()});const I=o.reduce((U,M)=>U+(M.extraCost||0),0);et(()=>{var U;return St(t.id,{status:"SERVIS_ODEME_BEKLIYOR",service:{...t.service,visits:o,totalExtraCost:I,totalCost:(((U=t.service)==null?void 0:U.fixedFee)||0)+I}})},{transition:"SERVIS_ODEME_BEKLIYOR"})},children:" demeye Ge"})]}),!p.serviceWorkNote&&e.jsx("div",{className:"text-muted",style:{fontSize:12},children:' Devam etmek iin "Yaplan lem Detay" alann doldurun.'})]})]})]}),kr&&qt("service_payment")&&(()=>{var Ce,be,at,qe,tt;const o=((Ce=t.service)==null?void 0:Ce.fixedFee)||0,h=((be=t.service)==null?void 0:be.totalExtraCost)||0,I=((at=t.service)==null?void 0:at.totalCost)||o+h,L=Number(p.servicePaymentCash||0),U=Number(p.servicePaymentCard||0),M=Number(p.servicePaymentTransfer||0),ne=Number(p.serviceDiscount||0),de=L+U+M+ne,xe=I-de;return e.jsxs("div",{className:"card",children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:" Servis deme"})}),e.jsxs("div",{className:"card-body grid grid-1",style:{gap:16},children:[((tt=(qe=t.service)==null?void 0:qe.visits)==null?void 0:tt.length)>0&&e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsxs("h4",{className:"card-title",style:{fontSize:14},children:[" Ziyaret zeti (",t.service.visits.length," ziyaret)"]})}),e.jsx("div",{className:"card-body",style:{padding:0},children:t.service.visits.filter(me=>me.status==="completed").map(me=>e.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--color-border)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:["#",me.id]})," - ",new Date(me.appointmentDate).toLocaleDateString("tr-TR"),e.jsx("div",{className:"text-muted",style:{fontSize:12},children:me.workNote})]}),me.extraCost>0&&e.jsxs("div",{style:{color:"var(--color-primary)",fontWeight:600},children:["+",pe(me.extraCost)," "]})]})},me.id))})]}),e.jsx("div",{className:"card",style:{background:"var(--color-bg-secondary)",border:"2px solid var(--color-border)"},children:e.jsx("div",{style:{padding:20},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Sabit Servis creti"}),e.jsxs("span",{style:{fontWeight:600},children:[pe(o)," "]})]}),h>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Ekstra Malzeme Toplam"}),e.jsxs("span",{style:{fontWeight:600},children:[pe(h)," "]})]}),e.jsx("div",{style:{borderTop:"2px solid var(--color-border)",paddingTop:8,marginTop:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:18,fontWeight:700},children:"TOPLAM"}),e.jsxs("span",{style:{fontSize:24,fontWeight:700,color:"var(--color-primary)"},children:[pe(I)," "]})]})})]})})}),e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" deme Bilgileri"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{className:"grid grid-3",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Nakit"}),e.jsx(yt,{placeholder:"0",value:p.servicePaymentCash||"",onChange:me=>D(ve=>({...ve,servicePaymentCash:me}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Kredi Kart"}),e.jsx(yt,{placeholder:"0",value:p.servicePaymentCard||"",onChange:me=>D(ve=>({...ve,servicePaymentCard:me}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Havale/EFT"}),e.jsx(yt,{placeholder:"0",value:p.servicePaymentTransfer||"",onChange:me=>D(ve=>({...ve,servicePaymentTransfer:me}))})]})]}),e.jsx("div",{style:{marginTop:16,padding:12,background:"var(--color-bg-secondary)",borderRadius:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Alnan Toplam:"}),e.jsxs("span",{style:{fontWeight:600,fontSize:18},children:[pe(L+U+M)," "]})]})})]})]}),e.jsxs("div",{className:"card subtle-card",children:[e.jsx("div",{className:"card-header",style:{padding:"12px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:14},children:" skonto (stee Bal)"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[xe>0&&ne===0&&e.jsxs("div",{style:{marginBottom:12,padding:10,background:"var(--color-warning-bg)",borderRadius:6,color:"var(--color-warning-dark)"},children:[" Toplam tutara ",pe(xe),"  eksik. skonto yaplacaksa aaya girin."]}),e.jsxs("div",{className:"grid grid-2",style:{gap:12},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["skonto Tutar ",xe>0&&ne===0?"*":""]}),e.jsx(yt,{placeholder:"0",value:p.serviceDiscount||"",onChange:me=>D(ve=>({...ve,serviceDiscount:me}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["skonto Aklamas ",ne>0?"*":""]}),e.jsx("input",{className:"form-input",placeholder:"rn: Sadk mteri indirimi",value:p.serviceDiscountNote||"",onChange:me=>D(ve=>({...ve,serviceDiscountNote:me.target.value}))})]})]}),ne>0&&!p.serviceDiscountNote&&e.jsx("div",{className:"text-muted",style:{fontSize:12,marginTop:8,color:"var(--color-danger)"},children:" skonto tutar girildiyse aklama zorunludur."})]})]}),e.jsx("div",{style:{padding:16,borderRadius:12,background:xe===0?"var(--color-success-bg)":xe>0?"var(--color-warning-bg)":"var(--color-danger-bg)",border:`2px solid ${xe===0?"var(--color-success)":xe>0?"var(--color-warning)":"var(--color-danger)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:600},children:"Bakiye:"}),e.jsx("span",{style:{fontWeight:700,fontSize:20,color:xe===0?"var(--color-success)":xe>0?"var(--color-warning-dark)":"var(--color-danger)"},children:xe===0?" 0  (Tamam)":`${pe(xe)} `})]})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[e.jsx("button",{className:"btn btn-warning",type:"button",style:{flex:1},disabled:i,onClick:()=>et(()=>St(t.id,{status:"SERVIS_DEVAM_EDIYOR",service:{...t.service,payments:{cash:L,card:U,transfer:M},discount:ne>0?{amount:ne,note:p.serviceDiscountNote}:null}}),{transition:"SERVIS_DEVAM_EDIYOR"}),children:" Servis Devam Ediyor"}),e.jsx("button",{className:"btn btn-success",type:"button",style:{flex:1},disabled:i||xe!==0||ne>0&&!p.serviceDiscountNote,onClick:()=>et(()=>St(t.id,{status:"SERVIS_KAPALI",service:{...t.service,payments:{cash:L,card:U,transfer:M},discount:ne>0?{amount:ne,note:p.serviceDiscountNote}:null,paymentStatus:"paid",completedAt:new Date().toISOString()}}),{transition:"SERVIS_KAPALI"}),children:" Servisi Kapat"})]}),xe!==0&&e.jsxs("div",{className:"text-muted",style:{fontSize:12,color:"var(--color-danger)"},children:[" Servisi kapatmak iin bakiye 0 olmal. Eksik: ",pe(xe)," "]})]})]})})(),kr&&qt("service_done")&&(()=>{var L,U,M,ne,de,xe,Ce,be,at,qe,tt,me,ve,He,wt,os;const o=((L=t.service)==null?void 0:L.payments)||{},h=(o.cash||0)+(o.card||0)+(o.transfer||0),I=((M=(U=t.service)==null?void 0:U.discount)==null?void 0:M.amount)||0;return e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-success)"},children:[Qe&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderBottom:"1px solid var(--color-border)",padding:"12px 16px",display:"flex",alignItems:"center",gap:10,color:"#475569"},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:13},children:"Ariv Grnm"}),e.jsx("div",{style:{fontSize:11,opacity:.8},children:"Bu aama tamamland. Sadece grntleme modundasnz."})]})]}),e.jsxs("div",{className:"card-header",style:{background:"var(--color-success)",color:"white"},children:[e.jsx("h3",{className:"card-title",style:{color:"white"},children:" Servis Tamamland"}),e.jsx("span",{className:"badge",style:{background:"white",color:"var(--color-success)"},children:((ne=t.service)==null?void 0:ne.paymentStatus)==="paid"?"dendi":"deme Bekliyor"})]}),e.jsxs("div",{className:"card-body",style:{padding:20},children:[e.jsxs("div",{className:"grid grid-4",style:{gap:12,marginBottom:20},children:[e.jsxs("div",{style:{padding:16,background:"var(--color-success-bg)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)",marginBottom:4},children:"TOPLAM"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-success)"},children:[pe(((de=t.service)==null?void 0:de.totalCost)||0)," "]})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-secondary)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)",marginBottom:4},children:"ZYARET"}),e.jsx("div",{style:{fontSize:20,fontWeight:600},children:((Ce=(xe=t.service)==null?void 0:xe.visits)==null?void 0:Ce.length)||1})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-secondary)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)",marginBottom:4},children:"ALINAN"}),e.jsxs("div",{style:{fontSize:20,fontWeight:600},children:[pe(h)," "]})]}),e.jsxs("div",{style:{padding:16,background:"var(--color-bg-secondary)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)",marginBottom:4},children:"TARH"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:(be=t.service)!=null&&be.completedAt?new Date(t.service.completedAt).toLocaleDateString("tr-TR"):"-"})]})]}),e.jsxs("div",{className:"card subtle-card",style:{marginBottom:16},children:[e.jsx("div",{className:"card-header",style:{padding:"10px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:13},children:" Mteri Bilgisi"})}),e.jsxs("div",{className:"card-body",style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:t.customerName}),e.jsx("div",{className:"text-muted",children:t.title})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{className:"text-muted",style:{fontSize:11},children:" Kodu"}),e.jsx("div",{style:{fontWeight:600},children:t.id})]})]}),((at=t.service)==null?void 0:at.note)&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"var(--color-bg-secondary)",borderRadius:6,fontSize:13},children:[e.jsx("strong",{children:"Mteri Talebi:"})," ",t.service.note]})]})]}),((tt=(qe=t.service)==null?void 0:qe.visits)==null?void 0:tt.length)>0&&e.jsxs("div",{className:"card subtle-card",style:{marginBottom:16},children:[e.jsx("div",{className:"card-header",style:{padding:"10px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:13},children:" Ziyaret Gemii"})}),e.jsx("div",{className:"card-body",style:{padding:0},children:t.service.visits.map((Me,gs)=>e.jsxs("div",{style:{padding:"12px 16px",borderBottom:gs<t.service.visits.length-1?"1px solid var(--color-border)":"none",background:gs%2===0?"transparent":"var(--color-bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsxs("strong",{children:["#",Me.id]}),e.jsx("span",{className:"badge badge-success",style:{fontSize:10},children:""})]}),e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[" Randevu: ",new Date(Me.appointmentDate).toLocaleDateString("tr-TR")," ",Me.appointmentTime]}),Me.visitedAt&&e.jsxs("div",{style:{fontSize:12,color:"var(--color-text-light)"},children:[" Gidi: ",new Date(Me.visitedAt).toLocaleString("tr-TR")]})]}),Me.extraCost>0&&e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--color-text-light)"},children:"Ekstra"}),e.jsxs("div",{style:{fontWeight:600,color:"var(--color-primary)"},children:["+",pe(Me.extraCost)," "]})]})]}),Me.workNote&&e.jsxs("div",{style:{marginTop:8,fontSize:13,padding:8,background:"var(--color-bg-secondary)",borderRadius:4},children:[" ",Me.workNote]}),Me.materials&&e.jsxs("div",{style:{marginTop:4,fontSize:12,color:"var(--color-text-light)"},children:[" ",Me.materials]})]},Me.id))})]}),e.jsxs("div",{className:"card subtle-card",style:{marginBottom:16},children:[e.jsx("div",{className:"card-header",style:{padding:"10px 16px"},children:e.jsx("h4",{className:"card-title",style:{fontSize:13},children:" deme Detaylar"})}),e.jsx("div",{className:"card-body",style:{padding:16},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Sabit Servis creti"}),e.jsxs("span",{children:[pe(((me=t.service)==null?void 0:me.fixedFee)||0)," "]})]}),(((ve=t.service)==null?void 0:ve.totalExtraCost)||0)>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Ekstra Malzeme"}),e.jsxs("span",{children:[pe(t.service.totalExtraCost)," "]})]}),e.jsxs("div",{style:{borderTop:"1px solid var(--color-border)",paddingTop:8,display:"flex",justifyContent:"space-between",fontWeight:600},children:[e.jsx("span",{children:"Toplam"}),e.jsxs("span",{children:[pe(((He=t.service)==null?void 0:He.totalCost)||0)," "]})]}),e.jsxs("div",{style:{borderTop:"1px dashed var(--color-border)",paddingTop:8,marginTop:8},children:[o.cash>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13},children:[e.jsx("span",{children:" Nakit"}),e.jsxs("span",{children:[pe(o.cash)," "]})]}),o.card>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13},children:[e.jsx("span",{children:" Kart"}),e.jsxs("span",{children:[pe(o.card)," "]})]}),o.transfer>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13},children:[e.jsx("span",{children:" Havale"}),e.jsxs("span",{children:[pe(o.transfer)," "]})]}),I>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"var(--color-warning-dark)"},children:[e.jsxs("span",{children:[" skonto (",((os=(wt=t.service)==null?void 0:wt.discount)==null?void 0:os.note)||"",")"]}),e.jsxs("span",{children:["-",pe(I)," "]})]})]})]})})]}),ce.filter(Me=>Me.type==="servis_oncesi"||Me.type==="servis_sonrasi").length>0&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:8},children:" Fotoraflar"}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:ce.filter(Me=>Me.type==="servis_oncesi"||Me.type==="servis_sonrasi").map(Me=>e.jsxs("a",{href:rs(Me.id),target:"_blank",rel:"noopener noreferrer",style:{padding:"8px 16px",background:"var(--color-primary-bg)",borderRadius:8,fontSize:12,textDecoration:"none",color:"var(--color-primary)"},children:[" ",Me.type==="servis_oncesi"?"ncesi":"Sonras"]},Me.id))})]})]})]})})(),(Ma==="KAPALI"||Ma==="SERVIS_KAPALI")&&e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Durum"}),e.jsx("span",{className:"metric-value",children:Ma==="SERVIS_KAPALI"?"SERVS TAMAMLANDI":"KAPALI"})]}),e.jsxs("div",{className:"metric-row",children:[e.jsx("span",{className:"metric-label",children:"Not"}),e.jsx("span",{className:"metric-value",children:"Kilitli - deiiklik iin yetkili gerekir"})]})]}),De.length>0?e.jsxs("div",{className:"card subtle-card",children:[e.jsxs("div",{className:"card-header",style:{justifyContent:"space-between"},children:[e.jsx("h3",{className:"card-title",children:" Gnl"}),e.jsx("button",{className:"btn btn-secondary btn-small",type:"button",onClick:()=>X(o=>!o),children:T?"Gizle":"Gster"})]}),T?e.jsx("div",{className:"timeline",children:De.map(o=>e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-point"}),e.jsxs("div",{children:[e.jsxs("div",{className:"timeline-title",children:[new Date(o.createdAt).toLocaleString("tr-TR"),"  ",o.action]}),e.jsx("div",{className:"timeline-subtitle",children:o.detail})]})]},o.id))}):null,te?e.jsx("div",{className:"error-text",children:te}):null]}):null,i&&e.jsx("div",{className:"loader-overlay",children:e.jsx(Dt,{text:"lem yaplyor..."})})]})},d0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await Qf();s(c)}catch(c){a(c.message||"Montaj/sevkiyat verisi alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Montaj / Sevkiyat",subtitle:"lere ayrlm rnlerin sevkiyat plan"}),r?e.jsx("div",{className:"card subtle-card",children:"Sevkiyat plan ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Sevkiyat verisi alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:" Kodu",accessor:"job"},{label:"Kalem",accessor:"item"},{label:"Miktar",accessor:"qty"},{label:"Termin",accessor:"dueDate"},{label:"Durum",accessor:"status"}],rows:t})]})},u0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await Yf();s(c)}catch(c){a(c.message||"Takvim verisi alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Keif / l Takvimi",subtitle:"lere ait keif, montaj ve teslim planlar"}),r?e.jsx("div",{className:"card subtle-card",children:"Takvim ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Takvim alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"Balk",accessor:"title"},{label:"Tarih",accessor:"date"},{label:"Tr",accessor:"type"},{label:"Sorumlu",accessor:"owner"},{label:"Lokasyon",accessor:"location"}],rows:t})]})},m0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await Sr();s(c)}catch(c){a(c.message||"retim plan alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"retim Plan",subtitle:"Termin ve duruma gre retim ileri"}),r?e.jsx("div",{className:"card subtle-card",children:"retim plan ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"retim plan alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"",accessor:"name"},{label:"Mteri",accessor:"customer"},{label:"Durum",accessor:"status"},{label:"Termin",accessor:"dueDate"},{label:"Sorumlu",accessor:"owner"}],rows:t})]})},p0=()=>e.jsxs("div",{children:[e.jsx(Fe,{title:"Sayfa bulunamad",subtitle:"Aradnz sayfa kaldrlm olabilir"}),e.jsx("div",{className:"card subtle-card",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("div",{className:"empty-state-title",children:"404"}),e.jsx("div",{className:"empty-state-description",children:"Yanl bir balantya tkladysanz menden doru modl seebilirsiniz."}),e.jsx(ps,{className:"btn btn-primary",to:"/dashboard",children:"Kontrol Paneline Dn"})]})})]}),h0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await Yf();s(c)}catch(c){a(c.message||"Planlama verisi alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Planlama / Takvim",subtitle:"Keif, montaj ve teslim planlarnz takip edin"}),r?e.jsx("div",{className:"card subtle-card",children:"Planlama ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Planlama alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"Balk",accessor:"title"},{label:"Tarih",accessor:"date"},{label:"Tr",accessor:"type"},{label:"Sorumlu",accessor:"owner"},{label:"Lokasyon",accessor:"location"}],rows:t})]})},f0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await bj();s(c)}catch(c){a(c.message||"Raporlar alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Raporlar",subtitle:"Hazr ve devam eden raporlar"}),r?e.jsx("div",{className:"card subtle-card",children:"Raporlar ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Raporlar alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"Rapor",accessor:"title"},{label:"Periyot",accessor:"period"},{label:"Durum",accessor:"status"},{label:"Sahip",accessor:"owner"}],rows:t})]})},y0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState("");d.useEffect(()=>{(async()=>{try{a(!0),c("");const[v,S]=await Promise.all([vj(),jj()]);s(v),n(S)}catch(v){c(v.message||"Satnalma verisi alnamad")}finally{a(!1)}})()},[]);const u=d.useMemo(()=>{const f=t.filter(k=>k.status.toLowerCase().includes("onay")).length,v=t.filter(k=>k.status.toLowerCase().includes("yolda")).length,S=r.length;return[{id:"po1",label:"Toplam PO",value:t.length,icon:"",tone:"primary"},{id:"po2",label:"Onay Bekleyen",value:f,icon:"",tone:"warning"},{id:"po3",label:"Yolda",value:v,icon:"",tone:"secondary"},{id:"po4",label:"Tedariki",value:S,icon:"",tone:"success"}]},[t,r]);return e.jsxs("div",{children:[e.jsx(Fe,{title:"Satnalma",subtitle:"PO, tedariki ve talepler iin zet"}),l?e.jsx("div",{className:"card subtle-card",children:"Satnalma verisi ykleniyor..."}):i?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Veri alnamad"}),e.jsx("div",{className:"error-message",children:i})]}):e.jsx("div",{className:"stats-grid",children:u.map(f=>e.jsx(zc,{icon:f.icon,label:f.label,value:f.value,tone:f.tone},f.id))})]})},Er=t=>new Intl.NumberFormat("tr-TR").format(t||0),As=t=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:0}).format(t||0),Sn={draft:{label:"Taslak",tone:"secondary",icon:""},sent:{label:"Gnderildi",tone:"primary",icon:""},partial:{label:"Ksmi Teslim",tone:"warning",icon:""},delivered:{label:"Tamamland",tone:"success",icon:""}},pp={supplierId:"",supplierName:"",notes:"",expectedDate:"",items:[]},ji={productCode:"",colorCode:"",productName:"",quantity:1,unit:"boy",unitCost:0},x0={items:[],note:"",receivedBy:""},g0=()=>{var je,De,B,te,Be;const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState([]),[i,c]=d.useState(!0),[u,f]=d.useState(""),[v,S]=d.useState(""),[k,R]=d.useState("all"),[w,A]=d.useState("all"),[C,y]=d.useState(!1),[m,j]=d.useState(pp),[z,P]=d.useState(ji),[W,G]=d.useState(!1),[Q,F]=d.useState(!1),[b,Z]=d.useState(null),[Se,fe]=d.useState(!1),[H,$]=d.useState(!1),[E,ie]=d.useState(x0),[J,ee]=d.useState(""),[re,N]=d.useState([]),[x,_]=d.useState(!1),[q,O]=d.useState([]),[Y,ye]=d.useState(null);d.useEffect(()=>{Pe()},[]);const Pe=async()=>{try{c(!0),f("");const[T,X,oe]=await Promise.all([Cc(),sr(),wc().catch(()=>[])]);s(T),n(X),a(oe)}catch(T){f(T.message||"Veriler alnamad")}finally{c(!1)}};d.useEffect(()=>{if(!J||J.length<2){N([]);return}const T=setTimeout(async()=>{try{const X=await ey(J,"");N(X.slice(0,10))}catch(X){console.error("Product search error:",X)}},300);return()=>clearTimeout(T)},[J]);const Te=d.useMemo(()=>{let T=[...t];if(v){const X=v.toLowerCase();T=T.filter(oe=>oe.id.toLowerCase().includes(X)||(oe.supplierName||"").toLowerCase().includes(X))}return k!=="all"&&(T=T.filter(X=>X.status===k)),w!=="all"&&(T=T.filter(X=>X.supplierId===w)),T.sort((X,oe)=>new Date(oe.createdAt)-new Date(X.createdAt))},[t,v,k,w]),$e=d.useMemo(()=>{const T=t.length,X=t.filter(p=>p.status==="draft").length,oe=t.filter(p=>["sent","partial"].includes(p.status)).length,Ke=t.reduce((p,D)=>p+(D.totalAmount||0),0);return{total:T,draft:X,pending:oe,totalAmount:Ke}},[t]),Ve=()=>{j(pp),P(ji),ee(""),N([]),y(!0)},Ue=()=>{O([]),_(!0)},_e=T=>{P({productCode:T.productCode,colorCode:T.colorCode,productName:`${T.name} ${T.colorName||""}`.trim(),quantity:1,unit:T.unit||"boy",unitCost:T.unitCost||0}),ee(""),N([])},Ze=()=>{!z.productCode||z.quantity<=0||(j(T=>T.items.find(oe=>oe.productCode===z.productCode&&oe.colorCode===z.colorCode)?{...T,items:T.items.map(oe=>oe.productCode===z.productCode&&oe.colorCode===z.colorCode?{...oe,quantity:oe.quantity+z.quantity}:oe)}:{...T,items:[...T.items,{...z}]}),P(ji))},V=(T,X)=>{j(oe=>({...oe,items:oe.items.filter(Ke=>!(Ke.productCode===T&&Ke.colorCode===X))}))},le=async T=>{if(T.preventDefault(),!(!m.supplierId||m.items.length===0))try{G(!0);const X=r.find(p=>p.id===m.supplierId),oe={supplierId:m.supplierId,supplierName:(X==null?void 0:X.name)||m.supplierName,items:m.items,notes:m.notes,expectedDate:m.expectedDate,relatedJobs:[]},Ke=await go(oe);s(p=>[Ke,...p]),y(!1)}catch(X){f(X.message||"Sipari oluturulamad")}finally{G(!1)}},Oe=async()=>{if(q.length===0)return;const T={};q.forEach(X=>{const oe=X.supplierId;T[oe]||(T[oe]={supplierId:X.supplierId,supplierName:X.supplierName,items:[]}),T[oe].items.push({productCode:X.productCode,colorCode:X.colorCode,productName:`${X.name} ${X.colorName||""}`.trim(),quantity:X.suggestedQty,unit:X.unit,unitCost:0})});try{G(!0);const X=[];for(const oe of Object.values(T)){const Ke=await go({supplierId:oe.supplierId,supplierName:oe.supplierName,items:oe.items,notes:"Kritik stok siparii",expectedDate:"",relatedJobs:[]});X.push(Ke)}s(oe=>[...X,...oe]),_(!1),await Pe()}catch(X){f(X.message||"Sipari oluturulamad")}finally{G(!1)}},ze=async T=>{Z(T),F(!0)},we=async T=>{try{G(!0);const X=await wj(T);s(oe=>oe.map(Ke=>Ke.id===T?X:Ke)),(b==null?void 0:b.id)===T&&Z(X)}catch(X){f(X.message||"Sipari gnderilemedi")}finally{G(!1)}},Le=()=>{b&&(ie({items:b.items.map(T=>({productCode:T.productCode,colorCode:T.colorCode,productName:T.productName,ordered:T.quantity,received:T.receivedQty||0,remaining:T.quantity-(T.receivedQty||0),quantity:0})),note:"",receivedBy:""}),$(!0))},Ee=async T=>{if(T.preventDefault(),!b)return;const X=E.items.filter(oe=>oe.quantity>0).map(oe=>({productCode:oe.productCode,colorCode:oe.colorCode,quantity:oe.quantity}));if(X.length!==0)try{G(!0);const oe=await Tj(b.id,{items:X,note:E.note,receivedBy:E.receivedBy});s(Ke=>Ke.map(p=>p.id===b.id?oe:p)),Z(oe),$(!1),await Pe()}catch(oe){f(oe.message||"Teslimat kaydedilemedi")}finally{G(!1)}},g=async()=>{if(Y)try{G(!0),await zj(Y.id),s(T=>T.filter(X=>X.id!==Y.id)),ye(null)}catch(T){f(T.message||"Silinemedi")}finally{G(!1)}},K=()=>{const T=["Sipari No","Tedariki","Durum","Toplam Tutar","Beklenen Tarih","Oluturulma"],X=Te.map(ae=>{var Ne,ce;return[ae.id,ae.supplierName,((Ne=Sn[ae.status])==null?void 0:Ne.label)||ae.status,ae.totalAmount||0,ae.expectedDate||"-",((ce=ae.createdAt)==null?void 0:ce.slice(0,10))||"-"]}),oe=[T.join(","),...X.map(ae=>ae.map(Ne=>`"${Ne}"`).join(","))].join(`
`),Ke=new Blob([oe],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(Ke),D=document.createElement("a");D.href=p,D.download=`siparisler-${new Date().toISOString().slice(0,10)}.csv`,D.click(),URL.revokeObjectURL(p)},ue=T=>{var ae,Ne;const X=["SPAR FORMU","=====================================",`Sipari No: ${T.id}`,`Tedariki: ${T.supplierName}`,`Tarih: ${(ae=T.createdAt)==null?void 0:ae.slice(0,10)}`,`Beklenen Teslimat: ${T.expectedDate||"-"}`,"","KALEMLER:","-------------------------------------"];(Ne=T.items)==null||Ne.forEach((ce,Ge)=>{X.push(`${Ge+1}. ${ce.productCode}-${ce.colorCode} ${ce.productName}`),X.push(`   Miktar: ${ce.quantity} ${ce.unit} x ${As(ce.unitCost||0)} = ${As(ce.totalCost||0)}`)}),X.push("-------------------------------------"),X.push(`TOPLAM: ${As(T.totalAmount||0)}`),X.push(""),X.push(`Not: ${T.notes||"-"}`);const oe=X.join(`
`),Ke=new Blob([oe],{type:"text/plain;charset=utf-8;"}),p=URL.createObjectURL(Ke),D=document.createElement("a");D.href=p,D.download=`siparis-${T.id}.txt`,D.click(),URL.revokeObjectURL(p)};return e.jsxs("div",{children:[e.jsx(Fe,{title:"Satnalma Siparileri",subtitle:"Sipari oluturma, takip ve teslimat ynetimi",actions:e.jsxs(e.Fragment,{children:[l.length>0&&e.jsxs("button",{className:"btn btn-warning",type:"button",onClick:Ue,children:[" Eksik rnler (",l.length,")"]}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:K,children:" CSV"}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:Ve,children:" Yeni Sipari"})]})}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:16},children:[e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam"}),e.jsx("div",{className:"metric-value",children:$e.total})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Taslak"}),e.jsx("div",{className:"metric-value",children:$e.draft})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bekleyen"}),e.jsx("div",{className:"metric-value",children:$e.pending})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam Tutar"}),e.jsx("div",{className:"metric-value",children:As($e.totalAmount)})]})]})})]}),e.jsxs("div",{className:"filter-bar",style:{marginBottom:16},children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Ara"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"Sipari no, tedariki...",value:v,onChange:T=>S(T.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Durum"}),e.jsxs("select",{className:"filter-input",value:k,onChange:T=>R(T.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),e.jsx("option",{value:"draft",children:"Taslak"}),e.jsx("option",{value:"sent",children:"Gnderildi"}),e.jsx("option",{value:"partial",children:"Ksmi Teslim"}),e.jsx("option",{value:"delivered",children:"Tamamland"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Tedariki"}),e.jsxs("select",{className:"filter-input",value:w,onChange:T=>A(T.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),r.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]})]}),i?e.jsx(Dt,{text:"Sipariler ykleniyor..."}):u?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:u})]}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Sipari Listesi"}),e.jsxs("span",{className:"badge badge-secondary",children:[Te.length," kayt"]})]}),e.jsx(dt,{columns:[{label:"Sipari No",accessor:"id",render:T=>e.jsx("strong",{children:T})},{label:"Tedariki",accessor:"supplierName"},{label:"Kalem",accessor:"items",render:T=>`${(T==null?void 0:T.length)||0} kalem`},{label:"Tutar",accessor:"totalAmount",render:T=>As(T)},{label:"Durum",accessor:"status",render:T=>{const X=Sn[T]||{label:T,tone:"secondary"};return e.jsxs("span",{className:`badge badge-${X.tone}`,children:[X.icon," ",X.label]})}},{label:"Beklenen",accessor:"expectedDate",render:T=>T||"-"},{label:"Aksiyon",accessor:"actions",render:(T,X)=>e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-primary btn-small",type:"button",onClick:()=>ze(X),children:""}),X.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success btn-small",type:"button",onClick:()=>we(X.id),children:""}),e.jsx("button",{className:"btn btn-danger btn-small",type:"button",onClick:()=>ye(X),children:""})]})]})}],rows:Te})]}),e.jsx(Ie,{open:C,title:"Yeni Sipari Olutur",size:"xlarge",onClose:()=>y(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>y(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"order-form",disabled:W||!m.supplierId||m.items.length===0,children:W?"Kaydediliyor...":"Sipari Olutur"})]}),children:e.jsxs("form",{id:"order-form",onSubmit:le,children:[e.jsxs("div",{className:"grid grid-2",style:{gap:16,marginBottom:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tedariki *"}),e.jsxs("select",{className:"form-select",value:m.supplierId,onChange:T=>{const X=r.find(oe=>oe.id===T.target.value);j(oe=>({...oe,supplierId:T.target.value,supplierName:(X==null?void 0:X.name)||""}))},required:!0,children:[e.jsx("option",{value:"",children:"Sein"}),r.map(T=>e.jsxs("option",{value:T.id,children:[T.name," (",T.type==="dealer"?"Bayi":"retici",")"]},T.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Beklenen Tarih"}),e.jsx("input",{className:"form-input",type:"date",value:m.expectedDate,onChange:T=>j(X=>({...X,expectedDate:T.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Not"}),e.jsx("input",{className:"form-input",value:m.notes,onChange:T=>j(X=>({...X,notes:T.target.value})),placeholder:"Sipari notu..."})]})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:14},children:" rn Ekle"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"rn Ara"}),e.jsx("input",{className:"form-input",placeholder:"rn kodu veya ad...",value:J,onChange:T=>ee(T.target.value)}),re.length>0&&e.jsx("div",{style:{marginTop:8,border:"1px solid var(--color-border)",borderRadius:6,maxHeight:150,overflow:"auto"},children:re.map(T=>e.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid var(--color-border)"},onClick:()=>_e(T),onKeyDown:X=>X.key==="Enter"&&_e(T),tabIndex:0,role:"button",children:[e.jsx("strong",{children:T.productCode}),"-",T.colorCode,"  ",T.name," ",T.colorName||""]},T.id))})]}),e.jsxs("div",{className:"grid grid-4",style:{gap:12},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"rn Kodu"}),e.jsx("input",{className:"form-input",value:z.productCode,onChange:T=>P(X=>({...X,productCode:T.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Renk Kodu"}),e.jsx("input",{className:"form-input",value:z.colorCode,onChange:T=>P(X=>({...X,colorCode:T.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:11},children:"Miktar"}),e.jsx("input",{className:"form-input",type:"number",min:"1",value:z.quantity,onChange:T=>P(X=>({...X,quantity:Number(T.target.value)}))})]}),e.jsx("div",{className:"form-group",style:{margin:0,display:"flex",alignItems:"flex-end"},children:e.jsx("button",{type:"button",className:"btn btn-primary",style:{width:"100%"},onClick:Ze,disabled:!z.productCode,children:"+ Ekle"})})]})]}),e.jsxs("div",{className:"card subtle-card",style:{padding:16},children:[e.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:14},children:[" Sipari Kalemleri (",m.items.length,")"]}),m.items.length===0?e.jsx("div",{className:"text-muted",children:"Henz kalem eklenmedi"}):e.jsx("div",{className:"table-container",style:{maxHeight:200},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{children:"Miktar"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:m.items.map(T=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("strong",{children:T.productCode}),"-",T.colorCode,e.jsx("div",{className:"text-muted",children:T.productName})]}),e.jsxs("td",{children:[T.quantity," ",T.unit]}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",onClick:()=>V(T.productCode,T.colorCode),children:""})})]},`${T.productCode}-${T.colorCode}`))})]})})]})]})}),e.jsx(Ie,{open:Q,title:`Sipari Detay - ${(b==null?void 0:b.id)||""}`,size:"xlarge",onClose:()=>{F(!1),Z(null)},actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>ue(b),children:" Da Aktar"}),["sent","partial"].includes(b==null?void 0:b.status)&&e.jsx("button",{className:"btn btn-success",type:"button",onClick:Le,children:" Teslimat Kaydet"}),(b==null?void 0:b.status)==="draft"&&e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>we(b.id),children:" Siparii Gnder"})]}),children:b&&e.jsxs("div",{children:[e.jsx("div",{className:"card subtle-card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid grid-4",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Tedariki"}),e.jsx("div",{style:{fontWeight:600},children:b.supplierName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Durum"}),e.jsxs("span",{className:`badge badge-${((je=Sn[b.status])==null?void 0:je.tone)||"secondary"}`,children:[(De=Sn[b.status])==null?void 0:De.icon," ",((B=Sn[b.status])==null?void 0:B.label)||b.status]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Beklenen Tarih"}),e.jsx("div",{style:{fontWeight:600},children:b.expectedDate||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam"}),e.jsx("div",{style:{fontWeight:600,fontSize:18,color:"var(--color-primary)"},children:As(b.totalAmount)})]})]})}),e.jsxs("div",{className:"card",style:{marginBottom:16},children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Sipari Kalemleri"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn"}),e.jsx("th",{children:"Miktar"}),e.jsx("th",{children:"Teslim Alnan"}),e.jsx("th",{children:"Kalan"}),e.jsx("th",{children:"Birim Fiyat"}),e.jsx("th",{children:"Tutar"})]})}),e.jsx("tbody",{children:(te=b.items)==null?void 0:te.map((T,X)=>{const oe=T.quantity-(T.receivedQty||0);return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("strong",{children:T.productCode}),"-",T.colorCode,e.jsx("div",{className:"text-muted",children:T.productName})]}),e.jsxs("td",{children:[T.quantity," ",T.unit]}),e.jsx("td",{style:{color:"var(--color-success)"},children:T.receivedQty||0}),e.jsx("td",{style:{color:oe>0?"var(--color-warning)":"var(--color-success)"},children:oe}),e.jsx("td",{children:As(T.unitCost||0)}),e.jsx("td",{style:{fontWeight:600},children:As(T.totalCost||0)})]},`${T.productCode}-${X}`)})})]})})]}),((Be=b.deliveries)==null?void 0:Be.length)>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Teslimat Gemii"})}),e.jsx("div",{className:"timeline",children:b.deliveries.map(T=>{var X;return e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-point"}),e.jsxs("div",{children:[e.jsx("div",{className:"timeline-title",children:T.date}),e.jsx("div",{className:"timeline-subtitle",children:(X=T.items)==null?void 0:X.map(oe=>`${oe.productCode}: ${oe.quantity}`).join(", ")}),e.jsxs("div",{className:"text-muted",children:[T.receivedBy&&`Teslim alan: ${T.receivedBy}`," ",T.note&&` ${T.note}`]})]})]},T.id)})})]})]})}),e.jsx(Ie,{open:H,title:" Teslimat Kaydet",size:"xlarge",onClose:()=>$(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>$(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-warning",type:"button",onClick:()=>{ie(T=>({...T,items:T.items.map(X=>({...X,quantity:X.remaining}))}))},children:"Tmn Doldur"}),e.jsx("button",{className:"btn btn-success",type:"submit",form:"delivery-form",disabled:W||!E.items.some(T=>T.quantity>0),children:W?"Kaydediliyor...":` ${E.items.filter(T=>T.quantity>0).length} Kalem Kaydet`})]}),children:e.jsxs("form",{id:"delivery-form",onSubmit:Ee,children:[e.jsx("div",{className:"card subtle-card",style:{padding:12,marginBottom:16},children:e.jsxs("div",{className:"grid grid-4",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",style:{fontSize:11},children:"Sipari No"}),e.jsx("strong",{children:b==null?void 0:b.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",style:{fontSize:11},children:"Tedariki"}),e.jsx("strong",{children:b==null?void 0:b.supplierName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",style:{fontSize:11},children:"Toplam Kalem"}),e.jsx("strong",{children:E.items.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",style:{fontSize:11},children:"Bu Teslimatta"}),e.jsxs("strong",{style:{color:"var(--color-success)"},children:[E.items.filter(T=>T.quantity>0).length," kalem"]})]})]})}),e.jsxs("div",{className:"text-muted",style:{marginBottom:12,fontSize:13},children:[" Her kalem iin teslim alnan miktar girin. ",e.jsx("strong",{children:"Tab"})," ile sonraki kaleme geebilirsiniz."]}),e.jsx("div",{className:"table-container",style:{marginBottom:16,maxHeight:350,overflow:"auto"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"35%"},children:"rn"}),e.jsx("th",{style:{width:"15%"},children:"Sipari"}),e.jsx("th",{style:{width:"15%"},children:"nceki Alm"}),e.jsx("th",{style:{width:"15%"},children:"Kalan"}),e.jsx("th",{style:{width:"20%"},children:"Bu Teslimat"})]})}),e.jsx("tbody",{children:E.items.map((T,X)=>e.jsxs("tr",{style:{background:T.quantity>0?"var(--color-success-bg)":T.remaining===0?"var(--color-bg-secondary)":"transparent"},children:[e.jsxs("td",{children:[e.jsx("strong",{children:T.productCode}),"-",T.colorCode,e.jsx("div",{className:"text-muted",style:{fontSize:12},children:T.productName})]}),e.jsx("td",{children:Er(T.ordered)}),e.jsx("td",{style:{color:T.received>0?"var(--color-success)":"var(--text-muted)"},children:Er(T.received)}),e.jsx("td",{children:T.remaining>0?e.jsx("span",{style:{color:"var(--color-warning)",fontWeight:600},children:Er(T.remaining)}):e.jsx("span",{className:"badge badge-success",children:"Tamam"})}),e.jsx("td",{children:T.remaining>0?e.jsx("input",{className:"form-input",type:"number",min:"0",max:T.remaining,value:T.quantity,onChange:oe=>{const Ke=Math.min(Math.max(0,Number(oe.target.value)),T.remaining);ie(p=>({...p,items:p.items.map((D,ae)=>ae===X?{...D,quantity:Ke}:D)}))},onFocus:oe=>oe.target.select(),style:{width:90}}):e.jsx("span",{className:"text-muted",children:"-"})})]},`${T.productCode}-${X}`))})]})}),e.jsxs("div",{className:"grid grid-2",style:{gap:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Teslim Alan *"}),e.jsx("input",{className:"form-input",value:E.receivedBy,onChange:T=>ie(X=>({...X,receivedBy:T.target.value})),placeholder:"Teslim alan kiinin ad...",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Not (opsiyonel)"}),e.jsx("input",{className:"form-input",value:E.note,onChange:T=>ie(X=>({...X,note:T.target.value})),placeholder:"Teslimat notu, irsaliye no vb..."})]})]})]})}),e.jsxs(Ie,{open:x,title:" Eksik rnler - Toplu Sipari",size:"xlarge",onClose:()=>_(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>_(!1),children:"Kapat"}),e.jsx("button",{className:"btn btn-primary",type:"button",disabled:W||q.length===0,onClick:Oe,children:W?"Oluturuluyor...":` ${q.length} rn in Sipari Olutur`})]}),children:[e.jsx("div",{className:"text-muted",style:{marginBottom:16},children:"Aadaki rnler kritik stok seviyesinin altnda. Sipari vermek istediklerinizi sein:"}),e.jsx("div",{className:"table-container",style:{maxHeight:400},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:q.length===l.length&&l.length>0,onChange:T=>O(T.target.checked?[...l]:[])})}),e.jsx("th",{children:"rn"}),e.jsx("th",{children:"Tedariki"}),e.jsx("th",{children:"Mevcut"}),e.jsx("th",{children:"Kritik"}),e.jsx("th",{children:"nerilen"})]})}),e.jsx("tbody",{children:l.map(T=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:q.some(X=>X.itemId===T.itemId),onChange:X=>{X.target.checked?O(oe=>[...oe,T]):O(oe=>oe.filter(Ke=>Ke.itemId!==T.itemId))}})}),e.jsxs("td",{children:[e.jsx("strong",{children:T.productCode}),"-",T.colorCode,e.jsx("div",{className:"text-muted",children:T.name})]}),e.jsx("td",{children:T.supplierName}),e.jsx("td",{style:{color:"var(--color-danger)"},children:Er(T.available)}),e.jsx("td",{children:Er(T.critical)}),e.jsx("td",{style:{fontWeight:600},children:Er(T.suggestedQty)})]},T.itemId))})]})})]}),e.jsx(Ie,{open:!!Y,title:"Silme Onay",size:"small",onClose:()=>ye(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>ye(null),children:"Vazge"}),e.jsx("button",{className:"btn btn-danger",type:"button",onClick:g,disabled:W,children:"Sil"})]}),children:e.jsxs("p",{children:[e.jsx("strong",{children:Y==null?void 0:Y.id})," sipariini silmek istediinize emin misiniz?"]})})]})},lr=t=>new Intl.NumberFormat("tr-TR").format(t||0),hp={name:"",type:"manufacturer",category:"",jobRoleId:"",supplyType:"stock",leadTimeDays:7,notes:"",contact:{phone:"",email:"",address:"",contactPerson:""}},fp={productCode:"",colorCode:"",productName:"",quantity:1,unit:"boy",type:"received",date:new Date().toISOString().slice(0,10),note:""},v0=()=>{var ze,we,Le,Ee,g,K,ue,je,De;const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,f]=d.useState("all"),[v,S]=d.useState([]),[k,R]=d.useState(!1),[w,A]=d.useState(null),[C,y]=d.useState(hp),[m,j]=d.useState(!1),[z,P]=d.useState(!1),[W,G]=d.useState(null),[Q,F]=d.useState(null),[b,Z]=d.useState([]),[Se,fe]=d.useState(!1),[H,$]=d.useState(!1),[E,ie]=d.useState(fp),[J,ee]=d.useState(""),[re,N]=d.useState([]),[x,_]=d.useState(!1),[q,O]=d.useState(null);d.useEffect(()=>{ye(),Y()},[]);const Y=async()=>{try{const B=await Ra(!0);S(B||[])}catch(B){console.warn("Job roles yklenemedi:",B)}},ye=async()=>{try{n(!0),a("");const B=await sr();s(B)}catch(B){a(B.message||"Tedarikiler alnamad")}finally{n(!1)}},Pe=d.useMemo(()=>{let B=[...t];if(i){const te=i.toLowerCase();B=B.filter(Be=>{var T;return Be.name.toLowerCase().includes(te)||(Be.category||"").toLowerCase().includes(te)||(((T=Be.contact)==null?void 0:T.contactPerson)||"").toLowerCase().includes(te)})}return u!=="all"&&(B=B.filter(te=>te.type===u)),B},[t,i,u]),Te=()=>{A(null),y(hp),R(!0)},$e=B=>{var te,Be,T,X;A(B),y({name:B.name||"",type:B.type||"manufacturer",category:B.category||"",jobRoleId:B.jobRoleId||"",supplyType:B.supplyType||"stock",leadTimeDays:B.leadTimeDays||7,notes:B.notes||"",contact:{phone:((te=B.contact)==null?void 0:te.phone)||"",email:((Be=B.contact)==null?void 0:Be.email)||"",address:((T=B.contact)==null?void 0:T.address)||"",contactPerson:((X=B.contact)==null?void 0:X.contactPerson)||""}}),R(!0)},Ve=async B=>{B.preventDefault();try{if(j(!0),w){const te=await Ej(w.id,C);s(Be=>Be.map(T=>T.id===w.id?te:T))}else{const te=await Dj(C);s(Be=>[te,...Be])}R(!1)}catch(te){a(te.message||"Kayt yaplamad")}finally{j(!1)}},Ue=async()=>{if(q)try{j(!0),await Ij(q.id),s(B=>B.filter(te=>te.id!==q.id)),O(null)}catch(B){a(B.message||"Silinemedi")}finally{j(!1)}},_e=async B=>{G(B),P(!0),fe(!0);try{const[te,Be]=await Promise.all([ip(B.id),Aj(B.id)]);F(te),Z(Be)}catch(te){console.error("Balance load error:",te)}finally{fe(!1)}},Ze=()=>{ie({...fp,date:new Date().toISOString().slice(0,10)}),ee(""),N([]),$(!0)};d.useEffect(()=>{if(!J||J.length<2){N([]);return}const B=setTimeout(async()=>{_(!0);try{const te=await ey(J,"");N(te.slice(0,10))}catch(te){console.error("Product search error:",te)}finally{_(!1)}},300);return()=>clearTimeout(B)},[J]);const V=B=>{ie(te=>({...te,productCode:B.productCode,colorCode:B.colorCode,productName:`${B.name} ${B.colorName||""}`.trim(),unit:B.unit||"boy"})),ee(""),N([])},le=async B=>{if(B.preventDefault(),!!W)try{j(!0);const te=await Rj(W.id,E);Z(T=>[te,...T]);const Be=await ip(W.id);F(Be),$(!1)}catch(te){a(te.message||"Hareket kaydedilemedi")}finally{j(!1)}},Oe=d.useMemo(()=>{const B=t.filter(Be=>Be.type==="manufacturer").length,te=t.filter(Be=>Be.type==="dealer").length;return{total:t.length,manufacturers:B,dealers:te}},[t]);return e.jsxs("div",{children:[e.jsx(Fe,{title:"Tedarikiler & Bayiler",subtitle:"Tedariki ynetimi ve rn bazl hesap takibi",actions:e.jsx("button",{className:"btn btn-primary",type:"button",onClick:Te,children:" Yeni Tedariki"})}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:16},children:[e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam"}),e.jsx("div",{className:"metric-value",children:Oe.total})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"retici/Fabrika"}),e.jsx("div",{className:"metric-value",children:Oe.manufacturers})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bayi"}),e.jsx("div",{className:"metric-value",children:Oe.dealers})]})]})})]}),e.jsxs("div",{className:"filter-bar",style:{marginBottom:16},children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Ara"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"Tedariki ad, kategori...",value:i,onChange:B=>c(B.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Tr"}),e.jsxs("select",{className:"filter-input",value:u,onChange:B=>f(B.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),e.jsx("option",{value:"manufacturer",children:"retici/Fabrika"}),e.jsx("option",{value:"dealer",children:"Bayi"})]})]})]}),r?e.jsx(Dt,{text:"Tedarikiler ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Tedariki Listesi"}),e.jsxs("span",{className:"badge badge-secondary",children:[Pe.length," kayt"]})]}),e.jsx(dt,{columns:[{label:"Tedariki",accessor:"name",render:(B,te)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:te.name}),e.jsx("div",{className:"text-muted",children:te.category||"Genel"})]})},{label:"Tr",accessor:"type",render:B=>e.jsx("span",{className:`badge badge-${B==="dealer"?"warning":"primary"}`,children:B==="dealer"?" Bayi":" retici"})},{label:"Tedarik Tr",accessor:"supplyType",render:(B,te)=>{var T;const Be=(T=v.find(X=>X.id===te.jobRoleId))==null?void 0:T.name;return e.jsxs("div",{children:[e.jsx("span",{className:`badge badge-${B==="glass"?"info":B==="production"?"success":"secondary"}`,children:B==="glass"?" Cam":B==="production"?" D retim":" Stok"}),Be&&e.jsx("div",{className:"text-muted",style:{fontSize:11,marginTop:2},children:Be})]})}},{label:"letiim",accessor:"contact",render:(B,te)=>{var Be,T;return e.jsxs("div",{style:{fontSize:13},children:[e.jsx("div",{children:((Be=te.contact)==null?void 0:Be.contactPerson)||"-"}),e.jsx("div",{className:"text-muted",children:((T=te.contact)==null?void 0:T.phone)||"-"})]})}},{label:"Temin Sresi",accessor:"leadTimeDays",render:B=>`${B||7} gn`},{label:"Aksiyon",accessor:"actions",render:(B,te)=>e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-primary btn-small",type:"button",onClick:()=>_e(te),children:" Hesap"}),e.jsx("button",{className:"btn btn-secondary btn-icon",type:"button",onClick:()=>$e(te),children:""}),e.jsx("button",{className:"btn btn-danger btn-icon",type:"button",onClick:()=>O(te),children:""})]})}],rows:Pe})]}),e.jsx(Ie,{open:k,title:w?"Tedariki Dzenle":"Yeni Tedariki",size:"large",onClose:()=>R(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>R(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"supplier-form",disabled:m,children:m?"Kaydediliyor...":"Kaydet"})]}),children:e.jsxs("form",{id:"supplier-form",onSubmit:Ve,className:"grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tedariki Ad *"}),e.jsx("input",{className:"form-input",value:C.name,onChange:B=>y(te=>({...te,name:B.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tr *"}),e.jsxs("select",{className:"form-select",value:C.type,onChange:B=>y(te=>({...te,type:B.target.value})),children:[e.jsx("option",{value:"manufacturer",children:" retici/Fabrika"}),e.jsx("option",{value:"dealer",children:" Bayi"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Kategori"}),e.jsx("input",{className:"form-input",value:C.category,onChange:B=>y(te=>({...te,category:B.target.value})),placeholder:"PVC Profil, Aksesuar, Cam..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tedarik Tr *"}),e.jsxs("select",{className:"form-select",value:C.supplyType,onChange:B=>y(te=>({...te,supplyType:B.target.value,jobRoleId:B.target.value==="stock"?"":te.jobRoleId})),children:[e.jsx("option",{value:"stock",children:" Stok Tedarikisi"}),e.jsx("option",{value:"glass",children:" Cam Tedarikisi (retim)"}),e.jsx("option",{value:"production",children:" D retim Tedarikisi"})]})]}),(C.supplyType==="glass"||C.supplyType==="production")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Kolu *"}),e.jsxs("select",{className:"form-select",value:C.jobRoleId,onChange:B=>y(te=>({...te,jobRoleId:B.target.value})),children:[e.jsx("option",{value:"",children:"Tm (Genel)"}),v.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]}),e.jsx("small",{className:"text-muted",style:{fontSize:"0.75rem",marginTop:4},children:"Bu tedariki hangi i kolu iin sipari verilecek? Bo brakrsanz tm i kollarnda grnr."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Temin Sresi (gn)"}),e.jsx("input",{className:"form-input",type:"number",min:"1",value:C.leadTimeDays,onChange:B=>y(te=>({...te,leadTimeDays:Number(B.target.value)}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Yetkili Kii"}),e.jsx("input",{className:"form-input",value:C.contact.contactPerson,onChange:B=>y(te=>({...te,contact:{...te.contact,contactPerson:B.target.value}}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Telefon"}),e.jsx("input",{className:"form-input",value:C.contact.phone,onChange:B=>y(te=>({...te,contact:{...te.contact,phone:B.target.value}}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"E-posta"}),e.jsx("input",{className:"form-input",type:"email",value:C.contact.email,onChange:B=>y(te=>({...te,contact:{...te.contact,email:B.target.value}}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Adres"}),e.jsx("input",{className:"form-input",value:C.contact.address,onChange:B=>y(te=>({...te,contact:{...te.contact,address:B.target.value}}))})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Notlar"}),e.jsx("textarea",{className:"form-textarea",value:C.notes,onChange:B=>y(te=>({...te,notes:B.target.value})),placeholder:"Ek bilgiler..."})]})]})}),e.jsx(Ie,{open:z,title:` ${(W==null?void 0:W.name)||"Tedariki"} - rn Hesab`,size:"xxlarge",onClose:()=>{P(!1),G(null),F(null),Z([])},children:Se?e.jsx(Dt,{text:"Hesap bilgileri ykleniyor..."}):e.jsxs("div",{children:[e.jsx("div",{className:"card subtle-card",style:{marginBottom:16},children:e.jsxs("div",{className:"grid grid-4",style:{gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Tr"}),e.jsx("div",{style:{fontWeight:600},children:(W==null?void 0:W.type)==="dealer"?" Bayi":" retici"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Kategori"}),e.jsx("div",{style:{fontWeight:600},children:(W==null?void 0:W.category)||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Temin Sresi"}),e.jsxs("div",{style:{fontWeight:600},children:[(W==null?void 0:W.leadTimeDays)||7," gn"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"letiim"}),e.jsx("div",{style:{fontWeight:600},children:((ze=W==null?void 0:W.contact)==null?void 0:ze.phone)||"-"})]})]})}),Q&&e.jsxs("div",{className:"card",style:{marginBottom:16},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{className:"card-title",children:" rn Bazl Bakiye"}),e.jsx("button",{className:"btn btn-primary btn-small",type:"button",onClick:Ze,children:" Hareket Ekle"})]}),e.jsxs("div",{className:"grid grid-3",style:{gap:12,marginBottom:16,padding:"0 16px"},children:[e.jsxs("div",{style:{padding:12,background:"var(--color-success-bg)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{className:"metric-label",children:"Aldk (Toplam)"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-success)"},children:lr(((we=Q.summary)==null?void 0:we.totalReceived)||0)})]}),e.jsxs("div",{style:{padding:12,background:"var(--color-warning-bg)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{className:"metric-label",children:"Verdik (Toplam)"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-warning)"},children:lr(((Le=Q.summary)==null?void 0:Le.totalGiven)||0)})]}),e.jsxs("div",{style:{padding:12,background:(((Ee=Q.summary)==null?void 0:Ee.netBalance)||0)>=0?"var(--color-info-bg)":"var(--color-danger-bg)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{className:"metric-label",children:"Net Bakiye"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:(((g=Q.summary)==null?void 0:g.netBalance)||0)>=0?"var(--color-info)":"var(--color-danger)"},children:[(((K=Q.summary)==null?void 0:K.netBalance)||0)>=0?"+":"",lr(((ue=Q.summary)==null?void 0:ue.netBalance)||0)]}),e.jsx("div",{className:"text-muted",style:{fontSize:11},children:(((je=Q.summary)==null?void 0:je.netBalance)||0)>=0?"Biz fazla aldk":"Biz fazla verdik"})]})]}),((De=Q.items)==null?void 0:De.length)>0?e.jsx("div",{className:"table-container",style:{maxHeight:300},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"rn Kodu"}),e.jsx("th",{children:"Renk Kodu"}),e.jsx("th",{children:"rn Ad"}),e.jsx("th",{children:"Birim"}),e.jsx("th",{style:{textAlign:"right"},children:"Aldk"}),e.jsx("th",{style:{textAlign:"right"},children:"Verdik"}),e.jsx("th",{style:{textAlign:"right"},children:"Bakiye"})]})}),e.jsx("tbody",{children:Q.items.map((B,te)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:B.productCode})}),e.jsx("td",{children:B.colorCode}),e.jsx("td",{children:B.productName}),e.jsx("td",{children:B.unit}),e.jsxs("td",{style:{textAlign:"right",color:"var(--color-success)"},children:["+",lr(B.received)]}),e.jsxs("td",{style:{textAlign:"right",color:"var(--color-warning)"},children:["-",lr(B.given)]}),e.jsxs("td",{style:{textAlign:"right",fontWeight:700,color:B.balance>=0?"var(--color-info)":"var(--color-danger)"},children:[B.balance>=0?"+":"",lr(B.balance)]})]},`${B.productCode}-${B.colorCode}-${te}`))})]})}):e.jsxs("div",{className:"empty-state",style:{padding:20},children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("div",{className:"empty-state-title",children:"Henz hareket yok"}),e.jsx("div",{className:"empty-state-description",children:"Bu tedariki ile rn alverii kayd bulunmuyor."})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{className:"card-title",children:" Son Hareketler"}),e.jsxs("span",{className:"badge badge-secondary",children:[b.length," kayt"]})]}),b.length>0?e.jsx("div",{className:"table-container",style:{maxHeight:250},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tarih"}),e.jsx("th",{children:"rn"}),e.jsx("th",{children:"Miktar"}),e.jsx("th",{children:"lem"}),e.jsx("th",{children:"Not"})]})}),e.jsx("tbody",{children:b.slice(0,20).map(B=>e.jsxs("tr",{children:[e.jsx("td",{children:B.date}),e.jsxs("td",{children:[e.jsx("strong",{children:B.productCode}),"-",B.colorCode,e.jsx("div",{className:"text-muted",style:{fontSize:12},children:B.productName})]}),e.jsxs("td",{children:[lr(B.quantity)," ",B.unit]}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${B.type==="received"?"success":"warning"}`,children:B.type==="received"?" Aldk":" Verdik"})}),e.jsx("td",{className:"text-muted",children:B.note||"-"})]},B.id))})]})}):e.jsx("div",{className:"text-muted",style:{padding:16},children:"Henz hareket kayd yok."})]})]})}),e.jsx(Ie,{open:H,title:" rn Hareketi Ekle",size:"large",onClose:()=>$(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>$(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"transaction-form",disabled:m||!E.productCode,children:m?"Kaydediliyor...":"Kaydet"})]}),children:e.jsxs("form",{id:"transaction-form",onSubmit:le,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"rn Ara (kod veya ad)"}),e.jsx("input",{className:"form-input",placeholder:"rn kodu veya ad yazn...",value:J,onChange:B=>ee(B.target.value)}),x&&e.jsx("div",{className:"text-muted",style:{marginTop:4},children:"Aranyor..."}),re.length>0&&e.jsx("div",{style:{marginTop:8,border:"1px solid var(--color-border)",borderRadius:6,maxHeight:200,overflow:"auto"},children:re.map(B=>e.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid var(--color-border)"},onClick:()=>V(B),onKeyDown:te=>te.key==="Enter"&&V(B),tabIndex:0,role:"button",children:[e.jsx("strong",{children:B.productCode}),"-",B.colorCode,"  ",B.name," ",B.colorName||"",e.jsxs("span",{className:"text-muted",style:{marginLeft:8},children:["(",B.unit,")"]})]},B.id))})]}),E.productCode&&e.jsxs("div",{style:{padding:12,background:"var(--color-primary-bg)",borderRadius:8,marginBottom:16},children:[e.jsxs("div",{style:{fontWeight:600},children:[E.productCode,"-",E.colorCode]}),e.jsx("div",{children:E.productName})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"rn Kodu *"}),e.jsx("input",{className:"form-input",value:E.productCode,onChange:B=>ie(te=>({...te,productCode:B.target.value})),placeholder:"18300",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Renk Kodu *"}),e.jsx("input",{className:"form-input",value:E.colorCode,onChange:B=>ie(te=>({...te,colorCode:B.target.value})),placeholder:"3",required:!0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"rn Ad"}),e.jsx("input",{className:"form-input",value:E.productName,onChange:B=>ie(te=>({...te,productName:B.target.value})),placeholder:"Carisma Kasa Beyaz"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Miktar *"}),e.jsx("input",{className:"form-input",type:"number",min:"0.01",step:"0.01",value:E.quantity,onChange:B=>ie(te=>({...te,quantity:Number(B.target.value)})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Birim"}),e.jsxs("select",{className:"form-select",value:E.unit,onChange:B=>ie(te=>({...te,unit:B.target.value})),children:[e.jsx("option",{value:"boy",children:"Boy"}),e.jsx("option",{value:"adet",children:"Adet"}),e.jsx("option",{value:"m2",children:"m"}),e.jsx("option",{value:"kg",children:"Kg"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"lem Tr *"}),e.jsxs("select",{className:"form-select",value:E.type,onChange:B=>ie(te=>({...te,type:B.target.value})),children:[e.jsx("option",{value:"received",children:" Aldk (Biz onlardan aldk)"}),e.jsx("option",{value:"given",children:" Verdik (Biz onlara verdik)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tarih"}),e.jsx("input",{className:"form-input",type:"date",value:E.date,onChange:B=>ie(te=>({...te,date:B.target.value}))})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Not"}),e.jsx("input",{className:"form-input",value:E.note,onChange:B=>ie(te=>({...te,note:B.target.value})),placeholder:"Acil ihtiya iin, dn verildi vb."})]})]})]})}),e.jsx(Ie,{open:!!q,title:"Silme Onay",size:"small",onClose:()=>O(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>O(null),children:"Vazge"}),e.jsx("button",{className:"btn btn-danger",type:"button",onClick:Ue,disabled:m,children:"Sil"})]}),children:e.jsxs("p",{children:[e.jsx("strong",{children:q==null?void 0:q.name})," tedarikisini silmek istediinize emin misiniz?"]})})]})},Ir=t=>new Intl.NumberFormat("tr-TR").format(t||0),j0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState(""),[v,S]=d.useState("all"),[k,R]=d.useState([]),[w,A]=d.useState(!1),[C,y]=d.useState(!1);d.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0),c("");const[F,b]=await Promise.all([wc(),sr()]);s(F),n(b)}catch(F){c(F.message||"Veriler alnamad")}finally{a(!1)}},j=d.useMemo(()=>{let F=[...t];if(u){const b=u.toLowerCase();F=F.filter(Z=>Z.productCode.toLowerCase().includes(b)||Z.name.toLowerCase().includes(b)||(Z.colorName||"").toLowerCase().includes(b))}return v!=="all"&&(F=F.filter(b=>b.supplierId===v)),F},[t,u,v]),z=d.useMemo(()=>{const F=t.length,b=t.reduce((Se,fe)=>Se+(fe.suggestedQty||0),0),Z=new Set(t.map(Se=>Se.supplierId)).size;return{total:F,totalShortage:b,suppliersNeeded:Z}},[t]),P=F=>{R(b=>b.find(Se=>Se.itemId===F.itemId)?b.filter(Se=>Se.itemId!==F.itemId):[...b,F])},W=()=>{k.length===j.length?R([]):R([...j])},G=async()=>{if(k.length===0)return;const F={};k.forEach(b=>{const Z=b.supplierId;F[Z]||(F[Z]={supplierId:b.supplierId,supplierName:b.supplierName,items:[]}),F[Z].items.push({productCode:b.productCode,colorCode:b.colorCode,productName:`${b.name} ${b.colorName||""}`.trim(),quantity:b.suggestedQty,unit:b.unit,unitCost:0})});try{A(!0);for(const b of Object.values(F))await go({supplierId:b.supplierId,supplierName:b.supplierName,items:b.items,notes:"Kritik stok siparii",expectedDate:"",relatedJobs:[]});R([]),y(!1),await m()}catch(b){c(b.message||"Sipari oluturulamad")}finally{A(!1)}},Q=d.useMemo(()=>{const F={};return k.forEach(b=>{F[b.supplierId]||(F[b.supplierId]={supplierName:b.supplierName,items:[]}),F[b.supplierId].items.push(b)}),Object.entries(F)},[k]);return e.jsxs("div",{children:[e.jsx(Fe,{title:"Eksik rnler",subtitle:"Kritik stok seviyesinin altndaki rnler - Sipari verilmesi gerekenler",actions:k.length>0&&e.jsxs("button",{className:"btn btn-primary",type:"button",onClick:()=>y(!0),children:[" ",k.length," rn in Sipari Olutur"]})}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:16},children:[e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Eksik rn"}),e.jsx("div",{className:"metric-value",children:z.total})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam Eksik"}),e.jsx("div",{className:"metric-value",children:Ir(z.totalShortage)})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Tedariki"}),e.jsx("div",{className:"metric-value",children:z.suppliersNeeded})]})]})})]}),e.jsxs("div",{className:"filter-bar",style:{marginBottom:16},children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Ara"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"rn kodu, ad...",value:u,onChange:F=>f(F.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Tedariki"}),e.jsxs("select",{className:"filter-input",value:v,onChange:F=>S(F.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),r.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),l?e.jsx(Dt,{text:"Eksik rnler ykleniyor..."}):i?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:i})]}):t.length===0?e.jsxs("div",{className:"card",style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("h3",{children:"Tm Stoklar Yeterli"}),e.jsx("p",{className:"text-muted",children:"Kritik seviyenin altnda rn bulunmuyor."})]}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Eksik rn Listesi"}),e.jsxs("span",{className:"badge badge-warning",children:[j.length," rn"]})]}),e.jsx(dt,{columns:[{label:e.jsx("input",{type:"checkbox",checked:k.length===j.length&&j.length>0,onChange:W}),accessor:"select",render:(F,b)=>e.jsx("input",{type:"checkbox",checked:k.some(Z=>Z.itemId===b.itemId),onChange:()=>P(b)})},{label:"rn",accessor:"name",render:(F,b)=>e.jsxs("div",{children:[e.jsx("strong",{children:b.productCode}),"-",b.colorCode,e.jsxs("div",{className:"text-muted",children:[b.name," ",b.colorName||""]})]})},{label:"Tedariki",accessor:"supplierName"},{label:"Mevcut",accessor:"available",render:F=>e.jsx("span",{style:{color:"var(--color-danger)",fontWeight:600},children:Ir(F)})},{label:"Kritik",accessor:"critical",render:F=>Ir(F)},{label:"Bekleyen Sipari",accessor:"pendingInOrders",render:F=>F>0?e.jsxs("span",{className:"badge badge-info",children:[Ir(F)," sipari edildi"]}):"-"},{label:"nerilen",accessor:"suggestedQty",render:(F,b)=>e.jsxs("strong",{style:{color:"var(--color-primary)"},children:[Ir(F)," ",b.unit]})}],rows:j})]}),e.jsxs(Ie,{open:C,title:" Sipari Olutur",size:"large",onClose:()=>y(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>y(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"button",disabled:w,onClick:G,children:w?"Oluturuluyor...":`${Q.length} Sipari Olutur`})]}),children:[e.jsx("div",{className:"text-muted",style:{marginBottom:16},children:"Seilen rnler tedarikiye gre gruplandrlarak sipari oluturulacak:"}),Q.map(([F,b])=>e.jsxs("div",{className:"card subtle-card",style:{marginBottom:12,padding:12},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:8},children:[" ",b.supplierName]}),e.jsx("div",{style:{fontSize:13},children:b.items.map(Z=>e.jsxs("div",{className:"metric-row",style:{padding:"4px 0"},children:[e.jsxs("span",{children:[Z.productCode,"-",Z.colorCode," ",Z.name]}),e.jsxs("strong",{children:[Ir(Z.suggestedQty)," ",Z.unit]})]},Z.itemId))})]},F))]})]})},Dl=t=>new Intl.NumberFormat("tr-TR").format(t||0),N0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState(""),[v,S]=d.useState("all");d.useEffect(()=>{k()},[]);const k=async()=>{try{a(!0),c("");const[y,m]=await Promise.all([Cc(),sr()]);s(y),n(m)}catch(y){c(y.message||"Veriler alnamad")}finally{a(!1)}},R=d.useMemo(()=>{const y=[];return t.filter(m=>["sent","partial"].includes(m.status)).forEach(m=>{var j;(j=m.items)==null||j.forEach(z=>{const P=z.quantity-(z.receivedQty||0);P>0&&y.push({id:`${m.id}-${z.productCode}-${z.colorCode}`,orderId:m.id,supplierId:m.supplierId,supplierName:m.supplierName,expectedDate:m.expectedDate,productCode:z.productCode,colorCode:z.colorCode,productName:z.productName,ordered:z.quantity,received:z.receivedQty||0,remaining:P,unit:z.unit,status:m.status})})}),y},[t]),w=d.useMemo(()=>{let y=[...R];if(u){const m=u.toLowerCase();y=y.filter(j=>j.orderId.toLowerCase().includes(m)||j.productCode.toLowerCase().includes(m)||j.productName.toLowerCase().includes(m))}return v!=="all"&&(y=y.filter(m=>m.supplierId===v)),y.sort((m,j)=>m.expectedDate?j.expectedDate?new Date(m.expectedDate)-new Date(j.expectedDate):-1:1)},[R,u,v]),A=d.useMemo(()=>{const y=R.length,m=R.reduce((P,W)=>P+W.remaining,0),j=R.filter(P=>P.expectedDate?new Date(P.expectedDate)<new Date:!1).length,z=new Set(R.map(P=>P.orderId)).size;return{totalItems:y,totalRemaining:m,overdueCount:j,uniqueOrders:z}},[R]),C=y=>y?new Date(y)<new Date:!1;return e.jsxs("div",{children:[e.jsx(Fe,{title:"Bekleyen Teslimatlar",subtitle:"Gnderilmi siparilerdeki teslim alnmam rnler"}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:16},children:[e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bekleyen Kalem"}),e.jsx("div",{className:"metric-value",children:A.totalItems})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Ak Sipari"}),e.jsx("div",{className:"metric-value",children:A.uniqueOrders})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam Bekleyen"}),e.jsx("div",{className:"metric-value",children:Dl(A.totalRemaining)})]})]})}),e.jsx("div",{className:"card",style:{padding:16,background:A.overdueCount>0?"var(--color-danger-bg)":void 0},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Gecikmi"}),e.jsx("div",{className:"metric-value",style:{color:A.overdueCount>0?"var(--color-danger)":void 0},children:A.overdueCount})]})]})})]}),e.jsxs("div",{className:"filter-bar",style:{marginBottom:16},children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Ara"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"Sipari no, rn...",value:u,onChange:y=>f(y.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Tedariki"}),e.jsxs("select",{className:"filter-input",value:v,onChange:y=>S(y.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),r.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]})]}),l?e.jsx(Dt,{text:"Bekleyen teslimatlar ykleniyor..."}):i?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:i})]}):R.length===0?e.jsxs("div",{className:"card",style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("h3",{children:"Tm Teslimatlar Tamamland"}),e.jsx("p",{className:"text-muted",children:"Bekleyen rn bulunmuyor."})]}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Bekleyen rnler"}),e.jsxs("span",{className:"badge badge-warning",children:[w.length," kalem"]})]}),e.jsx(dt,{columns:[{label:"Sipari",accessor:"orderId",render:y=>e.jsx("strong",{children:y})},{label:"Tedariki",accessor:"supplierName"},{label:"rn",accessor:"productName",render:(y,m)=>e.jsxs("div",{children:[e.jsx("strong",{children:m.productCode}),"-",m.colorCode,e.jsx("div",{className:"text-muted",children:m.productName})]})},{label:"Sipari",accessor:"ordered",render:(y,m)=>`${Dl(y)} ${m.unit}`},{label:"Teslim Alnan",accessor:"received",render:y=>e.jsx("span",{style:{color:"var(--color-success)"},children:Dl(y)})},{label:"Kalan",accessor:"remaining",render:(y,m)=>e.jsxs("strong",{style:{color:"var(--color-warning)"},children:[Dl(y)," ",m.unit]})},{label:"Beklenen Tarih",accessor:"expectedDate",render:y=>y?e.jsxs("span",{className:`badge badge-${C(y)?"danger":"secondary"}`,children:[y,C(y)&&" "]}):"-"},{label:"Durum",accessor:"status",render:y=>e.jsx("span",{className:`badge badge-${y==="partial"?"warning":"primary"}`,children:y==="partial"?"Ksmi":"Bekliyor"})}],rows:w})]})]})},b0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState("");d.useEffect(()=>{(async()=>{try{a(!0),c("");const[v,S]=await Promise.all([dl(),Gf()]);s(v),n(S)}catch(v){c(v.message||"Stok verisi alnamad")}finally{a(!1)}})()},[]);const u=d.useMemo(()=>{var R;const f=t.length,v=t.reduce((w,A)=>w+(A.onHand||0),0),S=t.filter(w=>w.onHand-w.reserved<=w.critical).length,k=((R=r[0])==null?void 0:R.date)||"-";return[{id:"stk1",label:"Kalem Says",value:f,icon:"",tone:"primary"},{id:"stk2",label:"Mevcut Stok",value:v,icon:"",tone:"success"},{id:"stk3",label:"Kritik Kalem",value:S,icon:"",tone:"danger"},{id:"stk4",label:"Son Hareket",value:k,icon:"",tone:"secondary"}]},[t,r]);return e.jsxs("div",{children:[e.jsx(Fe,{title:"Stok",subtitle:"Stok seviyeleri ve hareketlerinin zet grnm"}),l?e.jsx("div",{className:"card subtle-card",children:"Stok verisi ykleniyor..."}):i?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Stok verisi alnamad"}),e.jsx("div",{className:"error-message",children:i})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"stats-grid",children:u.map(f=>e.jsx(zc,{icon:f.icon,label:f.label,value:f.value,tone:f.tone},f.id))}),e.jsxs("div",{className:"card",style:{marginTop:24},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ne kan Hareketler"})}),e.jsx("div",{className:"card-body",children:r.slice(0,4).map(f=>e.jsxs("div",{className:"metric-row",style:{marginBottom:8},children:[e.jsxs("span",{className:"metric-label",children:[f.date,"  ",f.item]}),e.jsxs("span",{className:`badge badge-${f.change>=0?"success":"danger"}`,children:[f.change>=0?"+":"",f.change]})]},f.id))})]})]})]})},ar=t=>new Intl.NumberFormat("tr-TR").format(t||0),S0={stockIn:{label:"Stok Girii",icon:"",color:"success"},stockOut:{label:"Stok k",icon:"",color:"danger"},reserve:{label:"Rezervasyon",icon:"",color:"warning"},release:{label:"Rezerv ptal",icon:"",color:"info"},consume:{label:"retime Alnd",icon:"",color:"primary"}},yp=[{value:"sayim",label:"Saym Dzeltme"},{value:"siparis",label:"Sipari Teslimi"},{value:"bayi",label:"Bayi'den Alm"},{value:"iade",label:"ade"},{value:"diger",label:"Dier"}],xp=[{value:"fire",label:"Fire / Kayp"},{value:"sayim",label:"Saym Dzeltme"},{value:"bayi",label:"Bayi'ye Verildi"},{value:"hurda",label:"Hurda"},{value:"diger",label:"Dier"}],ds={itemId:"",productCode:"",colorCode:"",name:"",qty:1,unit:"boy"},k0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState(""),[v,S]=d.useState("all"),[k,R]=d.useState(""),[w,A]=d.useState(""),[C,y]=d.useState(""),[m,j]=d.useState(!1),[z,P]=d.useState([{...ds}]),[W,G]=d.useState("sayim"),[Q,F]=d.useState(""),[b,Z]=d.useState(""),[Se,fe]=d.useState(!1),[H,$]=d.useState([{...ds}]),[E,ie]=d.useState("fire"),[J,ee]=d.useState(""),[re,N]=d.useState(""),[x,_]=d.useState(!1);d.useRef([]),d.useEffect(()=>{q()},[]);const q=async()=>{try{a(!0),c("");const[g,K]=await Promise.all([Gf(),dl()]);s(g),n(K)}catch(g){c(g.message||"Veriler alnamad")}finally{a(!1)}},O=d.useMemo(()=>r.map(g=>({id:g.id,productCode:g.productCode,colorCode:g.colorCode,name:g.name,colorName:g.colorName,unit:g.unit,available:Math.max(0,(g.onHand||0)-(g.reserved||0)),onHand:g.onHand||0,displayText:`${g.productCode}-${g.colorCode} ${g.name} ${g.colorName||""}`})),[r]),Y=d.useMemo(()=>{let g=[...t];if(u){const K=u.toLowerCase();g=g.filter(ue=>(ue.item||"").toLowerCase().includes(K)||(ue.productCode||"").toLowerCase().includes(K)||(ue.reason||"").toLowerCase().includes(K))}return v!=="all"&&(g=g.filter(K=>K.type===v)),k&&(g=g.filter(K=>K.date===k)),g.sort((K,ue)=>new Date(ue.date)-new Date(K.date))},[t,u,v,k]),ye=d.useMemo(()=>{const g=new Date().toISOString().slice(0,10),K=t.filter(De=>De.date===g),ue=K.filter(De=>De.type==="stockIn").reduce((De,B)=>De+Math.abs(B.change||0),0),je=K.filter(De=>De.type==="stockOut"||De.type==="consume").reduce((De,B)=>De+Math.abs(B.change||0),0);return{total:t.length,todayCount:K.length,todayIn:ue,todayOut:je}},[t]),Pe=(g,K)=>{K&&P(ue=>ue.map((je,De)=>De===g?{...je,itemId:K.id,productCode:K.productCode,colorCode:K.colorCode,name:K.name,unit:K.unit||"boy"}:je))},Te=(g,K)=>{K&&$(ue=>ue.map((je,De)=>De===g?{...je,itemId:K.id,productCode:K.productCode,colorCode:K.colorCode,name:K.name,unit:K.unit||"boy",maxQty:K.available}:je))},$e=()=>{P(g=>[...g,{...ds}]),setTimeout(()=>{var K;const g=document.querySelectorAll("#entry-form .autocomplete-container input");g.length>0&&((K=g[g.length-1])==null||K.focus())},100)},Ve=()=>{$(g=>[...g,{...ds}]),setTimeout(()=>{var K;const g=document.querySelectorAll("#exit-form .autocomplete-container input");g.length>0&&((K=g[g.length-1])==null||K.focus())},100)},Ue=g=>{P(K=>K.filter((ue,je)=>je!==g))},_e=g=>{$(K=>K.filter((ue,je)=>je!==g))},Ze=(g,K)=>{P(ue=>ue.map((je,De)=>De===g?{...je,qty:Number(K)||0}:je))},V=(g,K)=>{$(ue=>ue.map((je,De)=>De===g?{...je,qty:Number(K)||0}:je))},le=async g=>{var ue;g.preventDefault();const K=z.filter(je=>je.itemId&&je.qty>0);if(K.length===0){c("En az bir rn ekleyin");return}try{_(!0),c("");const je=((ue=yp.find(De=>De.value===W))==null?void 0:ue.label)||W;for(const De of K)await lp({itemId:De.itemId,qty:De.qty,type:"stockIn",reason:`${je}${Q?` - ${Q}`:""}`,operator:b||"Sistem",reference:null});await q(),P([{...ds}]),G("sayim"),F(""),Z(""),j(!1)}catch(je){c(je.message||"Stok girii yaplamad")}finally{_(!1)}},Oe=async g=>{var ue;g.preventDefault();const K=H.filter(je=>je.itemId&&je.qty>0);if(K.length===0){c("En az bir rn ekleyin");return}try{_(!0),c("");const je=((ue=xp.find(De=>De.value===E))==null?void 0:ue.label)||E;for(const De of K)await lp({itemId:De.itemId,qty:De.qty,type:"stockOut",reason:`${je}${J?` - ${J}`:""}`,operator:re||"Sistem",reference:null});await q(),$([{...ds}]),ie("fire"),ee(""),N(""),fe(!1)}catch(je){c(je.message||"Stok k yaplamad")}finally{_(!1)}},ze=(g,K)=>{g.key==="Enter"&&z[K].itemId&&z[K].qty>0&&(g.preventDefault(),$e())},we=(g,K)=>{g.key==="Enter"&&H[K].itemId&&H[K].qty>0&&(g.preventDefault(),Ve())},Le=()=>{P([{...ds}]),G("sayim"),F(""),Z(""),A(""),c(""),j(!0)},Ee=()=>{$([{...ds}]),ie("fire"),ee(""),N(""),y(""),c(""),fe(!0)};return e.jsxs("div",{children:[e.jsx(Fe,{title:"Stok Hareketleri",subtitle:"Stok giri, k ve hareket kaytlar",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success",type:"button",onClick:Le,children:" Stok Girii"}),e.jsx("button",{className:"btn btn-danger",type:"button",onClick:Ee,children:" Stok k"})]})}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:16},children:[e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Toplam Hareket"}),e.jsx("div",{className:"metric-value",children:ar(ye.total)})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bugn"}),e.jsx("div",{className:"metric-value",children:ar(ye.todayCount)})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bugn Giri"}),e.jsxs("div",{className:"metric-value",style:{color:"var(--color-success)"},children:["+",ar(ye.todayIn)]})]})]})}),e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",children:[e.jsx("div",{className:"metric-icon",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"metric-label",children:"Bugn k"}),e.jsxs("div",{className:"metric-value",style:{color:"var(--color-danger)"},children:["-",ar(ye.todayOut)]})]})]})})]}),e.jsxs("div",{className:"filter-bar",style:{marginBottom:16},children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Ara"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"rn, neden...",value:u,onChange:g=>f(g.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Hareket Tipi"}),e.jsxs("select",{className:"filter-input",value:v,onChange:g=>S(g.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),e.jsx("option",{value:"stockIn",children:"Giri"}),e.jsx("option",{value:"stockOut",children:"k"}),e.jsx("option",{value:"reserve",children:"Rezervasyon"}),e.jsx("option",{value:"consume",children:"retim"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Tarih"}),e.jsx("input",{className:"filter-input",type:"date",value:k,onChange:g=>R(g.target.value)})]})]}),i&&e.jsxs("div",{className:"card error-card",style:{marginBottom:16},children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:i})]}),l?e.jsx(Dt,{text:"Hareketler ykleniyor..."}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Hareket Gemii"}),e.jsxs("span",{className:"badge badge-secondary",children:[Y.length," kayt"]})]}),e.jsx(dt,{columns:[{label:"Tarih",accessor:"date"},{label:"rn",accessor:"item",render:(g,K)=>e.jsxs("div",{children:[e.jsx("strong",{children:K.productCode||"-"}),"-",K.colorCode||"-",e.jsx("div",{className:"text-muted",style:{fontSize:12},children:K.item})]})},{label:"Tip",accessor:"type",render:g=>{const K=S0[g]||{label:g,color:"secondary"};return e.jsxs("span",{className:`badge badge-${K.color}`,children:[K.icon," ",K.label]})}},{label:"Miktar",accessor:"change",render:g=>e.jsxs("strong",{style:{color:g>=0?"var(--color-success)":"var(--color-danger)"},children:[g>=0?"+":"",ar(g)]})},{label:"Neden",accessor:"reason"},{label:"Operatr",accessor:"operator"},{label:"Referans",accessor:"reference",render:g=>g||"-"}],rows:Y})]}),e.jsx(Ie,{open:m,title:" Stok Girii",size:"xxlarge",onClose:()=>j(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,textAlign:"left",fontSize:13,color:"var(--text-muted)"},children:z.filter(g=>g.itemId&&g.qty>0).length>0&&` ${z.filter(g=>g.itemId&&g.qty>0).length} rn seildi`}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>j(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-success",type:"submit",form:"entry-form",disabled:x||!z.some(g=>g.itemId&&g.qty>0),children:x?"Kaydediliyor...":" Stok Girii Yap"})]}),children:e.jsxs("form",{id:"entry-form",onSubmit:le,children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)",padding:16,borderRadius:12,marginBottom:16},children:e.jsxs("div",{className:"grid grid-3",style:{gap:16},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontWeight:600},children:" Giri Tr"}),e.jsx("select",{className:"form-select",value:W,onChange:g=>G(g.target.value),style:{background:"white"},children:yp.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontWeight:600},children:" lemi Yapan"}),e.jsx("input",{className:"form-input",value:b,onChange:g=>Z(g.target.value),placeholder:"sim...",style:{background:"white"}})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontWeight:600},children:" Not"}),e.jsx("input",{className:"form-input",value:Q,onChange:g=>F(g.target.value),placeholder:"Aklama...",style:{background:"white"}})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,minHeight:400},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{background:"var(--color-bg-secondary)",padding:12,borderRadius:"12px 12px 0 0",borderBottom:"2px solid var(--color-primary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontWeight:600},children:"rn Ara"})]}),e.jsx("input",{id:"entry-search-input",className:"form-input",type:"search",placeholder:"rn kodu veya ad yazn...",value:w,onChange:g=>A(g.target.value),autoFocus:!0,style:{fontSize:15}})]}),e.jsx("div",{style:{flex:1,border:"1px solid var(--color-border)",borderTop:0,borderRadius:"0 0 12px 12px",overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{flex:1,overflow:"auto",maxHeight:340},children:[O.filter(g=>{if(!w.trim())return!0;const K=w.toLowerCase();return(g.productCode||"").toLowerCase().includes(K)||(g.colorCode||"").toLowerCase().includes(K)||(g.name||"").toLowerCase().includes(K)||(g.colorName||"").toLowerCase().includes(K)}).slice(0,50).map(g=>{const K=z.some(ue=>ue.itemId===g.id);return e.jsx("div",{onClick:()=>{if(!K){const ue=z.findIndex(je=>!je.itemId);ue>=0?Pe(ue,g):P(je=>[...je,{...ds,itemId:g.id,productCode:g.productCode,colorCode:g.colorCode,name:g.name,unit:g.unit||"boy"}])}},style:{padding:"10px 14px",borderBottom:"1px solid var(--color-border)",cursor:K?"not-allowed":"pointer",background:K?"var(--color-bg-secondary)":"white",opacity:K?.5:1,transition:"background 0.15s"},onMouseEnter:ue=>!K&&(ue.currentTarget.style.background="#f0fdf4"),onMouseLeave:ue=>!K&&(ue.currentTarget.style.background="white"),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:14},children:[e.jsx("span",{style:{color:"var(--color-primary)"},children:g.productCode}),e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:["-",g.colorCode]})]}),e.jsxs("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:[g.name," ",g.colorName&&`(${g.colorName})`]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600},children:[g.onHand," ",g.unit]}),K&&e.jsx("span",{className:"badge badge-success",style:{fontSize:10},children:" Seildi"})]})]})},g.id)}),O.filter(g=>{if(!w.trim())return!0;const K=w.toLowerCase();return(g.productCode||"").toLowerCase().includes(K)||(g.colorCode||"").toLowerCase().includes(K)||(g.name||"").toLowerCase().includes(K)}).length===0&&e.jsxs("div",{style:{padding:30,textAlign:"center",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:8},children:""}),e.jsx("div",{children:"rn bulunamad"})]})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:12,borderRadius:"12px 12px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontWeight:600},children:"Seilen rnler"})]}),e.jsxs("span",{className:"badge badge-primary",children:[z.filter(g=>g.itemId).length," rn"]})]}),e.jsxs("div",{style:{flex:1,border:"1px solid var(--color-border)",borderTop:0,borderRadius:"0 0 12px 12px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,overflow:"auto",maxHeight:340},children:z.filter(g=>g.itemId).length===0?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Henz rn seilmedi"}),e.jsx("div",{style:{fontSize:13},children:"Soldan rn seerek balayn"})]}):z.map((g,K)=>g.itemId&&e.jsxs("div",{style:{padding:"12px 14px",borderBottom:"1px solid var(--color-border)",background:"white"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:14},children:[e.jsx("span",{style:{color:"var(--color-primary)"},children:g.productCode}),e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:["-",g.colorCode]})]}),e.jsx("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:g.name})]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",onClick:()=>Ue(K),style:{padding:"4px 8px"},children:""})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("label",{style:{fontSize:12,fontWeight:600,color:"var(--color-text-secondary)"},children:"Miktar:"}),e.jsx("input",{className:"form-input",type:"number",min:"1",value:g.qty,onChange:ue=>Ze(K,ue.target.value),onKeyDown:ue=>ze(ue,K),style:{width:80,padding:"6px 10px"}}),e.jsx("span",{style:{fontSize:12,color:"var(--color-text-secondary)"},children:g.unit})]})]},K))}),z.filter(g=>g.itemId&&g.qty>0).length>0&&e.jsxs("div",{style:{padding:12,background:"var(--color-bg-secondary)",borderTop:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:600},children:"Toplam Giri:"}),e.jsxs("span",{style:{fontSize:18,fontWeight:700,color:"var(--color-success)"},children:["+",ar(z.filter(g=>g.itemId).reduce((g,K)=>g+(K.qty||0),0))]})]})]})]})]})]})}),e.jsx(Ie,{open:Se,title:" Stok k",size:"xxlarge",onClose:()=>fe(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,textAlign:"left",fontSize:13,color:"var(--text-muted)"},children:H.filter(g=>g.itemId&&g.qty>0).length>0&&` ${H.filter(g=>g.itemId&&g.qty>0).length} rn kartlacak`}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>fe(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-danger",type:"submit",form:"exit-form",disabled:x||!H.some(g=>g.itemId&&g.qty>0),children:x?"Kaydediliyor...":" Stok k Yap"})]}),children:e.jsxs("form",{id:"exit-form",onSubmit:Oe,children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",padding:16,borderRadius:12,marginBottom:16},children:e.jsxs("div",{className:"grid grid-3",style:{gap:16},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontWeight:600},children:" k Tr"}),e.jsx("select",{className:"form-select",value:E,onChange:g=>ie(g.target.value),style:{background:"white"},children:xp.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontWeight:600},children:" lemi Yapan"}),e.jsx("input",{className:"form-input",value:re,onChange:g=>N(g.target.value),placeholder:"sim...",style:{background:"white"}})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",style:{fontWeight:600},children:" Not"}),e.jsx("input",{className:"form-input",value:J,onChange:g=>ee(g.target.value),placeholder:"Aklama...",style:{background:"white"}})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,minHeight:400},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{background:"var(--color-bg-secondary)",padding:12,borderRadius:"12px 12px 0 0",borderBottom:"2px solid var(--color-danger)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontWeight:600},children:"rn Ara"}),e.jsx("span",{className:"text-muted",style:{fontSize:11,marginLeft:"auto"},children:" Sadece stokta olanlar"})]}),e.jsx("input",{id:"exit-search-input",className:"form-input",type:"search",placeholder:"rn kodu veya ad yazn...",value:C,onChange:g=>y(g.target.value),autoFocus:!0,style:{fontSize:15}})]}),e.jsx("div",{style:{flex:1,border:"1px solid var(--color-border)",borderTop:0,borderRadius:"0 0 12px 12px",overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{flex:1,overflow:"auto",maxHeight:340},children:[O.filter(g=>g.available>0).filter(g=>{if(!C.trim())return!0;const K=C.toLowerCase();return(g.productCode||"").toLowerCase().includes(K)||(g.colorCode||"").toLowerCase().includes(K)||(g.name||"").toLowerCase().includes(K)||(g.colorName||"").toLowerCase().includes(K)}).slice(0,50).map(g=>{const K=H.some(ue=>ue.itemId===g.id);return e.jsx("div",{onClick:()=>{if(!K){const ue=H.findIndex(je=>!je.itemId);ue>=0?Te(ue,g):$(je=>[...je,{...ds,itemId:g.id,productCode:g.productCode,colorCode:g.colorCode,name:g.name,unit:g.unit||"boy",maxQty:g.available}])}},style:{padding:"10px 14px",borderBottom:"1px solid var(--color-border)",cursor:K?"not-allowed":"pointer",background:K?"var(--color-bg-secondary)":"white",opacity:K?.5:1,transition:"background 0.15s"},onMouseEnter:ue=>!K&&(ue.currentTarget.style.background="#fef2f2"),onMouseLeave:ue=>!K&&(ue.currentTarget.style.background="white"),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:14},children:[e.jsx("span",{style:{color:"var(--color-primary)"},children:g.productCode}),e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:["-",g.colorCode]})]}),e.jsxs("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:[g.name," ",g.colorName&&`(${g.colorName})`]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"var(--color-success)"},children:[g.available," ",g.unit]}),K&&e.jsx("span",{className:"badge badge-danger",style:{fontSize:10},children:" Seildi"})]})]})},g.id)}),O.filter(g=>g.available>0).filter(g=>{if(!C.trim())return!0;const K=C.toLowerCase();return(g.productCode||"").toLowerCase().includes(K)||(g.colorCode||"").toLowerCase().includes(K)||(g.name||"").toLowerCase().includes(K)}).length===0&&e.jsxs("div",{style:{padding:30,textAlign:"center",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:8},children:""}),e.jsx("div",{children:"Stokta rn bulunamad"})]})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:12,borderRadius:"12px 12px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontWeight:600},children:"k Yaplacaklar"})]}),e.jsxs("span",{className:"badge badge-warning",children:[H.filter(g=>g.itemId).length," rn"]})]}),e.jsxs("div",{style:{flex:1,border:"1px solid var(--color-border)",borderTop:0,borderRadius:"0 0 12px 12px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,overflow:"auto",maxHeight:340},children:H.filter(g=>g.itemId).length===0?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Henz rn seilmedi"}),e.jsx("div",{style:{fontSize:13},children:"Soldan k yaplacak rnleri sein"})]}):H.map((g,K)=>g.itemId&&e.jsxs("div",{style:{padding:"12px 14px",borderBottom:"1px solid var(--color-border)",background:g.qty>(g.maxQty||0)?"#fef2f2":"white"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,fontSize:14},children:[e.jsx("span",{style:{color:"var(--color-primary)"},children:g.productCode}),e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:["-",g.colorCode]})]}),e.jsx("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:g.name})]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-small btn-icon",onClick:()=>_e(K),style:{padding:"4px 8px"},children:""})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("label",{style:{fontSize:12,fontWeight:600,color:"var(--color-text-secondary)"},children:"Miktar:"}),e.jsx("input",{className:"form-input",type:"number",min:"1",max:g.maxQty||999999,value:g.qty,onChange:ue=>V(K,ue.target.value),onKeyDown:ue=>we(ue,K),style:{width:80,padding:"6px 10px",borderColor:g.qty>(g.maxQty||0)?"var(--color-danger)":void 0}}),e.jsxs("span",{style:{fontSize:12,color:"var(--color-text-secondary)"},children:["/ ",g.maxQty||0," ",g.unit]}),g.qty>(g.maxQty||0)&&e.jsx("span",{style:{fontSize:11,color:"var(--color-danger)"},children:" Stok yetersiz!"})]})]},K))}),H.filter(g=>g.itemId&&g.qty>0).length>0&&e.jsxs("div",{style:{padding:12,background:"var(--color-bg-secondary)",borderTop:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:600},children:"Toplam k:"}),e.jsxs("span",{style:{fontSize:18,fontWeight:700,color:"var(--color-danger)"},children:["-",ar(H.filter(g=>g.itemId).reduce((g,K)=>g+(K.qty||0),0))]})]})]})]})]})]})})]})},C0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");d.useEffect(()=>{(async()=>{try{n(!0),a("");const u=await dl();s(u)}catch(u){a(u.message||"Kritik stoklar alnamad")}finally{n(!1)}})()},[]);const i=d.useMemo(()=>t.filter(c=>c.onHand-c.reserved<=c.critical),[t]);return e.jsxs("div",{children:[e.jsx(Fe,{title:"Kritik Stok",subtitle:"Kritik seviyenin altndaki kalemler"}),r?e.jsx("div",{className:"card subtle-card",children:"Kritik stoklar ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Kritik stoklar alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:"Kalem",accessor:"name"},{label:"SKU",accessor:"sku"},{label:"Mevcut",accessor:"onHand"},{label:"Rezerve",accessor:"reserved"},{label:"Kritik Limit",accessor:"critical"},{label:"Tedariki",accessor:"supplier"}],rows:i})]})},gp={productCode:"",colorCode:"",name:"",colorName:"",unit:"boy",supplierId:"",supplierName:"",critical:0,unitCost:0,notes:""},kn=t=>{const s=Math.max(0,(t.onHand||0)-(t.reserved||0)),r=t.critical||0;return s<=0?{label:"Tkendi",tone:"danger"}:s<=r?{label:"Kritik",tone:"danger"}:s<=r*1.5?{label:"Dk",tone:"warning"}:{label:"Salkl",tone:"success"}},Rs=t=>new Intl.NumberFormat("tr-TR").format(t||0),w0=t=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:0}).format(t||0),T0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState([]),[l,a]=d.useState([]),[i,c]=d.useState(""),[u,f]=d.useState(""),[v,S]=d.useState(""),[k,R]=d.useState("all"),[w,A]=d.useState("all"),[C,y]=d.useState(!1),[m,j]=d.useState("name"),[z,P]=d.useState("asc"),[W,G]=d.useState(!0),[Q,F]=d.useState(""),[b,Z]=d.useState(!1),[Se,fe]=d.useState(null),[H,$]=d.useState(gp),[E,ie]=d.useState({}),[J,ee]=d.useState(!1),[re,N]=d.useState(null);d.useEffect(()=>{x()},[]);const x=async()=>{try{G(!0),F("");const[V,le,Oe]=await Promise.all([dl(),Jf().catch(()=>[]),sr().catch(()=>[])]);s(V),n(le),a(Oe)}catch(V){F(V.message||"Stok listesi alnamad")}finally{G(!1)}},_=d.useMemo(()=>l.map(V=>({id:V.id,name:V.name,displayName:`${V.name} (${V.type==="dealer"?"Bayi":"retici"})`})),[l]),q=d.useMemo(()=>{const V=new Map;return r.forEach(le=>{V.set(le.code||le.id,{code:le.code||le.id,name:le.name})}),t.forEach(le=>{le.colorCode&&!V.has(le.colorCode)&&V.set(le.colorCode,{code:le.colorCode,name:le.colorName||le.colorCode})}),Array.from(V.values())},[r,t]),O=d.useMemo(()=>{const V=i.trim().toLowerCase(),le=u.trim().toLowerCase(),Oe=v.trim().toLowerCase();let ze=[...t];return V&&(ze=ze.filter(we=>(we.name||"").toLowerCase().includes(V)||(we.supplierName||"").toLowerCase().includes(V))),le&&(ze=ze.filter(we=>(we.productCode||"").toLowerCase().includes(le))),Oe&&(ze=ze.filter(we=>(we.colorCode||"").toLowerCase().includes(Oe))),k!=="all"&&(ze=ze.filter(we=>we.supplierId===k)),w!=="all"&&(ze=ze.filter(we=>kn(we).label===w)),C&&(ze=ze.filter(we=>kn(we).tone!=="success")),ze.sort((we,Le)=>{const Ee=m==="available"?(we.onHand||0)-(we.reserved||0):we[m],g=m==="available"?(Le.onHand||0)-(Le.reserved||0):Le[m];return typeof Ee=="string"?z==="asc"?(Ee||"").localeCompare(g||""):(g||"").localeCompare(Ee||""):z==="asc"?(Ee||0)-(g||0):(g||0)-(Ee||0)}),ze.map(we=>({...we,available:Math.max(0,(we.onHand||0)-(we.reserved||0)),stockValue:(we.unitCost||0)*(we.onHand||0)}))},[t,i,u,v,k,w,m,z,C]),Y=d.useMemo(()=>{const V=t.length,le=t.reduce((Le,Ee)=>Le+(Ee.onHand||0),0),Oe=t.reduce((Le,Ee)=>Le+Math.max(0,(Ee.onHand||0)-(Ee.reserved||0)),0),ze=t.filter(Le=>kn(Le).tone!=="success").length,we=t.reduce((Le,Ee)=>Le+(Ee.unitCost||0)*(Ee.onHand||0),0);return[{id:"sum1",label:"rn eidi",value:Rs(V),icon:""},{id:"sum2",label:"Mevcut Stok",value:Rs(le),icon:""},{id:"sum3",label:"Kullanlabilir",value:Rs(Oe),icon:""},{id:"sum4",label:"Dikkat Gereken",value:Rs(ze),icon:""},{id:"sum5",label:"Tahmini Deer",value:w0(we),icon:""}]},[t]),ye=()=>{fe(null),$(gp),ie({}),Z(!0)},Pe=V=>{fe(V),$({productCode:V.productCode||"",colorCode:V.colorCode||"",name:V.name||"",colorName:V.colorName||"",unit:V.unit||"boy",supplierId:V.supplierId||"",supplierName:V.supplierName||"",critical:V.critical||0,unitCost:V.unitCost||0,notes:V.notes||""}),ie({}),Z(!0)},Te=()=>{const V={};return H.productCode.trim()||(V.productCode="rn kodu gerekli"),H.colorCode.trim()||(V.colorCode="Renk kodu gerekli"),H.name.trim()||(V.name="rn ad gerekli"),H.unit.trim()||(V.unit="Birim gerekli"),!H.supplierId&&!H.supplierName.trim()&&(V.supplierName="Tedariki gerekli"),Number(H.critical)<0&&(V.critical="0 veya zeri olmal"),Number(H.unitCost)<0&&(V.unitCost="0 veya zeri olmal"),ie(V),Object.keys(V).length===0},$e=async V=>{if(V.preventDefault(),!Te())return;const le={productCode:H.productCode.trim(),colorCode:H.colorCode.trim(),name:H.name.trim(),colorName:H.colorName.trim()||H.colorCode.trim(),unit:H.unit,supplierId:H.supplierId||`SUP-TEMP-${Date.now()}`,supplierName:H.supplierName.trim(),critical:Number(H.critical)||0,unitCost:Number(H.unitCost)||0,notes:H.notes||""};try{if(ee(!0),F(""),Se){const Oe=await mj(Se.id,le);s(ze=>ze.map(we=>we.id===Se.id?Oe:we))}else{const Oe=await uj(le);s(ze=>[Oe,...ze])}Z(!1),fe(null)}catch(Oe){const ze=Oe.message||"Kayt yaplamad";ze.includes("validation error")||ze.includes("field required")?F("Eksik veya hatal alan var. Ltfen tm zorunlu alanlar doldurun."):F(ze)}finally{ee(!1)}},Ve=async()=>{if(re)try{ee(!0),await pj(re.id),s(V=>V.filter(le=>le.id!==re.id)),N(null)}catch(V){F(V.message||"Silinemedi")}finally{ee(!1)}},Ue=()=>{const V=["rn Kodu","Renk Kodu","rn Ad","Tedariki","Mevcut","Rezerve","Kullanlabilir","Kritik","Birim","Birim Maliyet","Durum"],le=t.map(Ee=>{const g=kn(Ee).label,K=Math.max(0,(Ee.onHand||0)-(Ee.reserved||0));return[Ee.productCode,Ee.colorCode,Ee.name,Ee.supplierName,Ee.onHand,Ee.reserved,K,Ee.critical,Ee.unit,Ee.unitCost,g].map(ue=>`"${String(ue??"").replace(/"/g,'""')}"`).join(",")}),Oe=[V.join(","),...le].join(`
`),ze=new Blob([Oe],{type:"text/csv;charset=utf-8;"}),we=URL.createObjectURL(ze),Le=document.createElement("a");Le.href=we,Le.download="stok-listesi.csv",Le.click(),URL.revokeObjectURL(we)},_e=V=>{V&&$(le=>({...le,colorCode:V.code||V,colorName:V.name||V}))},Ze=V=>{V&&$(le=>({...le,supplierId:V.id||"",supplierName:V.name||V}))};return e.jsxs("div",{children:[e.jsx(Fe,{title:"Stok Listesi",subtitle:"rn tanmlama ve stok durumu takibi",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:Ue,children:" CSV Da Aktar"}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:ye,children:" Yeni rn"})]})}),e.jsx("div",{className:"stats-grid",style:{marginBottom:16},children:Y.map(V=>e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{className:"metric-row",style:{alignItems:"center"},children:[e.jsx("div",{className:"metric-icon","aria-hidden":"true",children:V.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"metric-label",children:V.label}),e.jsx("div",{className:"metric-value",children:V.value})]})]})},V.id))}),e.jsxs("div",{className:"filter-bar",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"rn Ara"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"rn ad, tedariki...",value:i,onChange:V=>c(V.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"rn Kodu"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"Kod ara...",value:u,onChange:V=>f(V.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Renk Kodu"}),e.jsx("input",{className:"filter-input",type:"search",placeholder:"Renk ara...",value:v,onChange:V=>S(V.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Tedariki"}),e.jsxs("select",{className:"filter-input",value:k,onChange:V=>R(V.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),l.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Durum"}),e.jsxs("select",{className:"filter-input",value:w,onChange:V=>A(V.target.value),children:[e.jsx("option",{value:"all",children:"Tm"}),e.jsx("option",{value:"Kritik",children:"Kritik"}),e.jsx("option",{value:"Dk",children:"Dk"}),e.jsx("option",{value:"Salkl",children:"Salkl"}),e.jsx("option",{value:"Tkendi",children:"Tkendi"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:"Srala"}),e.jsxs("select",{className:"filter-input",value:`${m}-${z}`,onChange:V=>{const[le,Oe]=V.target.value.split("-");j(le),P(Oe)},children:[e.jsx("option",{value:"name-asc",children:"rn Ad (AZ)"}),e.jsx("option",{value:"name-desc",children:"rn Ad (ZA)"}),e.jsx("option",{value:"productCode-asc",children:"rn Kodu (AZ)"}),e.jsx("option",{value:"available-desc",children:"Stok (yksek  dk)"}),e.jsx("option",{value:"available-asc",children:"Stok (dk  yksek)"})]})]}),e.jsx("div",{className:"filter-group",style:{alignSelf:"flex-end"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:C,onChange:V=>y(V.target.checked)}),e.jsx("span",{className:"text-muted",children:"Sadece dikkat gereken"})]})})]}),Q&&e.jsxs("div",{className:"card error-card",style:{marginTop:16,marginBottom:16},children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:Q})]}),W?e.jsx(Dt,{text:"Stok listesi ykleniyor..."}):e.jsxs("div",{className:"card",style:{marginTop:16},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"rnler"}),e.jsxs("span",{className:"badge badge-secondary",children:[O.length," kayt"]})]}),e.jsx(dt,{columns:[{label:"rn",accessor:"name",render:(V,le)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:le.name}),e.jsxs("div",{className:"text-muted",style:{fontSize:12},children:["Kod: ",le.productCode,"  Renk: ",le.colorCode]})]})},{label:"Tedariki",accessor:"supplierName",render:V=>V||"-"},{label:"Stok Durumu",accessor:"onHand",render:(V,le)=>e.jsxs("div",{children:[e.jsx("strong",{children:Rs(le.onHand||0)})," ",le.unit,e.jsxs("div",{className:"text-muted",style:{fontSize:11},children:["Rezerve: ",Rs(le.reserved||0),"  Kullanlabilir: ",e.jsx("strong",{children:Rs(le.available)})]})]})},{label:"Kritik",accessor:"critical",render:V=>Rs(V||0)},{label:"Durum",accessor:"status",render:(V,le)=>{const Oe=kn(le);return e.jsx("span",{className:`badge badge-${Oe.tone}`,children:Oe.label})}},{label:"Aksiyon",accessor:"actions",render:(V,le)=>e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-secondary btn-icon",type:"button",onClick:()=>Pe(le),title:"Dzenle",children:""}),e.jsx("button",{className:"btn btn-danger btn-icon",type:"button",onClick:()=>N(le),title:"Sil",children:""})]})}],rows:O})]}),e.jsx(Ie,{open:b,title:Se?"rn Dzenle":"Yeni rn Tanmla",size:"large",onClose:()=>Z(!1),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>Z(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"stock-form",disabled:J,children:J?"Kaydediliyor...":"Kaydet"})]}),children:e.jsx("form",{id:"stock-form",onSubmit:$e,children:e.jsxs("div",{className:"grid grid-2",style:{gap:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["rn Kodu ",e.jsx("span",{style:{color:"var(--color-danger)"},children:"*"})]}),e.jsx("input",{className:`form-input ${E.productCode?"input-error":""}`,value:H.productCode,onChange:V=>$(le=>({...le,productCode:V.target.value})),placeholder:"rn: 18300",autoFocus:!0}),E.productCode&&e.jsx("div",{className:"form-error",children:E.productCode})]}),e.jsx(hr,{label:"Renk Kodu",required:!0,value:H.colorCode,onChange:V=>$(le=>({...le,colorCode:V})),onSelect:_e,options:q,displayKey:"name",valueKey:"code",placeholder:"Renk kodu yazn...",renderOption:V=>e.jsxs("div",{className:"autocomplete-option-content",children:[e.jsx("span",{className:"autocomplete-option-value",children:V.code}),e.jsx("span",{className:"autocomplete-option-label",children:V.name})]}),error:E.colorCode}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["rn Ad ",e.jsx("span",{style:{color:"var(--color-danger)"},children:"*"})]}),e.jsx("input",{className:`form-input ${E.name?"input-error":""}`,value:H.name,onChange:V=>$(le=>({...le,name:V.target.value})),placeholder:"rn: Carisma Kasa"}),E.name&&e.jsx("div",{className:"form-error",children:E.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Birim ",e.jsx("span",{style:{color:"var(--color-danger)"},children:"*"})]}),e.jsxs("select",{className:"form-select",value:H.unit,onChange:V=>$(le=>({...le,unit:V.target.value})),children:[e.jsx("option",{value:"boy",children:"Boy (metre)"}),e.jsx("option",{value:"adet",children:"Adet"}),e.jsx("option",{value:"m2",children:"m (metrekare)"}),e.jsx("option",{value:"kg",children:"Kg"}),e.jsx("option",{value:"paket",children:"Paket"})]})]}),e.jsx(hr,{label:"Tedariki",required:!0,value:H.supplierName,onChange:V=>$(le=>({...le,supplierName:V,supplierId:""})),onSelect:Ze,options:_,displayKey:"name",valueKey:"id",placeholder:"Tedariki ad yazn...",allowCreate:!0,createLabel:"Yeni tedariki ekle",onCreate:V=>{$(le=>({...le,supplierName:V,supplierId:""}))},renderOption:V=>e.jsx("div",{className:"autocomplete-option-content",children:e.jsx("span",{className:"autocomplete-option-label",children:V.displayName||V.name})}),error:E.supplierName}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Kritik Stok Seviyesi"}),e.jsx("input",{className:`form-input ${E.critical?"input-error":""}`,type:"number",min:"0",value:H.critical,onChange:V=>$(le=>({...le,critical:V.target.value})),placeholder:"0"}),e.jsx("div",{className:"text-muted",style:{fontSize:11,marginTop:4},children:"Bu seviyenin altna dnce uyar verilir"}),E.critical&&e.jsx("div",{className:"form-error",children:E.critical})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Birim Maliyet ()"}),e.jsx("input",{className:`form-input ${E.unitCost?"input-error":""}`,type:"number",min:"0",step:"0.01",value:H.unitCost,onChange:V=>$(le=>({...le,unitCost:V.target.value})),placeholder:"0"}),E.unitCost&&e.jsx("div",{className:"form-error",children:E.unitCost})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Not (Opsiyonel)"}),e.jsx("textarea",{className:"form-textarea",value:H.notes,onChange:V=>$(le=>({...le,notes:V.target.value})),placeholder:"Ek bilgiler...",rows:2})]})]})})}),e.jsxs(Ie,{open:!!re,title:"Silme Onay",size:"small",onClose:()=>N(null),actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>N(null),children:"Vazge"}),e.jsx("button",{className:"btn btn-danger",type:"button",onClick:Ve,disabled:J,children:"Sil"})]}),children:[e.jsxs("p",{children:[e.jsx("strong",{children:re==null?void 0:re.name})," (",re==null?void 0:re.productCode,"-",re==null?void 0:re.colorCode,") rnn silmek istediinize emin misiniz?"]}),e.jsx("p",{className:"text-muted",style:{marginTop:8},children:"Bu ilem geri alnamaz."})]})]})},z0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState("");return d.useEffect(()=>{(async()=>{try{n(!0),a("");const c=await Qf();s(c)}catch(c){a(c.message||"Rezervasyonlar alnamad")}finally{n(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(Fe,{title:"Rezervasyonlar",subtitle:"lere ayrlm stok kalemleri"}),r?e.jsx("div",{className:"card subtle-card",children:"Rezervasyonlar ykleniyor..."}):l?e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Rezervasyonlar alnamad"}),e.jsx("div",{className:"error-message",children:l})]}):e.jsx(dt,{columns:[{label:" Kodu",accessor:"job"},{label:"Kalem",accessor:"item"},{label:"Miktar",accessor:"qty"},{label:"Termin",accessor:"dueDate"},{label:"Durum",accessor:"status"}],rows:t})]})},D0=()=>{const[t,s]=d.useState([]),[r,n]=d.useState(!0),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,f]=d.useState({name:"",code:""}),[v,S]=d.useState({}),[k,R]=d.useState(!1),[w,A]=d.useState(null);d.useEffect(()=>{(async()=>{try{n(!0);const P=await Jf();s(P)}catch(P){a(P.message||"Renkler yklenemedi")}finally{n(!1)}})()},[]);const C=d.useMemo(()=>[{accessor:"name",label:"Renk Ad"},{accessor:"code",label:"Renk Kodu"},{accessor:"actions",label:"lem",render:(z,P)=>e.jsx("button",{className:"btn btn-danger btn-small",type:"button",onClick:W=>{W.stopPropagation(),A(P)},children:"Sil"})}],[]),y=()=>{const z={};return u.name.trim()||(z.name="Renk ad gerekli"),u.code.trim()||(z.code="Renk kodu gerekli"),S(z),Object.keys(z).length===0},m=async z=>{if(z.preventDefault(),!!y())try{R(!0);const P=await xj({name:u.name.trim(),code:u.code.trim().toUpperCase()});s(W=>[P,...W]),c(!1),f({name:"",code:""})}catch(P){S({submit:P.message||"Renk eklenemedi"})}finally{R(!1)}},j=async()=>{if(w)try{R(!0),await gj(w.id),s(z=>z.filter(P=>P.id!==w.id)),A(null)}catch(z){a(z.message||"Silinemedi")}finally{R(!1)}};return e.jsxs("div",{className:"container",children:[e.jsx(Fe,{title:"Renk Ynetimi",subtitle:"Stok kalemlerinde kullanlacak renkleri tanmlayn",actions:e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{f({name:"",code:""}),S({}),c(!0)},children:"+ Yeni Renk"})}),l&&e.jsxs("div",{className:"card error-card",children:[e.jsx("div",{className:"error-title",children:"Hata"}),e.jsx("div",{className:"error-message",children:l})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:r?e.jsx(Dt,{text:"Renkler ykleniyor..."}):e.jsx(dt,{columns:C,rows:t})})}),e.jsx(Ie,{open:i,title:"Yeni Renk Ekle",onClose:()=>c(!1),size:"small",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>c(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",type:"submit",form:"color-form",disabled:k,children:k?"Kaydediliyor...":"Kaydet"})]}),children:e.jsxs("form",{id:"color-form",onSubmit:m,children:[v.submit&&e.jsx("div",{className:"error-text",style:{marginBottom:12},children:v.submit}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"color-name",children:"Renk Ad"}),e.jsx("input",{id:"color-name",className:`form-input ${v.name?"input-error":""}`,type:"text",placeholder:"rn: Beyaz, Antrasit, Krem",value:u.name,onChange:z=>f(P=>({...P,name:z.target.value}))}),v.name&&e.jsx("span",{className:"error-text",children:v.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"color-code",children:"Renk Kodu"}),e.jsx("input",{id:"color-code",className:`form-input ${v.code?"input-error":""}`,type:"text",placeholder:"rn: BYZ, ANT, KRM",value:u.code,onChange:z=>f(P=>({...P,code:z.target.value.toUpperCase()}))}),v.code&&e.jsx("span",{className:"error-text",children:v.code})]})]})}),e.jsx(Ie,{open:!!w,title:"Silme Onay",onClose:()=>A(null),size:"small",actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>A(null),children:"ptal"}),e.jsx("button",{className:"btn btn-danger",type:"button",onClick:j,disabled:k,children:"Sil"})]}),children:e.jsxs("p",{children:[e.jsx("strong",{children:w==null?void 0:w.name})," (",w==null?void 0:w.code,") rengini silmek istediinize emin misiniz?"]})})]})},vp={internal:{label:" retim",color:"var(--success)",icon:""},external:{label:"D Sipari",color:"var(--warning)",icon:""},glass:{label:"Cam Siparii",color:"var(--info)",icon:""}},jp={pending:{label:"Bekliyor",color:"var(--warning)"},partial:{label:"Ksmi Teslim",color:"var(--info)"},completed:{label:"Tamamland",color:"var(--success)"}},El={broken:{label:"Krk/Hasarl",icon:""},missing:{label:"Eksik",icon:""},wrong:{label:"Yanl rn",icon:""},other:{label:"Dier",icon:""}},Np=[{value:"replaced",label:"Deiim yapld"},{value:"refunded",label:"ade alnd"},{value:"credited",label:"Alacak yazld"},{value:"cancelled",label:"ptal edildi"}],us=({orderType:t=null,showIssues:s=!1})=>{var X,oe,Ke;const r=Nc(),[n,l]=d.useState(!0),[a,i]=d.useState([]),[c,u]=d.useState({}),[f,v]=d.useState([]),[S,k]=d.useState([]),[R,w]=d.useState([]),[A,C]=d.useState([]),[y,m]=d.useState([]),[j,z]=d.useState([]),[P,W]=d.useState(""),[G,Q]=d.useState(""),[F,b]=d.useState(""),[Z,Se]=d.useState(!1),[fe,H]=d.useState(!1),[$,E]=d.useState(!1),[ie,J]=d.useState(!1),[ee,re]=d.useState(null),[N,x]=d.useState(null),[_,q]=d.useState(!1),[O,Y]=d.useState({jobId:"",roleId:"",roleName:"",orderType:"internal",supplierId:"",supplierName:"",items:[{glassType:"",glassName:"",quantity:1,unit:"adet",combination:"",notes:""}],estimatedDelivery:"",notes:""}),[ye,Pe]=d.useState({deliveries:[],deliveryDate:new Date().toISOString().slice(0,10),deliveryNote:""}),[Te,$e]=d.useState({resolution:"replaced",resolvedQty:0,note:"",newIssueQty:0,newIssueType:"",newIssueNote:""});d.useEffect(()=>{Ve()},[t,s]);const Ve=async()=>{l(!0);const p={};t&&(p.orderType=t),Z&&(p.overdue=!0);let D=[],ae={},Ne={},ce=[],Ge=[],Es=[],cn=[],dn=[];try{D=await Lj(p)}catch(jt){console.warn("Orders error:",jt)}try{ae=await Oj()}catch(jt){console.warn("Summary error:",jt)}try{Ne=await sy()}catch(jt){console.warn("Alerts error:",jt)}try{ce=await Sr()}catch(jt){console.warn("Jobs error:",jt)}try{Ge=await Ra(!0)}catch(jt){console.warn("Roles error:",jt)}try{Es=await sr()}catch(jt){console.warn("Suppliers error:",jt)}try{cn=await Tc()}catch(jt){console.warn("Glass error:",jt)}try{dn=await ry()}catch(jt){console.warn("Combinations error:",jt)}i(D||[]),u(ae||{}),v(Ne||{}),k(ce||[]),w(Ge||[]),C(Es||[]),m(cn||[]),z(dn||[]),l(!1)},Ue=d.useMemo(()=>{let p=[...a];if(P&&(p=p.filter(D=>D.status===P)),G&&(p=p.filter(D=>D.supplierId===G)),F){const D=F.toLowerCase();p=p.filter(ae=>{var Ne,ce,Ge,Es;return((Ne=ae.jobTitle)==null?void 0:Ne.toLowerCase().includes(D))||((ce=ae.customerName)==null?void 0:ce.toLowerCase().includes(D))||((Ge=ae.roleName)==null?void 0:Ge.toLowerCase().includes(D))||((Es=ae.supplierName)==null?void 0:Es.toLowerCase().includes(D))})}return Z&&(p=p.filter(D=>D.isOverdue)),s&&(p=p.filter(D=>{var ae;return(ae=D.issues)==null?void 0:ae.some(Ne=>Ne.status==="pending")})),p},[a,P,G,F,Z,s]),_e=d.useMemo(()=>s?"Sorun Takip":t==="internal"?" retim":t==="external"?"D Sipariler":t==="glass"?"Cam Siparileri":"Tm Sipariler",[t,s]),Ze=p=>{if(!p)return"";try{return new Date(p).toLocaleDateString("tr-TR")}catch{return p}},V=()=>{Y({jobId:"",roleId:"",roleName:"",orderType:t||"internal",supplierId:"",supplierName:"",items:[{glassType:"",glassName:"",quantity:1,unit:"adet",combination:"",notes:""}],estimatedDelivery:"",notes:""}),H(!0)},le=p=>{p&&Y(D=>({...D,jobId:p.id}))},Oe=p=>{const D=R.find(Ge=>Ge.id===p);if(!D)return;let ae=D.productionType||"internal",Ne="",ce="";if(D.productionType==="external"&&D.defaultSupplier){const Ge=A.find(Es=>Es.id===D.defaultSupplier);Ge&&(Ne=Ge.id,ce=Ge.name)}Y(Ge=>({...Ge,roleId:D.id,roleName:D.name,orderType:ae,supplierId:Ne,supplierName:ce,estimatedDelivery:Ge.estimatedDelivery||ze(D.estimatedDays)}))},ze=p=>{const D=new Date;return D.setDate(D.getDate()+(p||5)),D.toISOString().slice(0,10)},we=()=>{Y(p=>({...p,items:[...p.items,{glassType:"",glassName:"",quantity:1,unit:"adet",combination:"",notes:""}]}))},Le=(p,D,ae)=>{Y(Ne=>{const ce=[...Ne.items];return ce[p]={...ce[p],[D]:ae},{...Ne,items:ce}})},Ee=p=>{Y(D=>({...D,items:D.items.filter((ae,Ne)=>Ne!==p)}))},g=async()=>{if(!O.jobId||!O.roleId){alert(" ve i kolu seimi gerekli");return}if(O.items.length===0||O.items.every(p=>!p.quantity)){alert("En az bir kalem eklemelisiniz");return}try{q(!0),await vo(O),await Ve(),H(!1)}catch(p){alert(p.message)}finally{q(!1)}},K=p=>{re(p),Pe({deliveries:p.items.map((D,ae)=>({lineIndex:ae,receivedQty:0,problemQty:0,problemType:"",problemNote:""})),deliveryDate:new Date().toISOString().slice(0,10),deliveryNote:""}),E(!0)},ue=(p,D,ae)=>{Pe(Ne=>{const ce=[...Ne.deliveries];return ce[p]={...ce[p],[D]:ae},{...Ne,deliveries:ce}})},je=()=>{ee&&Pe(p=>({...p,deliveries:p.deliveries.map((D,ae)=>{var Ne,ce;return{...D,receivedQty:Math.max(0,(((Ne=ee.items[ae])==null?void 0:Ne.quantity)||0)-(((ce=ee.items[ae])==null?void 0:ce.receivedQty)||0))}})}))},De=async()=>{if(!ee)return;if(!ye.deliveries.some(D=>D.receivedQty>0||D.problemQty>0)){alert("En az bir teslim miktar girin");return}try{q(!0),await ty(ee.id,ye),await Ve(),E(!1)}catch(D){alert(D.message)}finally{q(!1)}},B=(p,D)=>{re(p),x(D),$e({resolution:"replaced",resolvedQty:D.quantity||0,note:"",newIssueQty:0,newIssueType:"",newIssueNote:""}),J(!0)},te=async()=>{if(!(!ee||!N))try{q(!0),await Pj(ee.id,N.id,{issueId:N.id,...Te}),await Ve(),J(!1)}catch(p){alert(p.message)}finally{q(!1)}},Be=async p=>{if(confirm("Bu siparii silmek istediinize emin misiniz?"))try{q(!0),await Bj(p),await Ve()}catch(D){alert(D.message)}finally{q(!1)}},T=[{header:"Sipari",accessor:"id",render:(p,D)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.8rem"},children:D.id}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:Ze(D.createdAt)})]})},{header:"",accessor:"jobTitle",render:(p,D)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:D.jobTitle}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:D.customerName})]})},{header:"Tr /  Kolu",accessor:"orderType",render:(p,D)=>{const ae=vp[D.orderType]||{};return e.jsxs("div",{children:[e.jsxs("span",{className:"badge",style:{background:ae.color,color:"#fff",marginBottom:"0.25rem"},children:[ae.icon," ",ae.label]}),e.jsx("div",{style:{fontSize:"0.75rem"},children:D.roleName})]})}},{header:"Tedariki",accessor:"supplierName",render:p=>p||e.jsx("span",{style:{color:"var(--text-muted)"},children:""})},{header:"Kalemler",accessor:"items",render:p=>{const D=(p==null?void 0:p.reduce((Ne,ce)=>Ne+(ce.quantity||0),0))||0,ae=(p==null?void 0:p.reduce((Ne,ce)=>Ne+(ce.receivedQty||0),0))||0;return e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:[ae," / ",D," adet"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[(p==null?void 0:p.length)||0," kalem"]})]})}},{header:"Tahmini Teslim",accessor:"estimatedDelivery",render:(p,D)=>e.jsxs("div",{children:[e.jsx("div",{style:{color:D.isOverdue?"var(--danger)":"inherit"},children:Ze(p)}),D.isOverdue&&e.jsx("span",{className:"badge badge-danger",style:{fontSize:"0.65rem"},children:"GECKT"})]})},{header:"Durum",accessor:"status",render:(p,D)=>{var ce;const ae=jp[p]||{},Ne=((ce=D.issues)==null?void 0:ce.filter(Ge=>Ge.status==="pending").length)||0;return e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{background:ae.color,color:"#fff"},children:ae.label}),Ne>0&&e.jsx("div",{style:{marginTop:"0.25rem"},children:e.jsxs("span",{className:"badge badge-danger",style:{fontSize:"0.65rem"},children:[" ",Ne," sorun"]})})]})}},{header:"lem",accessor:"actions",render:(p,D)=>{var ae;return e.jsxs("div",{style:{display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:[D.status!=="completed"&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>K(D),title:"Teslim Kaydet",children:""}),((ae=D.issues)==null?void 0:ae.some(Ne=>Ne.status==="pending"))&&e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>{const Ne=D.issues.find(ce=>ce.status==="pending");Ne&&B(D,Ne)},title:"Sorun z",children:""}),D.status==="pending"&&e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>Be(D.id),title:"Sil",style:{color:"var(--danger)"},children:""}),e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>r(`/isler/list?job=${D.jobId}`),title:"e Git",children:""})]})}}];return n?e.jsxs("div",{children:[e.jsx(Fe,{title:_e,subtitle:"retim ve tedarik siparileri"}),e.jsx("div",{className:"card subtle-card",children:"Ykleniyor..."})]}):e.jsxs("div",{children:[e.jsx(Fe,{title:_e,subtitle:`${Ue.length} sipari listeleniyor`,actions:e.jsx("button",{className:"btn btn-primary",onClick:V,children:"+ Yeni Sipari"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{className:"card",style:{margin:0,background:"linear-gradient(135deg, var(--warning) 0%, #f59e0b 100%)",color:"#fff"},children:e.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Bekleyen"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:c.pending||0})]})}),e.jsx("div",{className:"card",style:{margin:0,background:"linear-gradient(135deg, var(--info) 0%, #0ea5e9 100%)",color:"#fff"},children:e.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Ksmi Teslim"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:c.partial||0})]})}),e.jsx("div",{className:"card",style:{margin:0,background:"linear-gradient(135deg, var(--danger) 0%, #ef4444 100%)",color:"#fff"},children:e.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:" Geciken"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:c.overdue||0})]})}),e.jsx("div",{className:"card",style:{margin:0,background:"linear-gradient(135deg, var(--success) 0%, #22c55e 100%)",color:"#fff"},children:e.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Tamamlanan"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:c.completed||0})]})})]}),f.length>0&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",borderLeft:"4px solid var(--danger)"},children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[" Uyarlar (",f.length,")"]})}),e.jsx("div",{className:"card-body",style:{maxHeight:"200px",overflowY:"auto"},children:f.slice(0,5).map((p,D)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:D<4?"1px solid var(--border-color)":"none"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge",style:{marginRight:"0.5rem",background:p.severity==="high"?"var(--danger)":"var(--warning)",color:"#fff"},children:p.type==="overdue"?"GECKT":p.type==="due_today"?"BUGN":"SORUN"}),e.jsx("span",{children:p.message})]}),e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>r(`/isler/list?job=${p.jobId}`),children:""})]},D))})]}),e.jsx("div",{className:"card",style:{marginBottom:"1rem"},children:e.jsx("div",{className:"card-body",style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:" , mteri, tedariki ara...",value:F,onChange:p=>b(p.target.value),style:{flex:1,minWidth:"200px"}}),e.jsxs("select",{className:"form-control",value:P,onChange:p=>W(p.target.value),style:{width:"150px"},children:[e.jsx("option",{value:"",children:"Tm Durumlar"}),Object.entries(jp).map(([p,D])=>e.jsx("option",{value:p,children:D.label},p))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:Z,onChange:p=>Se(p.target.checked)}),"Sadece Gecikenler"]})]})})}),e.jsx("div",{className:"card",children:e.jsx(dt,{columns:T,data:Ue,emptyMessage:"Sipari bulunamad"})}),e.jsxs(Ie,{isOpen:fe,onClose:()=>H(!1),title:"Yeni retim/Tedarik Siparii",size:"large",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Se *"}),e.jsx(hr,{value:O.jobId,onChange:p=>Y(D=>({...D,jobId:p})),options:S.filter(p=>["URETIME_HAZIR","URETIMDE","ANLASMA_TAMAMLANDI"].includes(p.status)),displayKey:"title",valueKey:"id",placeholder:" ara...",onSelect:le})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:" Kolu *"}),e.jsxs("select",{className:"form-control",value:O.roleId,onChange:p=>Oe(p.target.value),children:[e.jsx("option",{value:"",children:"Sein..."}),R.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sipari Tr"}),e.jsx("select",{className:"form-control",value:O.orderType,onChange:p=>Y(D=>({...D,orderType:p.target.value})),children:Object.entries(vp).map(([p,D])=>e.jsxs("option",{value:p,children:[D.icon," ",D.label]},p))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tahmini Teslim"}),e.jsx("input",{type:"date",className:"form-control",value:O.estimatedDelivery,onChange:p=>Y(D=>({...D,estimatedDelivery:p.target.value}))})]}),(O.orderType==="external"||O.orderType==="glass")&&e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Tedariki"}),e.jsx(hr,{value:O.supplierName,onChange:p=>Y(D=>({...D,supplierName:p})),options:A,displayKey:"name",valueKey:"id",placeholder:"Tedariki ara...",onSelect:p=>Y(D=>({...D,supplierId:(p==null?void 0:p.id)||"",supplierName:(p==null?void 0:p.name)||""}))})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsx("label",{className:"form-label",style:{margin:0},children:"Kalemler"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:we,children:"+ Kalem Ekle"})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:O.items.map((p,D)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:O.orderType==="glass"?"1fr 1fr 80px 80px 40px":"1fr 80px 80px 40px",gap:"0.5rem",padding:"0.5rem",background:"var(--bg-secondary)",borderRadius:"6px",marginBottom:"0.5rem"},children:[O.orderType==="glass"?e.jsxs(e.Fragment,{children:[e.jsxs("select",{className:"form-control",value:p.glassType,onChange:ae=>{const Ne=y.find(ce=>ce.code===ae.target.value);Le(D,"glassType",ae.target.value),Le(D,"glassName",(Ne==null?void 0:Ne.name)||"")},children:[e.jsx("option",{value:"",children:"Cam tipi..."}),y.map(ae=>e.jsx("option",{value:ae.code,children:ae.name},ae.id))]}),e.jsx(hr,{value:p.combination,onChange:ae=>Le(D,"combination",ae),options:j,displayKey:"name",valueKey:"name",placeholder:"Kombinasyon...",onSelect:ae=>Le(D,"combination",(ae==null?void 0:ae.name)||"")})]}):e.jsx("input",{type:"text",className:"form-control",value:p.notes,onChange:ae=>Le(D,"notes",ae.target.value),placeholder:"Aklama..."}),e.jsx("input",{type:"number",className:"form-control",value:p.quantity,onChange:ae=>Le(D,"quantity",parseInt(ae.target.value)||0),min:1,placeholder:"Adet"}),e.jsxs("select",{className:"form-control",value:p.unit,onChange:ae=>Le(D,"unit",ae.target.value),children:[e.jsx("option",{value:"adet",children:"adet"}),e.jsx("option",{value:"m",children:"m"}),e.jsx("option",{value:"set",children:"set"})]}),e.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>Ee(D),style:{color:"var(--danger)"},disabled:O.items.length===1,children:""})]},D))})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Not"}),e.jsx("textarea",{className:"form-control",value:O.notes,onChange:p=>Y(D=>({...D,notes:p.target.value})),rows:2,placeholder:"Ek notlar..."})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>H(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-primary",onClick:g,disabled:_,children:_?"Kaydediliyor...":"Sipari Olutur"})]})]}),e.jsx(Ie,{isOpen:$,onClose:()=>E(!1),title:`Teslim Kaydet - ${ee==null?void 0:ee.id}`,size:"large",children:ee&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",ee.jobTitle]}),e.jsxs("div",{children:[e.jsx("strong",{children:" Kolu:"})," ",ee.roleName]}),ee.supplierName&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tedariki:"})," ",ee.supplierName]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("input",{type:"date",className:"form-control",value:ye.deliveryDate,onChange:p=>Pe(D=>({...D,deliveryDate:p.target.value})),style:{width:"150px"}}),e.jsx("button",{className:"btn btn-secondary",onClick:je,children:"Tmn Doldur"})]}),e.jsx("div",{style:{maxHeight:"350px",overflowY:"auto"},children:e.jsxs("table",{className:"data-table",style:{fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kalem"}),e.jsx("th",{style:{width:"80px"},children:"Sipari"}),e.jsx("th",{style:{width:"80px"},children:"Alnan"}),e.jsx("th",{style:{width:"80px"},children:"Teslim"}),e.jsx("th",{style:{width:"80px"},children:"Sorunlu"}),e.jsx("th",{style:{width:"120px"},children:"Sorun Tipi"})]})}),e.jsx("tbody",{children:ee.items.map((p,D)=>{const ae=(p.quantity||0)-(p.receivedQty||0),Ne=ye.deliveries[D]||{};return e.jsxs("tr",{children:[e.jsxs("td",{children:[p.glassName||p.notes||`Kalem ${D+1}`,p.combination&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:p.combination})]}),e.jsxs("td",{children:[p.quantity," ",p.unit]}),e.jsx("td",{children:e.jsx("span",{style:{color:ae===0?"var(--success)":"inherit"},children:p.receivedQty||0})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-control",value:Ne.receivedQty||"",onChange:ce=>ue(D,"receivedQty",parseInt(ce.target.value)||0),min:0,max:ae,style:{width:"70px",padding:"0.25rem"}})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-control",value:Ne.problemQty||"",onChange:ce=>ue(D,"problemQty",parseInt(ce.target.value)||0),min:0,style:{width:"70px",padding:"0.25rem"}})}),e.jsx("td",{children:Ne.problemQty>0&&e.jsxs("select",{className:"form-control",value:Ne.problemType||"",onChange:ce=>ue(D,"problemType",ce.target.value),style:{padding:"0.25rem",fontSize:"0.75rem"},children:[e.jsx("option",{value:"",children:"Sein..."}),Object.entries(El).map(([ce,Ge])=>e.jsxs("option",{value:ce,children:[Ge.icon," ",Ge.label]},ce))]})})]},D)})})]})}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Teslimat Notu"}),e.jsx("input",{type:"text",className:"form-control",value:ye.deliveryNote,onChange:p=>Pe(D=>({...D,deliveryNote:p.target.value})),placeholder:"Opsiyonel not..."})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>E(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-success",onClick:De,disabled:_,children:_?"Kaydediliyor...":" Teslim Kaydet"})]})]})}),e.jsx(Ie,{isOpen:ie,onClose:()=>J(!1),title:"Sorun zm",size:"medium",children:ee&&N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"6px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Sipari:"})," ",ee.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Sorun:"})," ",(X=El[N.type])==null?void 0:X.icon," ",(oe=El[N.type])==null?void 0:oe.label]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Miktar:"})," ",N.quantity," adet"]}),N.note&&e.jsxs("div",{children:[e.jsx("strong",{children:"Not:"})," ",N.note]}),((Ke=N.history)==null?void 0:Ke.length)>0&&e.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Gemi:"}),N.history.map((p,D)=>{var ae;return e.jsxs("div",{style:{fontSize:"0.75rem"},children:[Ze(p.date)," - ",(ae=Np.find(Ne=>Ne.value===p.resolution))==null?void 0:ae.label," (",p.resolvedQty," adet)"]},D)})]})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"zm Tr"}),e.jsx("select",{className:"form-control",value:Te.resolution,onChange:p=>$e(D=>({...D,resolution:p.target.value})),children:Np.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"zlen Miktar"}),e.jsx("input",{type:"number",className:"form-control",value:Te.resolvedQty,onChange:p=>$e(D=>({...D,resolvedQty:parseInt(p.target.value)||0})),min:0,max:N.quantity})]})]}),Te.resolution==="replaced"&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(var(--warning-rgb), 0.1)",borderRadius:"6px"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.5rem"},children:" Deiim de sorunlu mu?"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Yeni Sorunlu Miktar"}),e.jsx("input",{type:"number",className:"form-control",value:Te.newIssueQty,onChange:p=>$e(D=>({...D,newIssueQty:parseInt(p.target.value)||0})),min:0})]}),Te.newIssueQty>0&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sorun Tipi"}),e.jsxs("select",{className:"form-control",value:Te.newIssueType,onChange:p=>$e(D=>({...D,newIssueType:p.target.value})),children:[e.jsx("option",{value:"",children:"Sein..."}),Object.entries(El).map(([p,D])=>e.jsxs("option",{value:p,children:[D.icon," ",D.label]},p))]})]})]}),Te.newIssueQty>0&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Yeni Sorun Notu"}),e.jsx("input",{type:"text",className:"form-control",value:Te.newIssueNote,onChange:p=>$e(D=>({...D,newIssueNote:p.target.value})),placeholder:"Aklama..."})]})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"form-label",children:"zm Notu"}),e.jsx("textarea",{className:"form-control",value:Te.note,onChange:p=>$e(D=>({...D,note:p.target.value})),rows:2,placeholder:"Aklama..."})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>J(!1),children:"ptal"}),e.jsx("button",{className:"btn btn-success",onClick:te,disabled:_,children:_?"Kaydediliyor...":" Sorunu z"})]})]})})]})},E0=()=>e.jsx(Kv,{children:e.jsx(Bv,{children:e.jsxs(ke,{path:"/",element:e.jsx(Jv,{}),children:[e.jsx(ke,{index:!0,element:e.jsx(zl,{to:"/dashboard",replace:!0})}),e.jsx(ke,{path:"dashboard",element:e.jsx(Xj,{})}),e.jsxs(ke,{path:"isler",children:[e.jsx(ke,{index:!0,element:e.jsx(zl,{to:"list",replace:!0})}),e.jsx(ke,{path:"list",element:e.jsx(o0,{})}),e.jsx(ke,{path:"yeni",element:e.jsx(n0,{})}),e.jsx(ke,{path:"takvim",element:e.jsx(u0,{})}),e.jsx(ke,{path:"uretim-plani",element:e.jsx(m0,{})}),e.jsx(ke,{path:"montaj-sevkiyat",element:e.jsx(d0,{})}),e.jsxs(ke,{path:"uretim-takip",children:[e.jsx(ke,{index:!0,element:e.jsx(zl,{to:"siparisler",replace:!0})}),e.jsx(ke,{path:"siparisler",element:e.jsx(us,{})}),e.jsx(ke,{path:"ic-uretim",element:e.jsx(us,{orderType:"internal"})}),e.jsx(ke,{path:"dis-siparis",element:e.jsx(us,{orderType:"external"})}),e.jsx(ke,{path:"cam",element:e.jsx(us,{orderType:"glass"})}),e.jsx(ke,{path:"sorunlar",element:e.jsx(us,{showIssues:!0})})]}),e.jsx(ke,{path:"uretim-takip/siparisler",element:e.jsx(us,{})}),e.jsx(ke,{path:"uretim-takip/ic-uretim",element:e.jsx(us,{orderType:"internal"})}),e.jsx(ke,{path:"uretim-takip/dis-siparis",element:e.jsx(us,{orderType:"external"})}),e.jsx(ke,{path:"uretim-takip/cam",element:e.jsx(us,{orderType:"glass"})}),e.jsx(ke,{path:"uretim-takip/sorunlar",element:e.jsx(us,{showIssues:!0})})]}),e.jsx(ke,{path:"gorevler",element:e.jsx(r0,{})}),e.jsx(ke,{path:"musteriler",element:e.jsx(Gj,{})}),e.jsx(ke,{path:"planlama",element:e.jsx(h0,{})}),e.jsxs(ke,{path:"stok",children:[e.jsx(ke,{index:!0,element:e.jsx(b0,{})}),e.jsx(ke,{path:"liste",element:e.jsx(T0,{})}),e.jsx(ke,{path:"hareketler",element:e.jsx(k0,{})}),e.jsx(ke,{path:"kritik",element:e.jsx(C0,{})}),e.jsx(ke,{path:"rezervasyonlar",element:e.jsx(z0,{})}),e.jsx(ke,{path:"renkler",element:e.jsx(D0,{})})]}),e.jsx(ke,{path:"uretim/*",element:e.jsx(zl,{to:"/isler/uretim-takip",replace:!0})}),e.jsxs(ke,{path:"satinalma",children:[e.jsx(ke,{index:!0,element:e.jsx(y0,{})}),e.jsx(ke,{path:"siparisler",element:e.jsx(g0,{})}),e.jsx(ke,{path:"eksik",element:e.jsx(j0,{})}),e.jsx(ke,{path:"bekleyen",element:e.jsx(N0,{})}),e.jsx(ke,{path:"tedarikciler",element:e.jsx(v0,{})})]}),e.jsx(ke,{path:"evrak/irsaliye-fatura",element:e.jsx(e0,{})}),e.jsx(ke,{path:"finans/odemeler-kasa",element:e.jsx(s0,{})}),e.jsx(ke,{path:"arsiv",element:e.jsx(qj,{})}),e.jsx(ke,{path:"raporlar",element:e.jsx(f0,{})}),e.jsx(ke,{path:"ayarlar",element:e.jsx(Vj,{})}),e.jsx(ke,{path:"*",element:e.jsx(p0,{})})]})})});Ni.createRoot(document.getElementById("root")).render(e.jsx(Ap.StrictMode,{children:e.jsx(E0,{})}));
